/**
* 作者：chenwenqi
* 更新时间: 2016/3/21
*
* $.fn.extend:
* 1) linkAdd: 向页面动态添加css、js外部调用标签
* 2) addFavorite: 收藏本站 ，支持IE6-11，firefox，opera，其他内核将弹出文本提示
* 3) moveSlide: 自动获取监听元素，并根据鼠标移动来晃动元素
*        $.moveSlide();
* 4) moveDirection: 获取鼠标进入、离开指定区域时的方向。
* 5）RunHorse：轮播。支持向左，向上，渐隐
* 6）highlightNav：悬浮菜单
* 7) shutter：百叶窗效果，支持四个方向
* ============================================
* $.extend：
* 1) showDialog: 渐显弹出对话框
* 2) hideDialog: 渐隐隐藏对话框
* 3) diffDate: 倒计时计算剩余时间
* 4) audioplayer:背景音乐播放
* 5) getUrlParam: 获取URL传参
* 6) isIE6: 判断是否为IE6
* 7) getBrowserVer: 判断浏览器版本
* 8) isPlaceholder: 判断是否支持placeholder属性
*
**/
;(function(a){a.fn.extend({linkAdd:function(e,g){var d=a(this);var c=e.split("."),f=c[c.length-1].toLowerCase(),b=null;if(f=="css"){b=a("<link>").attr({href:e,type:"text/css",rel:"stylesheet"})}else{b=a("<script>").attr({src:e,type:"text/javascript"})}d.append(b);if(f=="js"){a.getScript(e).done(function(h,i){g()}).fail(function(j,i,h){alert("无法获取加载资源：'"+e+"'.")})}},addFavorite:function(c,b){return a(this).click(function(){var e=jQuery(this);var d=getBrowserVer();if(jQuery.browser.msie||d.ver=="11.0"){window.external.addFavorite(b,c)}else{if(jQuery.browser.mozilla||jQuery.browser.opera){e.attr("rel","sidebar");e.attr("title",c);e.attr("href",b)}else{alert("请使用Ctrl+D将本页加入收藏夹！")}}})},moveSlide:function(){var c=a("[slide-mode]");a.each(c,function(d,f){b(f)});function b(j){var h=a(j),g=h.position().left,i=h.position().top,e=a(window),d=e.width()/2,f=e.height()/2;a(document).mousemove(function(o){var l=d/2-o.pageX,k=f/2-o.pageY,p=h.attr("slide-mode"),m=h.attr("slide-step"),n=parseInt(h.attr("slide-speed"));if(p==2){h.clearQueue("myQueue").stop().animate({left:g+l/m+"px",top:i+k/m+"px"},n,"swing")}else{if(p==1){h.clearQueue("myQueue").stop().animate({top:i+k/m+"px"},n,"swing")}else{h.clearQueue("myQueue").stop().animate({left:g+l/m+"px"},n,"swing")}}})}},moveDirection:function(b){a(this).bind("mouseenter",function(i){var d=a(this).outerWidth(),f=a(this).outerHeight();var c=(i.pageX-a(this)[0].offsetLeft-(d/2))*((d>f)?(f/d):1);var j=(i.pageY-a(this)[0].offsetTop-(f/2))*((f>d)?(d/f):1);var g=Math.round((Math.atan2(j,c)*(180/Math.PI)+180)/90+3)%4;if(a.isFunction(b)){b("in",g)}});a(this).bind("mouseleave",function(i){var d=a(this).outerWidth(),f=a(this).outerHeight();var c=(i.pageX-a(this)[0].offsetLeft-(d/2))*((d>f)?(f/d):1);var j=(i.pageY-a(this)[0].offsetTop-(f/2))*((f>d)?(d/f):1);var g=Math.round((Math.atan2(j,c)*(180/Math.PI)+180)/90+3)%4;if(a.isFunction(b)){b("out",g)}})},RunHorse:function(r){var s=a.extend({dir:"left",step:1,speed:1000,numBtns:true,toggleBtn:true,auto:true,wait:2000,mode:"slide",easing:"swing"},(typeof r==="object")?r:{});var v=a(this),d=(a(this).children()[0].tagName=="UL")?a(this).children().children():a(this).children(),m=d.length,l=0,f=(s.dir.toUpperCase()=="LEFT"||s.dir.toUpperCase()=="RIGHT")?true:false,w=null,y=null,k=null,x="on",n=s.auto,u=s.wait,j=s.step,q=s.speed,b=s.mode,g=s.easing,c=null,p=false;function t(){if(s.toggleBtn){w=a("<a>").attr({href:"javascript:;","class":"pre"}).html("<");y=a("<a>").attr({href:"javascript:;","class":"next"}).html(">");v.after(w).after(y);w.click(function(){if(!p){var A=l;l=(((j==1)?--l:(l-j))+m)%m;i(l,A)}});y.click(function(){if(!p){var A=l;l=(((j==1)?++l:(l+j))+m)%m;i(l,A)}})}if(s.numBtns){var z=a("<div>").addClass("runNum");for(var o=1;o<=m;o++){z.append(a("<a>").attr("href","javascript:;").html(o))}v.after(z);k=z.children();k.each(function(A,B){a(B).click(function(){if(!p){var C=l;l=A;i(l,C,true)}})})}}var i=function(A,z,o){if(A==z){return}if(b=="fade"){d.eq(A).fadeIn(q).siblings("li").fadeOut(q)}else{p=true;var B={};if(z<A){B[(f?"left":"top")]="100%";d.eq(A).css(B);B[(f?"left":"top")]="-100%";d.eq(z).animate(B,q,g);B[(f?"left":"top")]="0";d.eq(A).animate(B,q,g,function(){p=false})}else{B[(f?"left":"top")]="-100%";d.eq(A).css(B);B[(f?"left":"top")]="100%";d.eq(z).animate(B,q,g);B[(f?"left":"top")]="0";d.eq(A).animate(B,q,g,function(){p=false})}}if(x&&s.numBtns&&k.length>A){k.eq(A).addClass(x).siblings().removeClass(x)}};var h=function(z){z.hover(function(){clearInterval(c)},function(){c=setInterval(e,u)})};var e=function(){if(!p){var o=l;l=(((j==1)?++l:(l+j))+m)%m;i(l,o)}};if(b=="fade"){d.eq(0).show().siblings().hide()}else{v.css("position","relative");d.each(function(o,z){if(o==0){a(z).css({position:"absolute",left:"0",top:"0"})}else{if(f){a(z).css({position:"absolute",left:"100%",top:"0"})}else{a(z).css({position:"absolute",left:"0",top:"100%"})}}})}t();if(x&&s.numBtns){k.eq(0).addClass(x)}if(n){c=setInterval(e,u);if(s.toggleBtn){h(w);h(y)}if(s.numBtns){h(k)}h(d)}},highlightNav:function(e){var g=a.extend({domList:[],selClass:"on",diff:400,mTop:40,topLi:0,bottomLi:0},(typeof e==="object")?e:{});var h=a(this),f=h.children("li");function b(i){return i>=a(document).height()-a(window).height()?true:false}function c(i){i.addClass(g.selClass).siblings().removeClass(g.selClass)}function d(){var j=0;for(var k=g.domList.length-1;k>=0;k--){if(k==g.domList.length-1){if(b(a(document).scrollTop())){c(f.eq(g.bottomLi==0?(f.length-1):g.bottomLi));j+=1}}var l=a(g.domList[k])[0].getBoundingClientRect().top;if(l<=g.diff&&j==0){c(f.eq(k));j+=1}}if(j==1){return false}else{c(f.eq(g.topLi))}}d();a(window).scroll(function(){d()});h.find("a").click(function(){if(a(this).parent().index()<=g.bottomLi){a("html,body").animate({scrollTop:a("#"+a(this).attr("link")).offset().top-g.mTop},500);c(a(this))}})},shutter:function(d){var b=a.extend({btn:"",btnClass:"",content:"",dir:"left",zIndex:1000,easing:"",speed:500,interval:500},(typeof d==="object")?d:{});var g=a(this).find("dl").outerWidth(),l=a(this).find("dl").outerHeight(),i=a(this).children(),s=a(this).children().length,k=a(b.btn),e=a(b.btn).outerWidth(),h=a(b.btn).outerHeight(),j=b.btnClass,c=0,p=b.dir.toUpperCase(),n=(p=="LEFT"||p=="RIGHT")?"h":"v",m=b.speed,q=b.interval,f;i.each(function(o){i.eq(o).css({position:"absolute",top:(n=="h")?0:h*o,left:(n=="v")?0:((p=="RIGHT")?(e*o):(e*o)),"z-index":(p=="TOP"||p=="LEFT")?(b.zIndex-o*10):(b.zIndex+o*10)});k.eq(o).css({cursor:"pointer"})});if(j){if(p=="TOP"||p=="LEFT"){k.eq(0).parent().addClass(j).siblings().removeClass(j)}else{k.eq(s-1).parent().addClass(j).siblings().removeClass(j)}}k.each(function(o){a(this).click(function(){if(f!=null){return}var t=a(this).parent().index();if(t==c){return}if(n=="h"){for(var u=0;u<s;u++){if(u<t||(u==t&&p=="RIGHT")){i.eq(u).stop().animate({left:(p=="RIGHT")?(e*u):-(g-e*(u+1))},{queue:false,duration:m,easing:b.easing})}else{i.eq(u).stop().animate({left:(p=="RIGHT")?(g+e*(u-1)):(e*u)},{queue:false,duration:m,easing:b.easing})}}}else{for(var u=0;u<s;u++){if(u<t||(u==t&&p=="BOTTOM")){i.eq(u).stop().animate({top:(p=="TOP")?-l+(h*(u+1)):(h*u)},{queue:false,duration:m,easing:b.easing})}else{i.eq(u).stop().animate({top:(p=="TOP")?h*u:(l-h*(1-u))},{queue:false,duration:m,easing:b.easing})}}}if(j){a(this).parent().addClass(j).siblings().removeClass(j)}c=t;f=setTimeout(r,q)})});function r(){clearTimeout(f);f=null}}});a.extend({showDialog:function(i){var h=300;var e=a(i).height(),d=a(i).width(),b=document.body.scrollHeight,g=document.body.scrollWidth;a(i).css({position:"fixed",top:"50%",left:"50%","z-index":9999,"margin-left":-(d/2)+"px","margin-top":-(e/2)+"px"});var f=a('<div id="popupMasker"></div>').css({width:"100%",height:"100%",position:"fixed",left:"0",top:"0","z-index":"9998",background:"#000",opacity:0.6,"-webkit-opacity":0.6,"-moz-opacity":0.6,filter:"alpha(opacity=60)"});if(a("#popupMasker").length==0){a("body").append(f)}else{a("#popupMasker").show()}if(a.isIE6){f.css({position:"absolute",height:document.body.offsetHeight+"px",top:"(document.compatMode && document.compatMode=='CSS1Compat') ? document.documentElement.scrollTop : document.body.scrollTop"});a(i).css({position:"absolute"})}a(i).fadeIn(h);if(a.isIE6){var j=a(window).scrollTop();if(document.body.scrollHeight>j){a(i).css({"margin-top":parseInt(j-a(i).outerHeight()/2)+"px",top:"50%"})}a(window).scroll(function(){j=a(window).scrollTop();if(document.body.scrollHeight>j){a(i).css({"margin-top":parseInt(j-a(i).outerHeight()/2)+"px",top:"50%"})}})}},hideDialog:function(c){var b=300;if(a.isIE6){a(c).hide();a("#popupMasker").hide()}else{a(c).fadeOut(b);a("#popupMasker").fadeOut(b)}},diffDate:function(i,k,l){var d=i.getTime(),c=k.getTime(),j,g,f,m,h;if(d<c){var b=(c-d)/1000;var e=setInterval(function(){j=Math.floor(b/60/60/24);g=("0"+(Math.floor(b/60/60)-(j*24))).substr(-2);f=("0"+(Math.floor(b/60)-(g*60)-(j*24))).substr(-2);m=("0"+b%60%60).substr(-2);l(j+":"+g+":"+f+":"+m);b--},1000)}else{if(a.isFunction(l)){l(0)}}},audioplayer:function(f){var e=a.extend({id:"",src:"",loop:true},(typeof f==="object")?f:{});var c=document.getElementById(e.id);if(c!=null){document.body.removeChild(c)}if(e.src!=""){if(navigator.userAgent.indexOf("MSIE")>0){var d=document.createElement("bgsound");d.id=e.id;d.src=e.src;d.setAttribute("autostart","true");if(loop){d.setAttribute("loop","infinite")}document.body.appendChild(d)}else{var d=document.createElement("audio");d.id=e.id;d.setAttribute("autoplay","autoplay");if(loop){d.setAttribute("loop","loop")}document.body.appendChild(d);if(src.substr(-4)==".mp3"){var b=document.createElement("source");b.src=e.src;b.type="audio/mpeg";d.appendChild(b)}else{if(src.substr(-4)==".ogg"){var g=document.createElement("source");g.src=file.ogg;g.type="audio/ogg";d.appendChild(g)}}}}},getUrlParam:function(b){var c=new RegExp("(^|&)"+b+"=([^&]*)(&|$)");var d=window.location.search.substr(1).match(c);if(d!=null){return unescape(d[2])}return null},isIE6:function(){return(!-[1]&&!window.XMLHttpRequest)},getBrowserVer:function(){var b={},d,c=navigator.userAgent.toLowerCase();(d=c.match(/rv:([\d.]+)\) like gecko/))?b={name:"ie",ver:d[1]}:(d=c.match(/msie ([\d.]+)/))?b={name:"ie",ver:d[1]}:(d=c.match(/firefox\/([\d.]+)/))?b={name:"firefox",ver:d[1]}:(d=c.match(/chrome\/([\d.]+)/))?b={name:"chrome",ver:d[1]}:(d=c.match(/opera.([\d.]+)/))?b={name:"opera",ver:d[1]}:(d=c.match(/version\/([\d.]+).*safari/))?b={name:"safari",ver:d[1]}:b={name:"unknow",ver:"0"};return b},isPlaceholder:function(){var b=document.createElement("input");return"placeholder" in b}})})(jQuery);
$(function(){if($.isIE6()){alert("您的浏览器版本过低，为体验更好效果，请升级您的浏览器！");}});

/**
 * 修复IE8及以下不支持placeholder属性
 * @author : 陈文琦(Barry)
 * @update : 2017/5/4
 * @version : 0.1.1
 */
;eval(function(p,a,c,k,e,d){e=function(c){return c.toString(36)};if(!''.replace(/^/,String)){while(c--){d[c.toString(a)]=k[c]||c.toString(a)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('(3(){2(!("0"8 d.c("5"))){$("5[0][9!=6],7[0]").e(3(){h a=$(k),b=a.f("0");2(a.1()===""){a.1(b).4("0")}a.j(3(){2(a.1()===b){a.1("").i("0")}}).g(3(){2(a.1()===""){a.1(b).4("0")}})})}})();',21,21,'placeholder|val|if|function|addClass|input|password|textarea|in|type|||createElement|document|each|attr|blur|var|removeClass|focus|this'.split('|'),0,{}));