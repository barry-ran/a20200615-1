(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesBackStage/pic_edit/pic_edit"],{"038e":function(t,i,e){"use strict";var a,n=function(){var t=this,i=t.$createElement;t._self._c},s=[];e.d(i,"b",function(){return n}),e.d(i,"c",function(){return s}),e.d(i,"a",function(){return a})},2258:function(t,i,e){"use strict";e.r(i);var a=e("fed2"),n=e.n(a);for(var s in a)"default"!==s&&function(t){e.d(i,t,function(){return a[t]})}(s);i["default"]=n.a},"57a7":function(t,i,e){"use strict";var a=e("edd8"),n=e.n(a);n.a},"67ff":function(t,i,e){"use strict";(function(t){e("d28f");a(e("66fd"));var i=a(e("c40d"));function a(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("5486")["createPage"])},c40d:function(t,i,e){"use strict";e.r(i);var a=e("038e"),n=e("2258");for(var s in n)"default"!==s&&function(t){e.d(i,t,function(){return n[t]})}(s);e("57a7");var c,o=e("f0c5"),u=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],c);i["default"]=u.exports},edd8:function(t,i,e){},fed2:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;e("88e4");var a={data:function(){return{$imgurl:this.$imgurl,pid:0,cates_all:[],cates_all_name:[],current_cate:0,cate_index:0,pro_thumb:"",isShare:!1,pic_name:"",look_num:"",pic_text:"",pic_onejf:"",pic_limitjf:"",pic_imgs:[],is_sub:0}},onLoad:function(t){t.pid?(this.pid=t.pid,this.getPicInfo()):this.getPicCate()},onPullDownRefresh:function(){this.pid?this.getPicInfo():this.getPicCate(),t.stopPullDownRefresh()},methods:{getPicInfo:function(){var i=this;t.request({url:this.$host+"/api/Managewxapp/getPicsInfo",data:{uniacid:this.$uniacid,suid:t.getStorageSync("suid"),pid:i.pid},success:function(e){if(0==e.data.data.error){var a=e.data.data.pic;i.pic_name=a.title,i.cates_all=a.cates_all,i.cates_all_name=a.cates_all_name,i.cate_index=a.cate_index,i.current_cate=a.cid,i.pic_text=a.desc,i.look_num=a.hits,i.pro_thumb=a.thumb,i.isShare=1==a.get_share_gz,i.isShare&&(i.pic_onejf=a.get_share_score,i.pic_limitjf=a.get_share_num),i.pic_imgs=a.text}else t.showModal({title:"提示",content:e.data.data.msg,showCancel:!1,success:function(i){t.navigateBack({})}})}})},getPicCate:function(){var i=this,e=this;t.request({url:this.$host+"/api/Managewxapp/getPicCatesForAdd",data:{uniacid:this.$uniacid,suid:t.getStorageSync("suid"),nid:e.nid},success:function(t){i.cates_all=t.data.data.cates.cates_all,i.cates_all_name=t.data.data.cates.cates_all_name,i.current_cate=i.cates_all[0].id}})},chooseCate:function(t){this.cate_index=t.target.value,this.current_cate=this.cates_all[this.cate_index]["id"]},input_name:function(t){this.pic_name=t.detail.value},input_look:function(t){this.look_num=t.detail.value},input_artText:function(t){this.pic_text=t.detail.value},changeJfShare:function(){this.isShare=!this.isShare},input_onejf:function(t){this.pic_onejf=t.detail.value},input_limitjf:function(t){this.pic_limitjf=t.detail.value},chooseThumb:function(){this.chooseImg(1)},choosePicImgs:function(){this.chooseImg(2)},chooseImg:function(i){var e=this,a=e.$baseurl+"wxupimg";t.chooseImage({count:9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(n){t.showLoading({title:"图片上传中"});var s=n.tempFilePaths,c=0,o=(s.length,function(){t.uploadFile({url:a,formData:{uniacid:e.$uniacid},filePath:s[c],name:"file",success:function(a){a.data;1==i&&(e.pro_thumb=a.data),2==i&&e.pic_imgs.push(a.data),t.hideLoading()},fail:function(t){console.log(t)}})});o(),console.log(e.release_img)}})},delimg:function(t){var i=this,e=t.currentTarget.dataset.index,a=i.pic_imgs;a.splice(e,1),i.pic_imgs=a},errorMsg:function(i){t.showToast({title:i,duration:1e3,icon:"none"})},formSubmit:function(i){if(1==this.is_sub)return!1;var e={};return this.pic_name?(e["title"]=this.pic_name,this.current_cate?(e["cid"]=this.current_cate,this.pro_thumb?(e["thumb"]=this.pro_thumb,e["desc"]=this.pic_text,e["hits"]=this.look_num,this.current_cate?(e["cid"]=this.current_cate,0==this.pic_imgs.length?(this.errorMsg("请上传组图"),!1):(e["text"]=this.pic_imgs,e["get_share_gz"]=this.isShare?1:2,this.isShare&&(e["get_share_num"]=this.pic_limitjf,e["get_share_score"]=this.pic_onejf),this.is_sub=1,void t.request({url:this.$host+"/api/Managewxapp/savePicsInfo",data:{uniacid:this.$uniacid,suid:t.getStorageSync("suid"),pid:this.pid,pic_data:JSON.stringify(e)},success:function(i){if(0!=i.data.data.error)return t.showModal({title:"提示",content:i.data.data.msg,showCancel:!1,success:function(t){}}),!1;t.showModal({title:"提示",content:"保存成功",showCancel:!1,success:function(i){i.confirm&&t.reLaunch({url:"/pagesBackStage/content_manage/content_manage?type=2"})}})}}))):(this.errorMsg("请选择组图栏目"),!1)):(this.errorMsg("请上传缩略图"),!1)):(this.errorMsg("请选择组图栏目"),!1)):(this.errorMsg("组图标题不能为空"),!1)}}};i.default=a}).call(this,e("5486")["default"])}},[["67ff","common/runtime","common/vendor"]]]);