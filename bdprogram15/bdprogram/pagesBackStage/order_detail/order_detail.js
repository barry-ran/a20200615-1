(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesBackStage/order_detail/order_detail"],{"03a8":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r("88e4");var a={data:function(){return{$imgurl:this.$imgurl,order_id:"",order_idid:"",order_item_id:"",freight_type:"",orderdetails:"",orderadmin:"",orderstore:"",changePrice:"",changeMsg:"",changePBox:0,pay_money:"",is_change_price:"",change_price:"",fhuoBox:0,kuaidiChoose:["商家配送","顺丰速运","韵达","天天","申通","圆通","中通","国通","百世汇通","EMS","邮政","广东邮政","FEDEX联邦(国内件)","宅急送","安捷快递","大田物流","百福东方","德邦","D速物流","COE东方快递","飞康达物流","共速达","恒路物流","华夏龙物流","佳怡物流","京广速递","急先达","加运美","晋越快递","全日通快递","全晨快递","门对门快递","民航快递","美快","龙邦快递","联昊通速递","立即送","全一快递","如风达","速尔快递","盛丰物流","赛澳递","天地华宇","TNT快递","UPS","万家物流","信丰物流","亚风快递","优速","远成物流","运通快递","源安达快递","中铁快运","中邮快递","安能物流","微特派","九曳供应链","晟邦物流","东骏快捷","万象","芝麻开门","南昌湘达物流","长吉物流","济南泰山志通物流","晋蒙（汇通）物流"],choose_express:"",choose_express_l:"",express_no:"",tuiBox:0,refound_num:"",tuiNum:"",refound_price:"",tuiMoney:"",total_can_tui_money:"",refound_msg:"",formBox:0}},onLoad:function(e){var t=this,r=0;e.order_id&&(r=e.order_id),t.order_id=r,t.order_idid=r,t.getorderDetail()},onPullDownRefresh:function(){this.getorderDetail(),e.stopPullDownRefresh()},methods:{getorderDetail:function(){var t=this;e.request({url:this.$host+"/api/Managewxapp/orderDetail",data:{uniacid:this.$uniacid,order_id:t.order_id},success:function(e){t.orderdetails=e.data.data,t.orderadmin=e.data.data.address_info,t.orderstore=e.data.data.self_taking_info,t.is_change_price=e.data.data.is_change_price,t.total_can_tui_money=e.data.data.total_can_tui_money},fail:function(e){console.log(e)}})},orderSale:function(t){var r=t.currentTarget.dataset.order_service_id;e.navigateTo({url:"../order_aftersale/order_aftersale?order_service_id="+r})},copy:function(t){var r=t.currentTarget.dataset.text;console.log(r),e.setClipboardData({data:r,success:function(t){e.getClipboardData({success:function(e){}}),e.showToast({title:"复制成功",duration:2e3})}})},showWlInfo:function(t){var r=t.currentTarget.dataset.kuaidi,a=t.currentTarget.dataset.kuaidihao,o=t.currentTarget.dataset.order_id;e.request({url:this.$host+"/api/Managewxapp/orders_make",data:{uniacid:this.$uniacid,order_id:o,type:6},success:function(t){e.navigateTo({url:"../../pagesOther/logistics_state/logistics_state?kuaidi="+r+"&kuaidihao="+a+"&order_id="+o})}})},getTel:function(t){var r=t.currentTarget.dataset.tel;e.makePhoneCall({phoneNumber:r})},cancelOrder:function(t){var r=this,a=this,o=t.currentTarget.dataset.order_id;e.showModal({title:"提示",content:"是否确定取消该订单？",success:function(t){1==t.confirm?e.request({url:r.$host+"/api/Managewxapp/orders_make",data:{uniacid:r.$uniacid,order_id:o,type:3},success:function(t){0==t.data.data.err?a.getorderDetail():1==t.data.data.err&&e.showModal({title:"提示",content:t.data.data.errmsg,showCancel:!1,success:function(){}})}}):1==t.cancel&&console.log("取消")}})},sureHx:function(t){var r=this,a=this,o=t.currentTarget.dataset.order_id;e.showModal({title:"提示",content:"是否确定核销该订单？",success:function(t){1==t.confirm?e.request({url:r.$host+"/api/Managewxapp/orders_make",data:{uniacid:r.$uniacid,order_id:o,type:5},success:function(t){0==t.data.data.err?a.getorderDetail():1==t.data.data.err&&e.showModal({title:"提示",content:t.data.data.errmsg,showCancel:!1,success:function(){}})}}):1==t.cancel&&console.log("取消")}})},changeMoney:function(e){var t=this;t.changePBox=1},closePBox:function(){var e=this;e.changePBox=0},moneyChange_ipt:function(e){var t=this;t.changePrice=e.detail.value},changeTips_ipt:function(e){var t=this;t.changeMsg=e.detail.value},sureChangeP:function(){var t=this;t.changePrice?e.request({url:this.$host+"/api/Managewxapp/orders_make",data:{uniacid:this.$uniacid,order_id:t.order_id,type:1,change_price:t.changePrice,change_msg:t.changeMsg},success:function(r){0==r.data.data.err?(t.changePBox=0,e.showToast({title:"改价成功",icon:"success",duration:2e3}),t.getorderDetail()):1==r.data.data.err&&e.showModal({title:"提示",content:r.data.data.errmsg,showCancel:!1,success:function(){}})}}):e.showModal({title:"提示",content:"请输入改价金额",showCancel:!1})},fhOrderItem:function(e){var t=this;t.fhuoBox=1,t.freight_type=1,t.order_id=e.currentTarget.dataset.item_id},fhOrder:function(e){var t=this;t.fhuoBox=1,t.freight_type=2,t.order_id=e.currentTarget.dataset.order_id},closefhBox:function(){var e=this;e.fhuoBox=0,e.choose_express="",e.freight_type=""},bindPickerChange:function(e){var t=this,r=t.kuaidiChoose;t.choose_express=e.detail.value,t.choose_express_l=r[e.detail.value],"商家配送"==t.choose_express_l&&(t.choose_express_l=-1)},kuaidiNum_ipt:function(e){var t=this;t.express_no=e.detail.value},sureSendGoods:function(){var t=this;-1==t.choose_express_l||-1!=t.choose_express_l&&t.express_no?e.request({url:this.$host+"/api/Managewxapp/orders_make",data:{uniacid:this.$uniacid,type:2,freight_type:t.freight_type,order_id:t.order_id,express:t.choose_express_l,express_no:t.express_no},success:function(r){0==r.data.data.err?(t.fhuoBox=0,t.choose_express="",e.showToast({title:"发货成功",icon:"success",duration:2e3}),2==t.freight_type?t.getorderDetail():(t.order_id=t.order_idid,t.getorderDetail())):1==r.data.data.err&&e.showModal({title:"提示",content:r.data.data.errmsg,showCancel:!1,success:function(){}})}}):e.showModal({title:"提示",content:"请输入快递单号",showCancel:!1})},tuiOrderItem:function(e){var t=this;t.tuiBox=1,t.freight_type=1,t.order_id=e.currentTarget.dataset.item_id,t.tuiNum=e.currentTarget.dataset.num,t.tuiMoney=(e.currentTarget.dataset.pro_can_refound_price*t.tuiNum).toFixed(2)},tuiOrder:function(e){var t=this;t.tuiBox=1,t.freight_type=2,t.order_id=e.currentTarget.dataset.order_id},closetuiBox:function(){var e=this;e.tuiBox=0,e.freight_type=""},tuiNum_ipt:function(t){var r=this;r.refound_num=t.detail.value,""!=r.refound_num&&r.refound_num<1&&e.showModal({title:"提示",content:"退款数量不可少于1件",showCancel:!1,success:function(){}})},tuiMoney_ipt:function(e){var t=this;t.refound_price=e.detail.value},tuiTips_ipt:function(e){var t=this;t.refound_msg=e.detail.value},sureRefound:function(){var t=this;if(1==t.freight_type){if(""==t.refound_num)t.refound_num=t.tuiNum;else if(t.refound_num>t.tuiNum)return e.showModal({title:"提示",content:"最大退款数量为"+t.tuiNum,showCancel:!1,success:function(){}}),!1;if(""==t.refound_price)t.refound_price=t.tuiMoney,console.log(t.refound_price);else if(t.refound_price>t.tuiMoney)return e.showModal({title:"提示",content:"最大退款金额为"+t.tuiMoney,showCancel:!1,success:function(){}}),!1}else 2==t.freight_type&&(t.refound_price=t.total_can_tui_money);e.request({url:this.$host+"/api/Managewxapp/orders_make",data:{uniacid:this.$uniacid,type:4,freight_type:t.freight_type,order_id:t.order_id,refound_num:t.refound_num,refound_price:t.refound_price,refound_msg:t.refound_msg},success:function(r){0==r.data.data.err?(t.tuiBox=0,e.showToast({title:"退款成功",icon:"success",duration:2e3}),2==t.freight_type?t.getorderDetail():(t.order_id=t.order_idid,t.getorderDetail())):1==r.data.data.err&&e.showModal({title:"提示",content:r.data.data.errmsg,showCancel:!1,success:function(){}})}})},openFormBox:function(){var e=this;e.formBox=1},closeformBox:function(){var e=this;e.formBox=0}}};t.default=a}).call(this,r("5486")["default"])},"5c58":function(e,t,r){"use strict";r.r(t);var a=r("d64b"),o=r("ce14");for(var i in o)"default"!==i&&function(e){r.d(t,e,function(){return o[e]})}(i);r("9dc1");var n,s=r("f0c5"),d=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],n);t["default"]=d.exports},"63d3":function(e,t,r){"use strict";(function(e){r("d28f");a(r("66fd"));var t=a(r("5c58"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("5486")["createPage"])},"9dc1":function(e,t,r){"use strict";var a=r("c55e"),o=r.n(a);o.a},c55e:function(e,t,r){},ce14:function(e,t,r){"use strict";r.r(t);var a=r("03a8"),o=r.n(a);for(var i in a)"default"!==i&&function(e){r.d(t,e,function(){return a[e]})}(i);t["default"]=o.a},d64b:function(e,t,r){"use strict";var a,o=function(){var e=this,t=e.$createElement;e._self._c},i=[];r.d(t,"b",function(){return o}),r.d(t,"c",function(){return i}),r.d(t,"a",function(){return a})}},[["63d3","common/runtime","common/vendor"]]]);