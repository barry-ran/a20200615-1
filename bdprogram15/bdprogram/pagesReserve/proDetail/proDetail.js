(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesReserve/proDetail/proDetail"],{"0629":function(t,e,a){},"193e":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("37b1"));function n(t){return t&&t.__esModule?t:{default:t}}var o=a("88e4"),s={data:function(){return{$imgurl:this.$imgurl,baseinfo:"",picList:[],datas:{labels:[]},nowcon:"con",sc:0,is_comment:0,comm:0,commSelf:0,comments:[],commShow:0,shareShow:0,shareScore:0,shareNotice:0,fxsid:0,serverBtn:0,shareHome:0,interval:5e3,duration:1e3,indicatorDots:!0,tableis:0,bottom_edit:0,current:0,imgheights:[],NowSelectStr:"",vip_config:"",product_txt:"",appoint_num:0,appoint_price:0,appoint_date:"",pic_video:"",isplay:!1,currentSwiper:0,minHeight:220,heighthave:0,autoplay:!0,shareimg:0,share:0,shareimg_url:"",system_w:0,system_h:0,img_w:0,img_h:0,dlength:0,needAuth:!1,needBind:!1}},onShareAppMessage:function(){var e=this,a=t.getStorageSync("suid"),i=e.id,n="";return n="/pagesReserve/proDetail/proDetail?id="+i+"&userid="+a+"&fxsid="+a,{title:e.title,path:n,imageUrl:""}},onPullDownRefresh:function(){var e=this,a=e.id;this.getShowPic(a),t.stopPullDownRefresh()},onLoad:function(e){var a=this,i=this,n=e.id;if(i.id=n,"1"==e.bottom_edit){var s=e.NowSelectStr,r=e.appoint_date,d=s?s.split(",").length:0;i.NowSelectStr=s,i.appoint_date=r,i.appoint_num=d,i.bottom_edit=parseInt(e.bottom_edit)}var c=0;e.fxsid&&(c=e.fxsid,i.fxsid=e.fxsid,i.shareHome=1,t.setStorageSync("fxsid",c)),e.userid&&(i.userid=e.userid),this._baseMin(this);var u=t.getStorageSync("suid");n=i.id;u?o.bdLogin(c,function(){a.getShowPic(n),a._getSuperUserInfo(a)}):this.getShowPic(n);var l=t.getStorageSync("systemInfo");this.img_w=parseInt((.65*l.windowWidth).toFixed(0)),this.img_h=parseInt((1.875*this.img_w).toFixed(0)),this.system_w=parseInt(l.windowWidth),this.system_h=parseInt(l.windowHeight)},methods:{checkvip:function(e){var a=this,i=t.getStorageSync("suid");t.request({url:a.$baseurl+"doPageCheckvip",data:{uniacid:a.$uniacid,kwd:"reserve",suid:i,id:a.id,gz:1},success:function(e){if(!1===e.data.data)return a.needvip=!0,t.showModal({title:"进入失败",content:"使用本功能需先开通vip!",showCancel:!1,success:function(e){e.confirm&&t.redirectTo({url:"/pages/register/register"})}}),!1;e.data.data.needgrade>0&&(a.needvip=!0,e.data.data.grade>0?e.data.data.grade<e.data.data.needgrade&&t.showModal({title:"进入失败",content:"使用本功能需成为"+e.data.data.vipname+"("+e.data.data.needgrade+"级)以上等级会员,请先升级!",showCancel:!1,success:function(e){e.confirm&&t.redirectTo({url:"/pages/open1/open1"})}}):e.data.data.grade<e.data.data.needgrade&&t.showModal({title:"进入失败",content:"使用本功能需成为"+e.data.data.vipname+"("+e.data.data.needgrade+"级)以上等级会员,请先开通会员后再升级会员等级!",showCancel:!1,success:function(e){e.confirm&&t.redirectTo({url:"/pages/register/register"})}}))},fail:function(t){}})},goevaluate:function(){var e=this,a=e.id;t.navigateTo({url:"/pagesOther/evaluate_list/evaluate_list?id="+a+"&protype=reserve"})},bindchange:function(t){this.current=t.detail.current},follow:function(e){var a=this,i=e.currentTarget.dataset.id;t.request({url:this.$baseurl+"doPagecommentFollow",data:{id:i,uniacid:a.$uniacid},success:function(t){}}),t.showToast({title:"点赞成功",icon:"success",duration:1e3})},pinglun:function(t){var e=this;e.pinglun_t=t.detail.value},pinglun_sub:function(){var e=this,a=e.pinglun_t,i=e.id;t.getStorageSync("openid");if(""==a||void 0==a)return t.showModal({content:"评论不能为空"}),!1;t.request({url:this.$baseurl+"doPagecomment",cachetime:0,data:{pinglun_t:a,id:i,suid:t.getStorageSync("suid"),uniacid:e.$uniacid},success:function(e){1==e.data.data.result&&(t.showToast({title:"评价提交成功",icon:"success",duration:2e3}),setTimeout(function(){t.redirectTo({url:"/pagesReserve/proDetail/proDetail?id="+i})},2e3))}})},tabChange:function(t){var e=t.currentTarget.dataset.id;this.nowcon=e},getShowPic:function(e){var a=this,n=t.getStorageSync("suid");t.request({url:this.$baseurl+"doPageshowPro",data:{id:e,suid:n,types:"reserve",uniacid:a.$uniacid},cachetime:"30",success:function(n){a.id=e,a.picList=n.data.data.text,a.dlength=a.picList.length,a.title=n.data.data.title,a.datas=n.data.data,a.product_txt=n.data.data.product_txt,a.product_txt&&(a.product_txt=a.product_txt.replace(/\<img/gi,'<img style="width:100%;height:auto;display:block" '),a.product_txt=(0,i.default)(a.product_txt)),a.my_num=n.data.data.my_num,a.xg_num=n.data.data.pro_xz,a.sc=n.data.data.collectcount,a.commSelf=n.data.data.comment,a.tableis=n.data.data.tableis,a.pic_video=n.data.data.video,a.appoint_price=1==a.bottom_edit?a.appoint_num*n.data.data.price:0,a.vip_config=n.data.data.vip_config,t.setNavigationBarTitle({title:a.title}),t.setStorageSync("isShowLoading",!1),t.hideNavigationBarLoading(),t.stopPullDownRefresh()}}),setTimeout(function(){if("1"==a.comm&&"0"!=a.commSelf||"1"==a.commSelf){var i=a.comms;this.commShow=1,t.request({url:this.$baseurl+"doPagegetComment",cachetime:"0",data:{id:e,comms:i,uniacid:a.$uniacid,source:t.getStorageSync("source")},success:function(t){""!=t.data&&(a.comments=t.data.data,a.is_comment=1,a.commShow=1)}})}},500),a._givepscore(a,e,"showPro_lv",a.userid,n)},collect:function(e){var a=this,i=e.currentTarget.dataset.name,n=t.getStorageSync("suid");if(!this.getSuid())return!1;var o=a.sc;0==o?(t.showLoading({title:"收藏中"}),t.request({url:this.$baseurl+"doPageCollect",data:{suid:n,types:"reserve",id:i,uniacid:a.$uniacid},header:{"content-type":"application/json"},success:function(e){var i=e.data.data;a.sc="收藏成功"==i?1:0,t.showToast({title:i,icon:"succes",duration:1e3,mask:!0})}})):(t.showLoading({title:"取消收藏中"}),t.request({url:this.$baseurl+"doPageCollect",data:{suid:t.getStorageSync("suid"),types:"reserve",id:i,uniacid:a.$uniacid},header:{"content-type":"application/json"},success:function(e){var i=e.data.data;a.sc="取消收藏成功"==i?0:1,t.showToast({title:i,icon:"succes",duration:1e3,mask:!0})}})),setTimeout(function(){t.hideLoading()},1e3)},makePhoneCall:function(e){var a=this,i=a.baseinfo.tel;t.makePhoneCall({phoneNumber:i})},makePhoneCallB:function(e){var a=this,i=a.baseinfo.tel_b;t.makePhoneCall({phoneNumber:i})},openMap:function(e){var a=this;t.openLocation({latitude:parseFloat(a.baseinfo.latitude),longitude:parseFloat(a.baseinfo.longitude),name:a.baseinfo.name,address:a.baseinfo.address,scale:22})},topay:function(){var e=this;0==e.appoint_num?t.showModal({title:"提示",content:"您尚未选择商品",showCancel:!1}):t.redirectTo({url:"/pagesReserve/proBuy/proBuy?id="+e.id+"&NowSelectStr="+e.NowSelectStr+"&type=table&appoint_date="+e.appoint_date})},toyuyue:function(e){var a=e.currentTarget.dataset.id;t.getStorageSync("suid");if(!this.getSuid())return!1;t.redirectTo({url:"/pagesReserve/proBuy/proBuy?id="+a+"&testKeys=1"})},toyuyueDG:function(e){t.getStorageSync("suid");if(!this.getSuid())return!1;var a=e.currentTarget.dataset.id,i=e.currentTarget.dataset.testprice,n=e.currentTarget.dataset.testkey;t.redirectTo({url:"/pagesReserve/proBuy/proBuy?id="+a+"&testPrice="+i+"&testKey="+n})},xuanzuo:function(e){var a=this;t.getStorageSync("suid");if(!this.getSuid())return!1;var i=a.vip_config,n=e.currentTarget.dataset.id,o=e.currentTarget.dataset.tableid,s=e.currentTarget.dataset.startdate,r=e.currentTarget.dataset.afterdays;if(1==i)return t.showModal({title:"提醒",content:"该商品必须开通会员卡购买！",showCancel:!1,success:function(){t.navigateTo({url:"/pages/register/register?type=yuyue"})}}),!1;t.redirectTo({url:"/pagesReserve/appointPage/appointPage?tableid="+o+"&id="+n+"&startdate="+s+"&afterdays="+r})},swiperLoad:function(e){var a=this;t.getSystemInfo({success:function(t){var i=e.detail.width,n=e.detail.height,o=i/n,s=t.windowWidth/o;a.heighthave||(a.minHeight=s,a.heighthave=1)}})},swiperChange:function(t){this.autoplay=!0,this.currentSwiper=t.detail.current,this.isplay=!1,this.autoplay=this.autoplay},playvideo:function(){var t=this;t.autoplay=!1,t.isplay=!0,t.autoplay=t.autoplay},endvideo:function(){var t=this;t.autoplay=!0,t.isplay=!1,t.autoplay=t.autoplay},open_share:function(){this.share=1},share_close:function(){this.share=0,this.shareimg=0},h5ShareAppMessage:function(){var e=this,a=t.getStorageSync("suid");t.showModal({title:"长按复制链接后分享",content:this.$host+"/h5/index.html?id="+this.$uniacid+"#/pagesReserve/proDetail/proDetail?id="+this.id+"&fxsid="+a+"&userid="+a,showCancel:!1,success:function(t){e.share=0}})},getShareImg:function(){t.showToast({title:"暂不支持生成分享海报",icon:"none"})},closeShare:function(){this.shareimg=0},saveImg:function(){var e=this;t.getImageInfo({src:e.shareimg_url,success:function(a){t.saveImageToPhotosAlbum({filePath:a.path,success:function(){t.showToast({title:"保存成功！",icon:"none"}),e.shareimg=0,e.share=0}})}})},aliSaveImg:function(){var e=this;t.getImageInfo({src:e.shareimg_url,success:function(t){my.saveImage({url:t.path,showActionSheet:!0,success:function(){my.alert({title:"保存成功"}),e.shareimg=0,e.share=0}})}})},cell:function(){this.needAuth=!1},closeAuth:function(){this.needAuth=!1,this.needBind=!0},closeBind:function(){this.needBind=!1},getSuid:function(){var e=t.getStorageSync("suid");if(e)return!0;var a="";return a=t.getStorageSync("baidu_userinfo"),a?this.needBind=!0:this.needAuth=!0,!1}}};e.default=s}).call(this,a("5486")["default"])},"4b5c":function(t,e,a){"use strict";var i={auth:()=>Promise.all([a.e("common/vendor"),a.e("components/auth/auth")]).then(a.bind(null,"a32a")),bindPhone:()=>Promise.all([a.e("common/vendor"),a.e("components/bindPhone/bindPhone")]).then(a.bind(null,"9bb9"))},n=function(){var t=this,e=t.$createElement;t._self._c},o=[];a.d(e,"b",function(){return n}),a.d(e,"c",function(){return o}),a.d(e,"a",function(){return i})},"4dc8":function(t,e,a){"use strict";(function(t){a("d28f");i(a("66fd"));var e=i(a("e428"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("5486")["createPage"])},"9dc6":function(t,e,a){"use strict";var i=a("0629"),n=a.n(i);n.a},c920:function(t,e,a){"use strict";a.r(e);var i=a("193e"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},e428:function(t,e,a){"use strict";a.r(e);var i=a("4b5c"),n=a("c920");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("9dc6");var s,r=a("f0c5"),d=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);e["default"]=d.exports}},[["4dc8","common/runtime","common/vendor"]]]);