(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesOther/evaluate_pro/evaluate_pro"],{"38db":function(t,a,e){"use strict";var s,n=function(){var t=this,a=t.$createElement;t._self._c},i=[];e.d(a,"b",function(){return n}),e.d(a,"c",function(){return i}),e.d(a,"a",function(){return s})},"4bb7":function(t,a,e){},"666f":function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var s=e("88e4"),n={data:function(){return{$imgurl:this.$imgurl,$host:this.$host,assess:1,assess_duo:[],assessList:[{id:1,icon:"icon-x-haoping",name:"好评"},{id:2,icon:"icon-x-zhongping",name:"中评"},{id:3,icon:"icon-x-chaping",name:"差评"}],anonymous:0,order_id:"",count_sy:5,imgs:[],nowcount:0,evaluatecon:"",type:"",thumb:"",duoPro:"",evaluate_duo:[],imgs_duo:[],anonymous_duo:[],lists:"",lists_child:"",evaluate_data:[]}},onLoad:function(a){var e=this,n=0;a.fxsid&&(e.fxsid=a.fxsid);var i=1;a.assess&&(i=a.assess,e.assess=a.assess);var o=t.getStorageSync("suid");o&&(e.suid=o),a.order_id&&(e.order_id=a.order_id),1==i?t.setNavigationBarTitle({title:"评价"}):t.setNavigationBarTitle({title:"追评"}),this._baseMin(this),e.proinfo(),s.bdLogin(n,function(){})},onPullDownRefresh:function(){var a=this;a.proinfo(),t.stopPullDownRefresh()},methods:{proinfo:function(){var a=this;t.request({url:a.$host+"/api/MainWxapp/evaluationList",data:{uniacid:a.$uniacid,suid:t.getStorageSync("suid"),order_id:a.order_id},success:function(t){a.lists=t.data.data.order,a.lists_child=t.data.data.order.order_items,a.assess=t.data.data.order.assess;for(var e=0;e<a.lists_child.length;e++){var s={id:1};a.assess_duo.push(s);var n={evaluatecon:"",nowcount:0};a.evaluate_duo.push(n);var i=[];a.imgs_duo.push(i);var o={anonymous:0};a.anonymous_duo.push(o)}}})},chooseAssess_duo:function(t){var a=t.currentTarget.dataset.id,e=t.currentTarget.dataset.dkey;this.assess_duo[e]["id"]=a},chooseAnonymous_duo:function(t){var a=t.currentTarget.dataset.dkey,e=this.anonymous_duo[a].anonymous;e=0==e?1:0,this.anonymous_duo[a].anonymous=e},evaluate_duo_bt:function(t){var a=this,e=t.detail.value,s=t.detail.cursor,n=t.currentTarget.dataset.dkey;a.evaluate_duo[n]["evaluatecon"]=e,a.evaluate_duo[n]["nowcount"]=s},chooseimg_duo:function(a){var e=this,s=e.count_sy,n=a.currentTarget.dataset.dkey,i=e.imgs_duo[n];s-=i.length;var o=e.zhixin;t.chooseImage({count:s,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(a){o=!0,e.zhixin=o,t.showLoading({title:"图片上传中"});var s=a.tempFilePaths,u=0,d=s.length,r=e.$baseurl+"wxupimg",c=function a(){t.uploadFile({url:r,formData:{uniacid:e.$uniacid},filePath:s[u],name:"file",success:function(s){var r=s.data;i.push(r),e.imgs_duo[n]=i,u++,u<d?a():(o=!1,e.zhixin=o,t.hideLoading())}})};c()}})},delimg_duo:function(t){var a=this,e=t.currentTarget.dataset.dkey,s=t.currentTarget.dataset.index;a.imgs_duo[e].splice(s,1)},delimg:function(t){var a=this,e=t.currentTarget.dataset.index,s=a.imgs;s.splice(e,1),a.imgs=s},submit_duo:function(){for(var a=this,e=[],s=0;s<a.lists_child.length;s++){var n=a.lists_child[s].order_item_id,i=a.assess_duo[s],o=a.evaluate_duo[s].evaluatecon;""==o&&(o="该用户没有填写评论");var u=a.imgs_duo[s],d=a.anonymous_duo[s];e.push({order_item_id:n,imgs:u,anonymous:d.anonymous,content:o,level:i.id})}t.request({url:a.$host+"/api/MainWxapp/orderEvaluationSubmint",data:{uniacid:a.$uniacid,suid:t.getStorageSync("suid"),assess:a.assess,order_id:a.order_id,evaluate_data:JSON.stringify(e)},success:function(a){0==a.data.data.error?t.showModal({title:"提示",content:"评价提交成功",showCancel:!1,success:function(a){t.navigateBack({delta:1})}}):t.showModal({title:"提示",content:a.data.data.msg+",评价提交失败"})},fail:function(t){}})}}};a.default=n}).call(this,e("5486")["default"])},"80d9":function(t,a,e){"use strict";(function(t){e("d28f");s(e("66fd"));var a=s(e("f699"));function s(t){return t&&t.__esModule?t:{default:t}}t(a.default)}).call(this,e("5486")["createPage"])},bd49:function(t,a,e){"use strict";var s=e("4bb7"),n=e.n(s);n.a},ca9a:function(t,a,e){"use strict";e.r(a);var s=e("666f"),n=e.n(s);for(var i in s)"default"!==i&&function(t){e.d(a,t,function(){return s[t]})}(i);a["default"]=n.a},f699:function(t,a,e){"use strict";e.r(a);var s=e("38db"),n=e("ca9a");for(var i in n)"default"!==i&&function(t){e.d(a,t,function(){return n[t]})}(i);e("bd49");var o,u=e("f0c5"),d=Object(u["a"])(n["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],o);a["default"]=d.exports}},[["80d9","common/runtime","common/vendor"]]]);