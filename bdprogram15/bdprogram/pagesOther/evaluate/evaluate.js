(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesOther/evaluate/evaluate"],{"0386":function(t,a,e){},1052:function(t,a,e){"use strict";e.r(a);var n=e("4c36"),o=e.n(n);for(var i in n)"default"!==i&&function(t){e.d(a,t,function(){return n[t]})}(i);a["default"]=o.a},3354:function(t,a,e){"use strict";(function(t){e("d28f");n(e("66fd"));var a=n(e("69c7"));function n(t){return t&&t.__esModule?t:{default:t}}t(a.default)}).call(this,e("5486")["createPage"])},"4c36":function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=e("88e4"),o={data:function(){return{$imgurl:this.$imgurl,assess:1,assess_duo:[],assessList:[{id:1,icon:"icon-c-haoping",name:"好评"},{id:2,icon:"icon-c-zhongchaping",name:"中评"},{id:3,icon:"icon-c-zhongchaping",name:"差评"}],anonymous:0,order_id:"",count_sy:5,imgs:[],nowcount:0,evaluatecon:"",type:"",add:0,thumb:"",duoPro:"",count:1,evaluate_duo:[],imgs_duo:[],anonymous_duo:[],pid:0}},onLoad:function(a){var e=this,o=0;a.fxsid&&(e.fxsid=a.fxsid),a.type&&(e.type=a.type);var i=0;a.add&&(i=a.add,e.add=a.add),a.id&&(e.pid=a.id),a.order_id&&(e.order_id=a.order_id),0==i?t.setNavigationBarTitle({title:"产品评价"}):t.setNavigationBarTitle({title:"产品追评"}),this._baseMin(this),e.proinfo(),n.bdLogin(o,function(){})},onPullDownRefresh:function(){var a=this;a.proinfo(),t.stopPullDownRefresh()},methods:{proinfo:function(){var a=this;t.request({url:a.$baseurl+"doPageassesspro",data:{uniacid:a.$uniacid,order_id:a.order_id,type:a.type,pid:a.pid},success:function(t){a.thumb=t.data.data.thumb,a.pid=t.data.data.pid,a.duoPro=t.data.data,a.count=t.data.count;for(var e=0;e<a.duoPro.length;e++){var n={id:1};console.log(n),a.assess_duo.push(n);var o={evaluatecon:"",nowcount:0};a.evaluate_duo.push(o);var i=[];a.imgs_duo.push(i);var s={anonymous:0};a.anonymous_duo.push(s)}}})},chooseAssess:function(t){var a=t.currentTarget.dataset.id;this.assess=a},chooseAssess_duo:function(t){var a=t.currentTarget.dataset.id,e=t.currentTarget.dataset.dkey;this.assess_duo[e]["id"]=a,console.log(this.assess_duo)},chooseAnonymous:function(t){var a=this.anonymous;a=0==a?1:0,this.anonymous=a},chooseAnonymous_duo:function(t){var a=t.currentTarget.dataset.dkey,e=this.anonymous_duo[a].anonymous;e=0==e?1:0,this.anonymous_duo[a].anonymous=e},chooseimg:function(){var a=this,e=a.count_sy,n=a.imgs;e-=n.length;var o=a.zhixin;t.chooseImage({count:e,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){o=!0,a.zhixin=o,t.showLoading({title:"图片上传中"});var i=e.tempFilePaths,s=0,u=i.length,d=a.$baseurl+"wxupimg",c=function e(){t.uploadFile({url:d,formData:{uniacid:a.$uniacid},filePath:i[s],name:"file",success:function(i){var d=i.data;n.push(d),a.imgs=n,s++,s<u?e():(o=!1,a.zhixin=o,t.hideLoading())}})};c()}})},chooseimg_duo:function(a){var e=this,n=e.count_sy,o=a.currentTarget.dataset.dkey,i=e.imgs_duo[o];n-=i.length;var s=e.zhixin;t.chooseImage({count:n,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(a){s=!0,e.zhixin=s,t.showLoading({title:"图片上传中"});var n=a.tempFilePaths,u=0,d=n.length,c=e.$baseurl+"wxupimg",r=function a(){t.uploadFile({url:c,formData:{uniacid:e.$uniacid},filePath:n[u],name:"file",success:function(n){var c=n.data;i.push(c),e.imgs_duo[o]=i,u++,u<d?a():(s=!1,e.zhixin=s,t.hideLoading())}})};r()}})},delimg_duo:function(t){var a=this,e=t.currentTarget.dataset.dkey,n=t.currentTarget.dataset.index;a.imgs_duo[e].splice(n,1)},delimg:function(t){var a=this,e=t.currentTarget.dataset.index,n=a.imgs;n.splice(e,1),a.imgs=n},evaluate:function(t){var a=this,e=t.detail.value,n=t.detail.cursor;a.evaluatecon=e,a.nowcount=n},evaluate_duo_bt:function(t){var a=this,e=t.detail.value,n=t.detail.cursor,o=t.currentTarget.dataset.dkey;a.evaluate_duo[o]["evaluatecon"]=e,a.evaluate_duo[o]["nowcount"]=n},submit:function(){var a=this,e=a.assess,n=a.evaluatecon,o=a.imgs,i=a.anonymous;if(""==n)return t.showModal({title:"提示",content:"评价不能为空",showCancel:!1}),!1;t.request({url:a.$baseurl+"doPageEvaluateSub",cachetime:"30",data:{uniacid:a.$uniacid,assess:e,evaluatecon:n,imgs:JSON.stringify(o),anonymous:i,suid:t.getStorageSync("suid"),order_id:a.order_id,pid:a.pid,type:a.type,add:a.add},success:function(a){1==a.data?t.showModal({title:"提示",content:"评价提交成功",showCancel:!1,success:function(a){t.navigateBack({delta:1})}}):t.showModal({title:"提示",content:"评价提交失败"})},fail:function(t){}})},submit_duo:function(){for(var a=this,e=a.assess_duo,n=a.evaluate_duo,o=a.imgs_duo,i=a.anonymous_duo,s=0;s<n.length;s++){if(""==n[s].evaluatecon)return t.showModal({title:"提示",content:"评价不能为空",showCancel:!1}),!1;n[s].evaluatecon}t.request({url:a.$baseurl+"doPageDuoEvaluateSub",cachetime:"30",data:{uniacid:a.$uniacid,assess:JSON.stringify(e),evaluatecon:JSON.stringify(n),imgs:JSON.stringify(o),anonymous:JSON.stringify(i),suid:t.getStorageSync("suid"),order_id:a.order_id,duoPro:JSON.stringify(a.duoPro),add:a.add},success:function(a){a.data?t.showModal({title:"提示",content:"评价提交成功",showCancel:!1,success:function(a){t.navigateBack({delta:1})}}):t.showModal({title:"提示",content:"评价提交失败"})},fail:function(t){}})}}};a.default=o}).call(this,e("5486")["default"])},"69c7":function(t,a,e){"use strict";e.r(a);var n=e("bd9e"),o=e("1052");for(var i in o)"default"!==i&&function(t){e.d(a,t,function(){return o[t]})}(i);e("87a8");var s,u=e("f0c5"),d=Object(u["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);a["default"]=d.exports},"87a8":function(t,a,e){"use strict";var n=e("0386"),o=e.n(n);o.a},bd9e:function(t,a,e){"use strict";var n,o=function(){var t=this,a=t.$createElement;t._self._c},i=[];e.d(a,"b",function(){return o}),e.d(a,"c",function(){return i}),e.d(a,"a",function(){return n})}},[["3354","common/runtime","common/vendor"]]]);