(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesPluginSupply/set_top/set_top"],{"0d87":function(t,e,i){"use strict";var n={auth:()=>Promise.all([i.e("common/vendor"),i.e("components/auth/auth")]).then(i.bind(null,"a32a")),bindPhone:()=>Promise.all([i.e("common/vendor"),i.e("components/bindPhone/bindPhone")]).then(i.bind(null,"9bb9"))},a=function(){var t=this,e=t.$createElement;t._self._c},s=[];i.d(e,"b",function(){return a}),i.d(e,"c",function(){return s}),i.d(e,"a",function(){return n})},4301:function(t,e,i){"use strict";var n=i("d0b5"),a=i.n(n);a.a},"62b9":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("88e4"),a={data:function(){return{$imgurl:this.$imgurl,fid:0,rid:0,stick_money:0,stick_days:0,userMoney:0,returnpage:2,allmoney:0,baseinfo:"",needAuth:!1,needBind:!1,pay_type:1,show_pay_type:0,alipay:1,wxpay:1,money:0}},onLoad:function(t){var e=this,i=t.id;this.id=i,this._baseMin(this),this.fid=t.fid,this.rid=t.rid,this.returnpage=t.returnpage;var a=0;t.fxsid&&(a=t.fxsid),this.fxsid=a,n.bdLogin(a,function(){e.getSet(i)})},methods:{getSet:function(){var e=this;1==e.baseinfo.can_fs&&t.setNavigationBarTitle({title:"置顶"}),e.getForumSet()},getForumSet:function(){var e=this;t.request({url:e.$baseurl+"doPageSupplySet",data:{uniacid:e.$uniacid},success:function(t){e.stick_money=t.data.data.stick_money,e.getUserMoney()}})},getStickDays:function(t){var e=this,i=t.detail.value,n=e.stick_money*i;n=n.toFixed(2),e.stick_days=i,e.allmoney=n},getUserMoney:function(){var e=this;t.request({url:e.$baseurl+"doPageGetUserMoney",data:{uniacid:e.$uniacid,suid:t.getStorageSync("suid")},success:function(t){e.userMoney=t.data.data}})},formSubmit:function(e){var i=this,n=i.stick_days;if(0==n)return t.showModal({title:"提示",content:"请输入置顶天数",showCancel:!1}),!1;var a=i.stick_money,s=e.detail.formId,o=i.userMoney;a>0?t.request({url:i.$baseurl+"doPageSupplyOrder",data:{uniacid:i.$uniacid,release_money:0,stick_days:n,stick_money:a,suid:t.getStorageSync("suid"),formId:s},success:function(e){0!=e.data&&(i.orderid=e.data.orderid,1*o>=n*a?t.showModal({title:"请注意",content:"您的余额为"+o+"元，本次将扣除"+n*a+"元",success:function(t){t.confirm&&i.setStick(1)}}):(i.setStick(2),o>0?t.showModal({title:"请注意",content:"您将余额支付"+o+"元，百度支付"+(n*a-o)+"元",success:function(t){t.confirm&&i._baidupay(i,n*a-o,"supsettop",i.orderid,1)}}):t.showModal({title:"请注意",content:"您将百度支付"+n*a+"元",success:function(t){t.confirm&&i._baidupay(i,n*a,"supsettop",i.orderid,1)}})))},fail:function(t){}}):i.setStick(1)},setStick:function(e){var i=this;t.request({url:i.$baseurl+"doPageSupplySetStick",data:{uniacid:i.$uniacid,rid:i.rid,stick_money:i.stick_money,stick_days:i.stick_days,orderid:i.orderid,haspay:e,suid:t.getStorageSync("suid")},success:function(e){console.log(e),1==e.data.data?t.showModal({title:"提示",content:"置顶成功",showCancel:!1,success:function(e){t.redirectTo({url:"/pagesPluginSupply/supply/supply"})}}):2==e.data.data&&t.showModal({title:"提示",content:"置顶失败",showCancel:!1})}})},closeAuth:function(){this.needAuth=!1,this._checkBindPhone(this)},closeBind:function(){this.needBind=!1,this.getPic()},changealipay:function(){this.pay_type=1},showpay:function(){this.money=this.stick_days*this.stick_money-this.userMoney;var e=this;t.request({url:this.$baseurl+"doPageGetH5payshow",data:{uniacid:this.$uniacid,suid:t.getStorageSync("suid")},success:function(i){0==i.data.data.ali&&0==i.data.data.wx?t.showModal({title:"提示",content:"请联系管理员设置支付参数",showCancel:!1,success:function(t){return!1}}):(0==i.data.data.ali?(e.alipay=0,e.pay_type=2):(e.alipay=1,e.pay_type=1),0==i.data.data.wx?e.wxpay=0:e.wxpay=1,e.show_pay_type=1)}})},changewxpay:function(){this.pay_type=2},close_pay_type:function(){this.show_pay_type=0},h5topay:function(){var t=this.pay_type;1==t?this._alih5pay(this,this.money,6,this.orderid):2==t&&this._wxh5pay(this,this.money,"supsettop",this.orderid),this.show_pay_type=0}}};e.default=a}).call(this,i("5486")["default"])},7146:function(t,e,i){"use strict";i.r(e);var n=i("0d87"),a=i("ff6c");for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);i("4301");var o,u=i("f0c5"),c=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],o);e["default"]=c.exports},b2d7:function(t,e,i){"use strict";(function(t){i("d28f");n(i("66fd"));var e=n(i("7146"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("5486")["createPage"])},d0b5:function(t,e,i){},ff6c:function(t,e,i){"use strict";i.r(e);var n=i("62b9"),a=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);e["default"]=a.a}},[["b2d7","common/runtime","common/vendor"]]]);