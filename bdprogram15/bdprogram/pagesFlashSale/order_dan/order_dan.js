(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesFlashSale/order_dan/order_dan"],{"0730":function(a,e,t){"use strict";(function(a){t("d28f");i(t("66fd"));var e=i(t("0c86"));function i(a){return a&&a.__esModule?a:{default:a}}a(e.default)}).call(this,t("5486")["createPage"])},"0c86":function(a,e,t){"use strict";t.r(e);var i=t("5ca2"),n=t("24f8");for(var s in n)"default"!==s&&function(a){t.d(e,a,function(){return n[a]})}(s);t("a7b6");var d,o=t("f0c5"),r=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],d);e["default"]=r.exports},"24f8":function(a,e,t){"use strict";t.r(e);var i=t("6fb1"),n=t.n(i);for(var s in i)"default"!==s&&function(a){t.d(e,a,function(){return i[a]})}(s);e["default"]=n.a},"32d7":function(a,e,t){},"5ca2":function(a,e,t){"use strict";var i={auth:()=>Promise.all([t.e("common/vendor"),t.e("components/auth/auth")]).then(t.bind(null,"a32a")),bindPhone:()=>Promise.all([t.e("common/vendor"),t.e("components/bindPhone/bindPhone")]).then(t.bind(null,"9bb9")),datetime:()=>t.e("components/datetime/datetime").then(t.bind(null,"c598"))},n=function(){var a=this,e=a.$createElement;a._self._c},s=[];t.d(e,"b",function(){return n}),t.d(e,"c",function(){return s}),t.d(e,"a",function(){return i})},"6fb1":function(a,e,t){"use strict";(function(a,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t("88e4"),s=function(){return t.e("components/datetime/datetime").then(t.bind(null,"c598"))},d={data:function(){return{$imgurl:this.$imgurl,$host:this.$host,baseinfo:"",needAuth:!1,needBind:!1,nav:1,num:1,jifen_u:0,yunfei:0,yfjian:0,jqdjg:"请选择",yhqid:0,yhdq:0,dkmoney:0,dkscore:0,zf_type:null,zf_money:"",pagedata:{},imgcount_xz:0,pagedata_set:[],xuanz:0,lixuanz:-1,ttcxs:0,get_yf:0,baoyou:0,has_yf:1,kuaidi:"",fid:"",chooseNum:0,thumb:"",id:0,mymoney:0,showhx:0,isview:0,pd_val:[],again:0,pro_city:"",mj_order:"",yhq_order:"",score_order:"",score_money_order:0,yhq_money_order:0,yunfei_order:0,mj_money_order:0,m_address:[],m_address_l:0,beizhu_val:"",sw:!1,free_package:0,disabled:!1,gid:0,mraddress:"",title:"",dprice:"",hjjg:"",myscore:0,ischecked:!1,h5pay:0,dopay:"",pay_type:1,show_pay_type:0,alipay:1,wxpay:1,datas:"",myname:"",mymobile:"",myaddress:"",wxmobile:"",xx:[],formindex:-1,arrs:[],isover:0,formdescs:"",newSessionKey:"",showModalStatus:!1,couponlist:"",again_nav:1,animationData:"",stores:"",current:0,storeall:[],storeid:"",is_submit:1,start_year:2019,end_year:2060,showPay:0,choosepayf:0,mjly:"",shop_id:0,shop_info:"",self_taking_time:"",default_concat:"",mymoney_pay:1,h5_wxpay:0,h5_alipay:0}},components:{datetime:s},onLoad:function(a){var e=this,t=0;a.fxsid&&(t=a.fxsid),this.fxsid=t,a.again&&(this.again=1),a.id&&(this.gid=a.id);var i=a.shop_id;i&&(this.shop_id=i);var s=a.addressid;s&&(this.addressid=s);var d=a.nav;d&&(this.nav=d),this._baseMin(this),n.bdLogin(t,function(){e.getorder()})},onPullDownRefresh:function(){a.stopPullDownRefresh()},methods:{clickTab:function(a){var e=this;if(e.nav==a.currentTarget.dataset.current)return!1;e.nav=a.currentTarget.dataset.current,e.getmyinfo()},chooseStore:function(){a.navigateTo({url:"/pages/chooseStore/chooseStore?address_id="+this.addressid+"&stid="+this.shop_id+"&type=flashSale&gid="+this.gid})},concat_input:function(a){this.default_concat=a.detail.value},openDatetimePicker:function(a){this.$refs.myPicker.show()},closeDatetimePicker:function(){this.$refs.myPicker.hide()},handleSubmit:function(a){this.self_taking_time="".concat(a.year,"-").concat(a.month,"-").concat(a.day," ").concat(a.hour,":").concat(a.minute)},paybox:function(){var e=this.nav;if(2==e){var t=this.shop_info;if(!t)return a.showModal({title:"提示",content:"请先选择门店",showCancel:!1}),!1;var i=this.self_taking_time;if(!i)return a.showModal({title:"提示",content:"请先选择预约取件时间",showCancel:!1}),!1;var n=this.default_concat;if(!n)return a.showModal({title:"提示",content:"请先输入预留电话",showCancel:!1}),!1;var s=/^1[3456789]{1}\d{9}$/;if(!s.test(n))return a.showModal({title:"提醒",content:"请您输入正确的手机号码",showCancel:!1}),!1}else{var d=this.addressid;if(!d)return a.showModal({title:"提示",content:"请先选择收件地址",showCancel:!1}),!1}var o=this.mymoney,r=this.zf_money;r>o&&(this.mymoney_pay=2,this.pay_type=2,this.choosepayf=4),0==this.showPay&&(this.showPay=1)},payboxclose:function(){1==this.showPay&&(this.showPay=0)},choosepay:function(a){this.zf_type=1==a.currentTarget.dataset.pay_type?0:1,this.choosepayf=a.currentTarget.dataset.type},closeAuth:function(){console.log("closeAuth"),this.needAuth=!1,this._checkBindPhone(this),this.globaluserinfo()},closeBind:function(){console.log("closeBind"),this.needBind=!1,this.getorder()},getorder:function(){var e=this;a.getStorageSync("suid");0==this.again&&a.request({url:e.$baseurl+"doPagecheckFreePackage",data:{uniacid:e.$uniacid,suid:a.getStorageSync("suid")},success:function(a){e.free_package=a.data.data}}),e.getGoodsInfo()},getGoodsInfo:function(){var e=this,t=a.getStorageSync("suid");a.request({url:e.$baseurl+"doPageshowPro11",data:{uniacid:e.$uniacid,suid:t,id:e.gid},success:function(t){if(0==t.data.data.pro_xz)var i=1;else i=t.data.data.pro_xz-t.data.data.my_num;if(e.mymoney=parseFloat(t.data.data.userinfo.money),e.myscore=parseFloat(t.data.data.userinfo.score),e.thumb=t.data.data.thumb,e.title=t.data.data.title,e.datas=t.data.data,e.dprice=t.data.data.price,e.hjjg=t.data.data.order_num?t.data.data.price*t.data.data.order_num:t.data.data.price,e.my_num=t.data.data.my_num,e.xg_num=t.data.data.pro_xz,e.shengyu=t.data.data.pro_kc,e.xg_buy=i,e.num=t.data.data.order_num?t.data.data.order_num:1,e.fid=t.data.data.formset,e.pagedata=t.data.data.forms,e.formdescs=t.data.data.formdescs,e.kuaidi=t.data.data.kuaidi,2!=e.nav&&(0==e.kuaidi?e.nav=1:1==e.kuaidi?e.nav=2:2==e.kuaidi&&(e.nav=1)),a.setNavigationBarTitle({title:e.title}),a.setStorageSync("isShowLoading",!1),a.hideNavigationBarLoading(),a.stopPullDownRefresh(),1==e.nav){var n=e.addressid;n?e.getmraddresszd(n):e.getmraddress()}else e.myContactInfo()}})},myContactInfo:function(){var e=this;a.request({url:e.$host+"/api/MainWxapp/getMyContactInfo",data:{uniacid:e.$uniacid,suid:e.suid,shop_id:e.shop_id,type:"flashSale"},success:function(a){e.shop_info=a.data.data.shop_info,e.getmyinfo()}})},getmraddresszd:function(e){var t=this,i=a.getStorageSync("suid");a.request({url:t.$baseurl+"doPagegetmraddresszd",data:{suid:i,id:e,uniacid:t.$uniacid},success:function(a){var e=a.data.data;""!=e?(t.mraddress=e,t.pro_city=e.pro_city):t.mraddress="",t.getmyinfo()}})},getmraddress:function(){var e=this,t=a.getStorageSync("suid");a.request({url:e.$baseurl+"doPagegetmraddress",data:{suid:t,uniacid:e.$uniacid},success:function(a){var t=a.data.data;if(t)e.mraddress=t,e.pro_city=t.pro_city,e.addressid=t.id;else{e.again;e.mraddress=""}e.getmyinfo()}})},getmyinfo:function(){var e=this,t=(a.getStorageSync("suid"),e.hjjg),i=e.nav,n=(e.again,e.pro_city),s=e.free_package;""!=n&&2!=e.nav&&0==s?a.request({url:e.$baseurl+"doPageyunfeigetnew",data:{uniacid:e.$uniacid,id:e.gid,type:"miaosha",hjjg:e.hjjg,num:e.num,pro_city:n},success:function(a){var n=a.data.data,s=0;s=parseFloat(t)>=parseFloat(n["byou"])&&""!=n["byou"]?0:n["yfei"],t=2==i?Math.round(1*t*100)/100:Math.round(100*(1*t+1*s))/100,e.yunfei=s,e.sfje=t,e.zf_type=e.mymoney>=t?0:1,e.zf_money=t,e.get_yf=n["yfei"],e.baoyou=n["byou"]}}):(e.sfje=t,e.zf_type=e.mymoney>=t?0:1,e.zf_money=t)},add_address:function(){0==this.again&&a.navigateTo({url:"/pages/address/address?shareid="+this.shareid+"&pid="+this.gid+"&orderid="+this.orderid})},jian:function(){var a=this,e=a.num,t=a.dprice;e--,e<=0&&(e=1);var i=100*t*e/100;a.num=e,a.hjjg=i,a.ischecked=!1,a.getmyinfo()},jia:function(){var e=this,t=e.num,i=e.my_num,n=e.xg_num,s=e.shengyu,d=e.dprice;t++,t>s&&-1!=s&&(t--,a.showModal({title:"提醒",content:"库存量不足！",showCancel:!1})),t+i>n&&0!=n&&(t>1&&t--,a.showModal({title:"提醒",content:"该商品为限购产品，您总购买数已超过限额！",showCancel:!1}));var o=100*d*t/100;e.num=t,e.hjjg=o,e.ischecked=!1,e.getmyinfo()},refreshSessionkey:function(){var e=this;a.login({success:function(t){a.request({url:e.$baseurl+"doPagegetNewSessionkey",data:{uniacid:e.$uniacid,code:t.code},success:function(a){e.newSessionKey=a.data.data}})}})},submit:n.throttle(function(e){var t=this,i=this.is_submit;if(2==i)return!1;var n=e.detail.formId,s=t.again;t.formId=n,t.disabled=!0;t.datas;var d=t.mraddress;if(t.fid>0){if(2!=t.nav&&(null==d||!d)&&0==s)return a.showModal({title:"提示",content:"请先选择/设置收货地址！",showCancel:!0,success:function(e){if(!e.confirm)return t.disabled=!1,!1;a.navigateTo({url:"/pages/address/address?shareid="+t.shareid+"&pid="+t.gid+"&orderid="+t.orderid})}}),!1;t.formSubmit()}else{if(2!=t.nav&&(null==d||!d)&&0==s)return a.showModal({title:"提示",content:"请先选择/设置收货地址！",showCancel:!0,success:function(e){if(e.confirm)a.navigateTo({url:"/pages/address/address?shareid="+t.shareid+"&pid="+t.gid+"&orderid="+t.orderid});else if(e.cancel)return t.disabled=!1,!1}}),!1;t.doshend(0)}},2e3),doshend:function(e){var t=this,n=i.getStorageSync("suid"),s=t.yhqid,d=t.sfje,o=t.nav,r=t.yunfei,c=t.yfjian,u=t.dkscore,l=(t.dkmoney,t.mraddress),h=t.mjly,f=t.orderid,g=t.again;if(1==o?r-=c:r=0,!(2==o||null!=l&&l||0!=g))return a.showModal({title:"提示",content:"请先选择/设置收货地址！",showCancel:!0,success:function(e){if(!e.confirm)return t.disabled=!1,!1;a.navigateTo({url:"/pages/address/address?shareid="+t.shareid+"&pid="+t.gid+"&orderid="+t.orderid})}}),!1;var y=l["id"];if(0==t.again){var p="",m="",_="",v="";if(2==t.nav)if(""==t.storeall)p=t.baseinfo.name,m=t.baseinfo.tel,_=t.baseinfo.address;else for(var w=t.storeid,x=t.storeall,b=0;b<x.length;b++)if(w==x[b]["id"]){p=x[b]["title"],m=x[b]["tel"],_=x[b]["province"]+x[b]["city"]+x[b]["country"],v=x[b]["times"];break}}t.is_submit=2,a.request({url:t.$baseurl+"doPagecreateorder",data:{pid:t.gid,num:t.num,types:"miaosha",suid:n,couponid:s,price:d,dkscore:u,address:y,mjly:h,nav:o,formid:e,yunfei:r,orderid:f||"",uniacid:t.$uniacid,again:t.again,source:a.getStorageSync("source"),store_hours:v,store_name:p,store_address:_,store_tel:m,zf_type:t.zf_type,shop_id:t.shop_id,self_taking_time:t.self_taking_time,default_concat:t.default_concat},success:function(e){if("1"==e.data.data.errcode)a.showModal({title:e.data.data.err,content:"请重新下单",showCancel:!1}),t.disabled=!1;else if("2"==e.data.data.errcode)a.showModal({title:e.data.data.err,content:e.data.data.can_buy<=0?"去逛逛其他商品吧~":"您还可购买"+e.data.data.can_buy+"件",showCancel:!1}),t.disabled=!1;else if("3"==e.data.data.errcode)a.showModal({title:e.data.data.err,content:"当前库存为"+e.data.data.kc+"件",showCancel:!1}),t.disabled=!1;else if("4"==e.data.data.errcode)a.showModal({title:"提示",content:"该商品已下架",showCancel:!1,success:function(){a.redirectTo({url:"/pages/index/index"})}});else if("-1"==e.data.data.errcode){var i=e.data.data.orderid;t.orderid=i,0==t.zf_type?t.pay1(i):t._baidupay(t,t.zf_money,"miaosha",i,"/pagesFlashSale/orderlist_dan/orderlist_dan")}}})},showpay:function(){var e=this;a.request({url:this.$baseurl+"doPageGetH5payshow",data:{uniacid:this.$uniacid,suid:a.getStorageSync("suid")},success:function(t){0==t.data.data.ali&&0==t.data.data.wx?a.showModal({title:"提示",content:"请联系管理员设置支付参数",success:function(e){a.navigateTo({url:"/pagesFlashSale/order_more_list/order_more_list"})}}):(0==t.data.data.ali?(e.alipay=0,e.pay_type=2):(e.alipay=1,e.pay_type=1),0==t.data.data.wx?e.wxpay=0:e.wxpay=1,e.show_pay_type=1)}})},changealipay:function(){this.pay_type=1},changewxpay:function(){this.pay_type=2},close_pay_type:function(){this.show_pay_type=0},h5topay:function(){var a=this.pay_type;1==a?this._alih5pay(this,this.zf_money,7,this.orderid):2==a&&this._wxh5pay(this,this.zf_money,"miaosha",this.orderid),this.show_pay_type=0},pay1:function(e){var t=this;a.showModal({title:"请注意",content:"您将使用余额支付"+t.sfje+"元",success:function(i){i.confirm?(t.payover_do(e),a.showLoading({title:"下单中...",mask:!0})):a.redirectTo({url:"/pagesFlashSale/orderlist_dan/orderlist_dan"})}})},pay2:function(e){var t=this,i=a.getStorageSync("openid"),n=t.sfje;a.request({url:t.$baseurl+"doPagebeforepay",data:{openid:i,price:n,order_id:e,types:"miaosha",formId:t.formId,uniacid:t.$uniacid,suid:a.getStorageSync("suid")},success:function(i){1==i.data.data.errs&&(a.showModal({title:"支付失败",content:i.data.data.return_msg,showCancel:!1}),t.disabled=!1);var n=[1,2,3,4];-1!=n.indexOf(i.data.data.err)&&(a.showModal({title:"支付失败",content:i.data.data.message,showCancel:!1}),t.disabled=!1),0==i.data.data.err&&(a.request({url:t.$baseurl+"doPagesavePrepayid",data:{types:"miaosha",order_id:e,prepayid:i.data.data.package,uniacid:t.$uniacid},success:function(a){},fail:function(a){}}),a.requestPayment({timeStamp:i.data.data.timeStamp,nonceStr:i.data.data.nonceStr,package:i.data.data.package,signType:"MD5",paySign:i.data.data.paySign,success:function(e){a.showToast({title:"支付成功",icon:"success",mask:!0,duration:3e3,success:function(e){a.showToast({title:"购买成功！",icon:"success",mask:!0,success:function(){a.navigateTo({url:"/pagesFlashSale/orderlist_dan/orderlist_dan?type=9"})}})}})},fail:function(e){a.navigateTo({url:"/pagesFlashSale/orderlist_dan/orderlist_dan?type=9"})},complete:function(a){}}))}})},pay4:function(e){a.request({url:this.$baseurl+"doPageAlipay",data:{uniacid:this.$uniacid,order_id:e,suid:a.getStorageSync("suid"),types:"miaosha"},success:function(e){e&&a.tradePay({tradeNO:e.data.trade_no,success:function(e){a.navigateTo({url:"/pagesFlashSale/orderlist_dan/orderlist_dan"})},fail:function(e){a.navigateTo({url:"/pagesFlashSale/orderlist_dan/orderlist_dan"})}})}})},payover_do:function(e){var t=this,i=t.sfje,n=(t.mymoney,a.getStorageSync("suid")),s=a.getStorageSync("openid");a.request({url:t.$baseurl+"doPagepaynotify",data:{out_trade_no:e,suid:n,payprice:i,types:"miaosha",flag:0,formId:t.formId,uniacid:t.$uniacid,openid:s,source:a.getStorageSync("source")},success:function(e){"失败"==e.data.data.message?a.showToast({title:"付款失败, 请刷新后重新付款！",icon:"none",mask:!0,success:function(){a.navigateTo({url:"/pagesFlashSale/orderlist_dan/orderlist_dan?type=9"}),a.hideLoading()}}):a.showToast({title:"购买成功！",icon:"success",mask:!0,success:function(){a.navigateTo({url:"/pagesFlashSale/orderlist_dan/orderlist_dan?type=9"}),a.hideLoading()}})}})},showModal:function(){var a=this;a.ischecked=!1,a.sw=!1,a.showModalStatus=!0},hideModal:function(){var a=i.createAnimation({duration:200,timingFunction:"linear",delay:0});this.animation=a,a.translateY(300).step(),this.animationData=a.export(),setTimeout(function(){a.translateY(0).step(),this.animationData=a.export(),this.showModalStatus=!1}.bind(this),200)},mjlySet:function(a){var e=a.detail.value;this.mjly=e},bindInputChange:function(a){var e=a.detail.value,t=a.currentTarget.dataset.index,i=this.pagedata;i[t].val=e,this.pagedata=i},weixinadd:function(){var e=this;a.chooseAddress({success:function(a){for(var t=a.provinceName+" "+a.cityName+" "+a.countyName+" "+a.detailInfo,i=a.userName,n=a.telNumber,s=e.pagedata,d=0;d<s.length;d++)0==s[d].type&&2==s[d].tp_text[0].yval&&(s[d].val=i),0==s[d].type&&3==s[d].tp_text[0].yval&&(s[d].val=n),0==s[d].type&&4==s[d].tp_text[0].yval&&(s[d].val=t);e.myname=i,e.mymobile=n,e.myaddress=t,e.pagedata=s}})},getPhoneNumber:function(e){var t=this,i=e.detail.iv,n=e.detail.encryptedData;"getPhoneNumber:ok"==e.detail.errMsg?a.checkSession({success:function(){a.request({url:t.$baseurl+"doPagejiemiNew",data:{uniacid:t.$uniacid,newSessionKey:t.newSessionKey,iv:i,encryptedData:n},success:function(e){if(e.data.data){for(var i=t.pagedata,n=0;n<i.length;n++)0==i[n].type&&5==i[n].tp_text[0]&&(i[n].val=e.data.data);t.wxmobile=e.data.data,t.pagedata=i}else a.showModal({title:"提示",content:"sessionKey已过期，请下拉刷新！"})},fail:function(a){console.log(a)}})},fail:function(){a.showModal({title:"提示",content:"sessionKey已过期，请下拉刷新！"})}}):a.showModal({title:"提示",content:"请先授权获取您的手机号！",showCancel:!1})},checkboxChange:function(a){var e=a.detail.value,t=a.currentTarget.dataset.index,i=this.pagedata;i[t].val=e,this.pagedata=i},radioChange:function(a){var e=a.detail.value,t=a.currentTarget.dataset.index,i=this.pagedata;i[t].val=e,this.pagedata=i},delimg:function(a){var e=a.currentTarget.dataset.index,t=a.currentTarget.dataset.id,i=this.pagedata,n=i[e].z_val;n.splice(t,1),0==n.length&&(n=""),i[e].z_val=n,this.pagedata=i},choiceimg:function(e){var t=this,i=0,n=t.zhixin,s=e.currentTarget.dataset.index,d=t.pagedata,o=d[s].val,r=d[s].tp_text[0];o?i=o.length:(i=0,o=[]);var c=r-i;t.pd_val;a.chooseImage({count:c,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){n=!0,t.zhixin=n,a.showLoading({title:"图片上传中"});var i=e.tempFilePaths,o=0,r=i.length,c=function e(){a.uploadFile({url:t.$baseurl+"wxupimg",formData:{uniacid:t.$uniacid},filePath:i[o],name:"file",success:function(i){d[s].z_val.push(i.data),t.pagedata=d,o++,o<r?e():(n=!1,t.zhixin=n,a.hideLoading())}})};c()}})},bindPickerChange:function(a){var e=a.detail.value,t=a.currentTarget.dataset.index,i=this.pagedata,n=i[t].tp_text,s=n[e];i[t].val=s,this.pagedata=i},bindDateChange:function(a){var e=a.detail.value,t=a.currentTarget.dataset.index,i=this.pagedata;i[t].val=e,this.pagedata=i},bindTimeChange:function(a){var e=a.detail.value,t=a.currentTarget.dataset.index,i=this.pagedata;i[t].val=e,this.pagedata=i},namexz:function(a){for(var e=this,t=a.currentTarget.dataset.index,i=e.pagedata,n=i[t],s=[],d=0;d<n.tp_text.length;d++){var o={};o["keys"]=n.tp_text[d]["yval"],o["val"]=1,s.push(o)}e.ttcxs=1,e.formindex=t,e.xx=s,e.xuanz=0,e.lixuanz=-1,e.riqi()},riqi:function(){for(var a=this,e=new Date,t=new Date(e.getTime()),i=t.getFullYear(),n=t.getMonth()+1,s=t.getDate(),d=i+"-"+n+"-"+s,o=a.xx,r=0;r<o.length;r++)o[r].val=1;a.xx=o,a.gettoday(d);for(var c=[],u=[],l=new Date,h=0;h<5;h++){var f=new Date(l.getTime()+24*h*3600*1e3),g=f.getFullYear(),y=f.getMonth()+1,p=f.getDate(),m=y+"月"+p+"日",_=g+"-"+y+"-"+p;c.push(m),u.push(_)}a.arrs=c,a.fallarrs=u,a.today=d},gettoday:function(e){var t=this,i=0,n="showOrder",s=t.formindex,d=t.xx;a.request({url:t.$baseurl+"dopageDuzhan",data:{uniacid:t.$uniacid,id:i,types:n,days:e,pagedatekey:s},success:function(a){for(var e=a.data.data,i=0;i<e.length;i++)d[e[i]].val=2;var n=0;e.length==d.length&&(n=1),t.xx=d,t.isover=n}})},goux:function(a){this.lixuanz=a.currentTarget.dataset.index},xuanzd:function(a){for(var e=a.currentTarget.dataset.index,t=this.fallarrs,i=t[e],n=this.xx,s=0;s<n.length;s++)n[s].val=1;this.xuanz=e,this.today=i,this.lixuanz=-1,this.xx=n,this.gettoday(i)},quxiao:function(){this.ttcxs=0},save:function(){var e=this.today,t=this.xx,i=this.lixuanz;if(-1==i)return a.showModal({title:"提现",content:"请选择预约的选项",showCancel:!1}),!1;var n=t[i].keys,s="已选择"+e+"，"+n,d=this.pagedata,o=this.formindex;d[o].val=s,d[o].days=e,d[o].indexkey=o,d[o].xuanx=i,this.ttcxs=0,this.pagedata=d},formSubmit:function(){var e=this,t=a.getStorageSync("suid");if(!t)return a.showModal({title:"提醒",content:"您尚未登陆/注册，请先登陆/注册",success:function(e){e.confirm&&a.navigateTo({url:"/pages/usercenter/usercenter"})}}),!1;for(var i=e.pagedata,n=0;n<i.length;n++){if(1==i[n].ismust)if(5==i[n].type){if(!i[n].z_val)return a.showModal({title:"提醒",content:i[n].name+"为必填项！",showCancel:!1}),!1}else if(""==i[n].val)return a.showModal({title:"提醒",content:i[n].name+"为必填项！",showCancel:!1}),!1;if(5==i[n].type&&i[n].z_val){if(i[n].z_val.length>0)for(var s=0;s<i[n].z_val.length;s++)i[n].z_val[s]=i[n].z_val[s].substr(i[n].z_val[s].indexOf("/upimages"))}else if(0==i[n].type&&1==i[n]["tp_text"][0]["yval"]){var d=/^1[3456789]{1}\d{9}$/;if(!d.test(i[n].val))return a.showModal({title:"提醒",content:"请您输入正确的手机号码",showCancel:!1}),!1}else if(0==i[n].type&&7==i[n]["tp_text"][0]["yval"]){var o=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/;if(!o.test(i[n].val))return a.showModal({title:"提醒",content:"请您输入正确的身份证号",showCancel:!1}),!1}}e.is_submit=2;var r="";a.request({url:e.$baseurl+"doPageFormval",data:{uniacid:e.$uniacid,suid:t,id:e.gid,pagedata:JSON.stringify(i),fid:e.datas.formset,types:"miaosha",openid:r,source:a.getStorageSync("source"),form_id:e.formId?e.formId:""},success:function(t){var i=t.data.data.id;a.showModal({title:"提醒",content:t.data.data.con,showCancel:!1,success:function(){e.doshend(i)}})}})},makePhoneCallC:function(e){var t=e.currentTarget.dataset.tel;a.makePhoneCall({phoneNumber:t})}}};e.default=d}).call(this,t("5486")["default"],t("5486")["default"])},a7b6:function(a,e,t){"use strict";var i=t("32d7"),n=t.n(i);n.a}},[["0730","common/runtime","common/vendor"]]]);