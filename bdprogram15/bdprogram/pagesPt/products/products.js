(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesPt/products/products"],{"58d5":function(t,e,i){"use strict";i.r(e);var n=i("f3b8"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},6655:function(t,e,i){"use strict";var n=i("7188"),a=i.n(n);a.a},7188:function(t,e,i){},c701:function(t,e,i){"use strict";i.r(e);var n=i("eb0f"),a=i("58d5");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("6655");var s,r=i("f0c5"),u=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);e["default"]=u.exports},eb0f:function(t,e,i){"use strict";var n={auth:()=>Promise.all([i.e("common/vendor"),i.e("components/auth/auth")]).then(i.bind(null,"a32a")),bindPhone:()=>Promise.all([i.e("common/vendor"),i.e("components/bindPhone/bindPhone")]).then(i.bind(null,"9bb9"))},a=function(){var t=this,e=t.$createElement;t._self._c},o=[];i.d(e,"b",function(){return a}),i.d(e,"c",function(){return o}),i.d(e,"a",function(){return n})},f217:function(t,e,i){"use strict";(function(t){i("d28f");n(i("66fd"));var e=n(i("c701"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("5486")["createPage"])},f3b8:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("37b1"));function a(t){return t&&t.__esModule?t:{default:t}}var o=i("88e4"),s={data:function(){return{$imgurl:this.$imgurl,baseinfo:"",needAuth:!1,needBind:!1,gid:"",imgUrls:[],indicatorDots:!0,autoplay:!0,interval:3e3,duration:1e3,circular:!0,num:1,sc:0,guige:0,protab:1,gwc:1,gm:0,foot:1,nowcon:"con",is_comment:0,comments:2,u_gwc:0,xzarr:[],gwccount:0,overtime:[],daojishi:[],isview:0,vip_config:0,products:"",datas:"",strgrouparr:"",proinfo:"",newstr:"",gzjson:"",pingtcount:0,shareid:0,xunh:"",pintuan:"",pic_video:"",isplay:!1,currentSwiper:0,minHeight:220,heighthave:0,shareimg:0,share:0,shareimg_url:"",system_w:0,system_h:0,img_w:0,img_h:0,personPt:0,fiexdBoxs:0,buy_person:0,use_more:0}},onPullDownRefresh:function(){this.getPro(),t.stopPullDownRefresh()},onLoad:function(e){var i=this;e.id&&(this.gid=e.id),this._baseMin(this);var n=0;e.fxsid&&(n=e.fxsid,t.setStorageSync("fxsid",n)),this.fxsid=n,console.log("分销商--"+this.fxsid);var a=e.shareid;a||(a=0),e.userid&&(this.userid=e.userid);var s=t.getStorageSync("suid");s?o.bdLogin(n,function(){i.getPro()}):this.getPro();var r=t.getStorageSync("systemInfo");this.img_w=parseInt((.65*r.windowWidth).toFixed(0)),this.img_h=parseInt((1.875*this.img_w).toFixed(0)),this.system_w=parseInt(r.windowWidth),this.system_h=parseInt(r.windowHeight)},onShareAppMessage:function(){var e=this,i=t.getStorageSync("suid"),n=e.gid,a="";return a=1==e.baseinfo.fxs?"/pagesPt/products/products?id="+n+"&userid="+i:"/pagesPt/products/products?id="+n+"&userid="+i+"&fxsid="+i,{title:e.title,path:a,success:function(t){}}},methods:{navback:function(){t.navigateBack()},toTop:function(){t.pageScrollTo({scrollTop:0})},onPageScroll:function(t){t.scrollTop>200?this.fiexdBoxs=1:this.fiexdBoxs=0},makePhoneCall:function(e){var i=this.baseinfo.tel;t.makePhoneCall({phoneNumber:i})},showPtBox:function(){this.personPt=1},closePtBox:function(){this.personPt=0},checkvip:function(){var e=this,i=0,n=t.getStorageSync("suid");if(!this.getSuid())return!1;t.request({url:e.$baseurl+"doPagecheckvip",data:{uniacid:e.$uniacid,kwd:"pt",suid:n,id:e.gid,gz:1},success:function(n){if(!1===n.data.data)return e.needvip=!0,t.showModal({title:"进入失败",content:"使用本功能需先开通vip!",showCancel:!1,success:function(e){e.confirm&&t.redirectTo({url:"/pages/register/register"})}}),!1;n.data.data.needgrade>0?(e.needvip=!0,n.data.data.grade>0?n.data.data.grade<n.data.data.needgrade?t.showModal({title:"进入失败",content:"使用本功能需成为"+n.data.data.vipname+"("+n.data.data.needgrade+")以上等级会员,请先升级!",showCancel:!1,success:function(e){e.confirm&&t.redirectTo({url:"/pages/open1/open1"})}}):i=1:n.data.data.grade<n.data.data.needgrade?t.showModal({title:"进入失败",content:"使用本功能需成为"+n.data.data.vipname+"("+n.data.data.needgrade+")以上等级会员,请先开通会员后再升级会员等级!",showCancel:!1,success:function(e){e.confirm&&t.redirectTo({url:"/pages/register/register"})}}):i=1):i=1,1==i&&e.gmget()},fail:function(t){}})},cell:function(){this.needAuth=!1},closeAuth:function(){this.needAuth=!1,this.needBind=!0},closeBind:function(){this.needBind=!1,this.checkvip()},getSuid:function(){var e=t.getStorageSync("suid");if(e)return!0;var i="";return i=t.getStorageSync("baidu_userinfo"),i?this.needBind=!0:this.needAuth=!0,!1},swiperLoad:function(e){var i=this;t.getSystemInfo({success:function(t){var n=e.detail.width,a=e.detail.height,o=n/a,s=t.windowWidth/o;i.heighthave||(i.minHeight=s,i.heighthave=1)}})},swiperChange:function(t){this.autoplay=!0,this.currentSwiper=t.detail.current,this.isplay=!1,this.autoplay=this.autoplay},playvideo:function(){var t=this;t.autoplay=!1,t.isplay=!0,t.autoplay=t.autoplay},endvideo:function(){var t=this;t.autoplay=!0,t.isplay=!1,t.autoplay=t.autoplay},getPro:function(){var e=this;t.request({url:e.$baseurl+"doPagePtproductinfo",data:{uniacid:e.$uniacid,id:e.gid,suid:t.getStorageSync("suid"),source:t.getStorageSync("source")},success:function(i){var a=i.data.data,o=a.products;e.use_more=o.use_more;var s=a.pingtuan,r=a.overtime,u=a.pingtcount;1==o.show_pro&&t.showModal({title:"提示",content:"该商品已下架",showCancel:!1,success:function(){t.redirectTo({url:"/pagesPt/index/index"})}}),1==a.collect?e.sc=1:e.sc=0,e.dodaojishi(),e.products=o,e.buy_person=o.xsl>6?6:o.xsl,e.pintuan=s,e.imgUrls=o["imgtext"],e.guiz=a.guiz,e.overtime=r,e.pingtcount=u,e.pic_video=i.data.data.products.video,e.products.texts&&(e.products.texts=e.products.texts.replace(/\<img/gi,'<img style="width:100%;height:auto;display:block" '),e.products.texts=(0,n.default)(e.products.texts));for(var c=a.grouparr,d="",h=0;h<c.length;h++)d+=c[h]+"、";var l=d.substring(0,d.length-1);e.strgrouparr=l,e.grouparr=c;var g=a.grouparr_val;e.gzjson=g,e.getproinfo()}})},getproinfo:function(){var e=this,i=e.use_more;if(1==i){for(var n=e.gzjson,a=e.grouparr,o=e.gid,s="",r=0;r<a.length;r++){var u=n[a[r]]["val"],c=n[a[r]]["ck"];s+=u[c]+"/"}var d=s.substring(0,s.length-1);t.request({url:e.$baseurl+"doPageptpinfo",data:{str:d,uniacid:e.$uniacid,id:o},success:function(i){var n=i.data.data;1==n["baseinfo"]["show_pro"]&&t.showModal({title:"提示",content:"该商品已下架",showCancel:!1,success:function(){t.redirectTo({url:"/pagesPt/index/index"})}}),e.proinfo=n["proinfo"],e.baseinfo2=n["baseinfo"],e.newstr=d}})}},dodaojishi:function(){for(var t=this,e=t.overtime,i=[],n=0;n<e.length;n++){var a,o,s,r,u=new Date,c=u.getTime(),d=1e3*parseInt(e[n]),h=d-c;h>=0?(a=Math.floor(h/1e3/60/60/24),o=Math.floor(h/1e3/60/60%24)<10?"0"+Math.floor(h/1e3/60/60%24):Math.floor(h/1e3/60/60%24),s=Math.floor(h/1e3/60%60)<10?"0"+Math.floor(h/1e3/60%60):Math.floor(h/1e3/60%60),r=Math.floor(h/1e3%60)<10?"0"+Math.floor(h/1e3%60):Math.floor(h/1e3%60),i[n]=a>0?a+"天"+o+":"+s+":"+r:o+":"+s+":"+r):i[n]="已结束"}t.daojishi=i;var l=setTimeout(function(){t.dodaojishi()},1e3);t.xunh=l},guige_hidden:function(){this.guige=0,this.hareid=0},color_change:function(t){},changepro:function(t){var e=this,i=t.currentTarget.dataset.id,n=(e.grouparr,t.currentTarget.dataset.index),a=e.gzjson;a[i]["ck"]=n,e.gzjson=a,e.getproinfo()},collect:function(){var e=this;if(!this.getSuid())return!1;var i=e.sc;0==i?t.showLoading({title:"收藏中"}):t.showLoading({title:"取消收藏中"}),e.collects(i)},collects:function(e){var i=this;t.request({url:i.$baseurl+"doPageCollect",cachetime:"30",data:{uniacid:i.$uniacid,id:i.gid,suid:t.getStorageSync("suid"),types:"pt"},success:function(n){i.sc=1==e?0:1,t.showToast({title:n.data.data,icon:"success",duration:2e3}),setTimeout(function(){t.hideLoading()},1e3)}})},gwc_100:function(){this.gwc=1,this.gm=0,this.guige=1,this.foot=0},gm_100:function(){this.gwc=0,this.gm=1,this.guige=1,this.foot=0},gmget:function(){var e=this,i=e.proinfo,n=e.num,a=e.products,o=e.use_more,s=e.gwc,r=e.shareid,u=e.guiz;if(1==o){var c=e.baseinfo2;if(0==i["kc"])return t.showModal({title:"提醒",content:"您来晚了，已经卖完了！",showCancel:!1}),!1;for(var d=i["comment"],h=d.split(","),l="",g=0;g<h.length;g++){var f=g+1;l+=h[g]+":"+i["type"+f]+","}l=l.substring(0,l.length-1);if(i["ggz"]=l,1==s)var p=1*i["price"],m=p*n;else p=1*i["dprice"],m=p*n;var v={};v["cid"]=c["cid"],v["id"]=c["id"],v["title"]=c["title"],v["thumb"]=c["thumb"],a["baseinfo2"]=v,a["proinfo"]=i,a["num"]=n,a["pvid"]=i["pid"]}else{if(1==s)p=1*a["price"];else p=1*a["mark_price"];m=p*n,c=[];a["num"]=n,a["pvid"]=a["id"]}a["one_bili"]=u["one_bili"],a["two_bili"]=u["two_bili"],a["three_bili"]=u["three_bili"],a["gmorpt"]=s;var w=[];w.push(a),t.setStorage({key:"jsdata",data:w}),t.setStorage({key:"jsprice",data:m}),clearInterval(e.xunh);var _=a["kuaidi"];t.navigateTo({url:"/pagesPt/order/order?shareid="+r+"&id="+e.gid+"&kuaidi="+_+"&use_more="+e.use_more})},lijct:function(e){var i=this,n=e.currentTarget.dataset.index,a=t.getStorageSync("suid");if(!this.getSuid())return!1;t.request({url:i.$baseurl+"doPagepdmytuanorcy",data:{uniacid:i.$uniacid,shareid:n,suid:a},success:function(e){1==e.data.data?(clearInterval(i.xunh),t.navigateTo({url:"/pagesPt/pt/pt?shareid="+n})):(i.gwc_100(),i.shareid=n)}})},num_add:function(){var e=this,i=e.proinfo,n=i.kc,a=e.num;a+=1,a>n&&(t.showModal({title:"提醒",content:"您的购买数量超过了库存！",showCancel:!1}),a--),e.num=a},num_jian:function(){var t=this,e=t.num;1==e?t.num=1:(e-=1,t.num=e)},open_share:function(){this.share=1},share_close:function(){this.share=0,this.shareimg=0},h5ShareAppMessage:function(){var e=this,i=t.getStorageSync("suid");t.showModal({title:"长按复制链接后分享",content:this.$host+"/h5/index.html?id="+this.$uniacid+"#/pagesPt/products/products?id="+this.gid+"&fxsid="+i+"&userid="+i,showCancel:!1,success:function(t){e.share=0}})},getShareImg:function(){t.showToast({title:"暂不支持生成分享海报",icon:"none"})},closeShare:function(){this.shareimg=0},saveImg:function(){var e=this;t.getImageInfo({src:e.shareimg_url,success:function(i){t.saveImageToPhotosAlbum({filePath:i.path,success:function(){t.showToast({title:"保存成功！",icon:"none"}),e.shareimg=0,e.share=0}})}})},aliSaveImg:function(){var e=this;t.getImageInfo({src:e.shareimg_url,success:function(t){my.saveImage({url:t.path,showActionSheet:!0,success:function(){my.alert({title:"保存成功"}),e.shareimg=0,e.share=0}})}})}}};e.default=s}).call(this,i("5486")["default"])}},[["f217","common/runtime","common/vendor"]]]);