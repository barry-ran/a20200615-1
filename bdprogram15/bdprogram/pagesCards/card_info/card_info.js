(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesCards/card_info/card_info"],{"3bf4":function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=n(e("37b1"));function n(t){return t&&t.__esModule?t:{default:t}}var s=e("88e4"),o=t.createInnerAudioContext(),r={data:function(){return{$imgurl:this.$imgurl,page_signs:"staff_cards",staffinfo:{expand:[]},style:0,hide_info:0,id:0,isview:0,voice:"",autovoice:0,music:"",musicAutoPlay:"",musicTitle:"",musicpay:0,audioplay:1,duration:"",curTimeVal:"",durationDay:"播放获取",curTimeValDay:"00:00",st:"",sy:"",status:0,tabbar_t:0,iszan:0,zans:"",zan:0,basefoot:{tabbar:[]},baseinfo:"",share:0,staffset:"",pic:"",share_open:"",descp:"",shareimg:0,shareimg_url:"",system_w:0,system_h:0,img_w:0,img_h:0,base_color:"",needBind:!1,needAuth:!1,visit_num:0,forward_num:0}},onHide:function(){var t=this;t.getStaffInfo(),t.getStaffset()},onUnload:function(){var t=this;t.audioPause(),t.getStaffset()},onPullDownRefresh:function(){var a=this;a.getStaffInfo(),a.getStaffset(),t.stopPullDownRefresh()},onShareAppMessage:function(){var a=this,e=t.getStorageSync("suid"),i="";return i="百度小程序名片",console.log("/pagesCards/card_info/card_info?id="+a.id+"&sharesuid="+e),{title:i,path:"/pagesCards/card_info/card_info?id="+a.id+"&sharesuid="+e}},onLoad:function(a){var e=this;a.scene?e.id=a.scene:e.id=a.id;var i=0;a.fxsid&&(i=a.fxsid,t.setStorageSync("fxsid",i),e.fxsid=i),1==a.share&&e.share111(),this._baseMin(this);var n=t.getStorageSync("suid");n&&s.bdLogin(i,function(){});var o=t.getStorageSync("systemInfo");this.img_w=parseInt((.65*o.windowWidth).toFixed(0)),this.img_h=parseInt((1.875*this.img_w).toFixed(0)),this.system_w=parseInt(o.windowWidth),this.system_h=parseInt(o.windowHeight),a.sharesuid&&a.sharesuid!=t.getStorageSync("suid")?t.request({url:e.$baseurl+"dopagesharecardSuccess",data:{id:e.id,sharesuid:a.sharesuid,suid:t.getStorageSync("suid"),uniacid:e.$uniacid},success:function(t){e.addvisit()}}):e.addvisit()},methods:{h5ShareAppMessage:function(){var a=this,e=t.getStorageSync("suid");t.showModal({title:"长按复制链接后分享",content:this.$host+"/h5/index.html?id="+this.$uniacid+"#/pagesCards/card_info/card_info?id="+this.id+"&fxsid="+e+"&userid="+e,showCancel:!1,success:function(t){a.share=0}})},getShareImg:function(){t.showToast({title:"暂不支持生成分享海报",icon:"none"})},addvisit:function(){var a=this;t.request({url:a.$baseurl+"dopageaddVisit",data:{id:a.id,suid:t.getStorageSync("suid"),uniacid:a.$uniacid},success:function(t){a.getStaffInfo(),a.getStaffset()}})},getStaffInfo:function(){var a=this;t.request({url:a.$baseurl+"dopagegetStaffInfo",data:{id:a.id,suid:t.getStorageSync("suid"),uniacid:a.$uniacid,source:t.getStorageSync("source")},success:function(e){if(e.data.data.staffinfo){if(""==e.data.data.userinfo.nickname&&(a.isview=1),a.staffinfo=e.data.data.staffinfo,t.setNavigationBarTitle({title:a.staffinfo.realname?a.staffinfo.realname:"名片"}),a.zan=e.data.data.staffinfo.zan,a.visit_num=e.data.data.staffinfo.visit,a.forward_num=e.data.data.staffinfo.forward,a.zan>9999){var n=(a.zan/1e4).toFixed(1)+"W";a.zan=n}if(a.visit_num>9999){var s=(a.visit_num/1e4).toFixed(1)+"W";a.visit_num=s}if(a.forward_num>9999){var o=(a.forward_num/1e4).toFixed(1)+"W";a.forward_num=o}a.voice=e.data.data.staffinfo.voice,""!=a.voice&&(a.autovoice=e.data.data.staffinfo.autovoice),""==e.data.data.staffinfo.pic?a.pic="/pages/resource/img/default_pic.png":a.pic=e.data.data.staffinfo.pic,1==e.data.data.haszan?(a.zans=1,a.iszan=1):(a.zans="",a.iszan=0),a.descp=e.data.data.staffinfo.descp,a.descp&&(a.descp=a.descp.replace(/\<img/gi,'<img style="width:100%;height:auto;display:block" '),a.descp=(0,i.default)(a.descp)),0==a.autovoice?(a.st=10,a.sy="",a.status=0):(a.st=2,a.sy="music-on",a.status=1,a.audioPlay())}else t.showModal({title:"提示",content:"该员工信息已被删除!",success:function(a){a.confirm?t.navigateBack({delta:1}):a.cancel&&t.navigateBack({delta:1})}})}})},getStaffset:function(){this.baseinfo.base_color2;var a=this;t.request({url:a.$baseurl+"dopagegetStaffset",data:{uniacid:a.$uniacid},success:function(t){a.style=t.data.data.card_style,a.tabbar_t=t.data.data.tabbar_t,a.basefoot=t.data.data.baseInfo,a.share_open=t.data.data.is_share,a.staffset=t.data.data,a.$uniacid=a.$uniacid}})},cell:function(){this.needAuth=!1},closeAuth:function(){this.needAuth=!1,this.needBind=!0},closeBind:function(){this.needBind=!1},getSuid:function(){var a=t.getStorageSync("suid");if(a)return!0;var e="";return e=t.getStorageSync("baidu_userinfo"),e?this.needBind=!0:(this.needAuth=!0,console.log()),!1},redirectto:function(t){var a=t.currentTarget.dataset.link,e=t.currentTarget.dataset.linktype;this._redirectto(a,e)},callphone:function(a){var e=a.currentTarget.dataset.text;t.makePhoneCall({phoneNumber:e})},copy:function(a){var e=a.currentTarget.dataset.text;t.setClipboardData({data:e,success:function(a){t.getClipboardData({success:function(t){}}),t.showToast({title:"复制成功",duration:2e3})}})},addPhoneContact:function(a){var e=this,i=a.currentTarget.dataset.text,n=a.currentTarget.dataset.mobile,s=a.currentTarget.dataset.wxnumber;null!=s&&""!=s||(s=n);var o=a.currentTarget.dataset.email,r=a.currentTarget.dataset.company,c=a.currentTarget.dataset.province,d=a.currentTarget.dataset.city,u=a.currentTarget.dataset.address;t.addPhoneContact({firstName:i,mobilePhoneNumber:n,weChatNumber:s,email:o,organization:r,addressState:c,addressCity:d,addressStreet:u,success:function(){t.request({url:e.$baseurl+"dopagesavecard",data:{id:e.id,suid:t.getStorageSync("suid"),uniacid:e.$uniacid},success:function(a){var i=a.data.data;0==i?t.showModal({title:"提示",content:"保存成功, 增加积分与抽奖次数!",confirmText:"去抽奖",success:function(t){t.confirm?e.prizes():t.cancel}}):1==i?t.showModal({title:"提示",content:"保存成功, 但积分增加与抽奖次数都已达到达每日上限!",confirmText:"去抽奖",success:function(t){t.confirm?e.prizes():t.cancel}}):2==i?t.showModal({title:"提示",content:"保存成功, 积分增加已达到每日上限,继续保存可增加抽奖次数!",confirmText:"去抽奖",success:function(t){t.confirm?e.prizes():t.cancel}}):3==i?t.showModal({title:"提示",content:"保存成功, 抽奖次数已达到每日上限,继续保存可增加积分!!",confirmText:"去抽奖",success:function(t){t.confirm?e.prizes():t.cancel}}):10==i?t.showModal({title:"提示",content:"该员工已保存过了!",confirmText:"去抽奖",success:function(t){t.confirm?e.prizes():t.cancel}}):11==i?t.showModal({title:"提示",content:"您已成功保存该员工!",confirmText:"去抽奖",success:function(t){t.confirm?e.prizes():t.cancel}}):12==i&&t.showModal({title:"提示",content:"保存成功!",success:function(t){t.confirm||t.cancel}})}})}})},playvoice:function(a){var e=this,i=a.currentTarget.dataset.text,n=e.voice;""==n?t.showModal({title:"提示",content:"该员工还没有语音简介"}):0==i?(e.audioPlay(),e.status=1,e.st=2,e.sy="music-on",e.autovoice=1):1==i&&(e.audioPause(),e.status=0,e.st=10,e.sy="",e.autovoice=0)},prizes:function(){var a=this;t.request({url:a.$baseurl+"doPagetoPrizes",data:{uniacid:a.$uniacid},success:function(a){var e=a.data.data;-1!=e?t.navigateTo({url:"/pagesShake/index/index?id="+e}):t.showModal({title:"提示",content:"当前小程序没有抽奖活动!"})}})},addzan:function(a){if(!this.getSuid())return!1;var e=this,i=a.currentTarget.dataset.text;t.request({url:e.$baseurl+"doPagestaffzan",data:{id:e.id,iszan:i,suid:t.getStorageSync("suid"),uniacid:e.$uniacid},success:function(a){var i=a.data.data.result;if(1==i){if(e.iszan=1,e.zans=1,e.zan=a.data.data.zan,e.zan>9999){var n=(e.zan/1e4).toFixed(1)+"W";e.zan=n}t.showToast({title:"点赞成功"})}else{if(e.iszan=0,e.zans="",e.zan=a.data.data.zan,e.zan>9999){var s=(e.zan/1e4).toFixed(1)+"W";e.zan=s}t.showToast({title:"取消赞成功"})}}})},share111:function(){var t=this;t.share=1},share_close:function(){var t=this;t.share=0,this.shareimg=0},audioPlay:function(){var a=this,e=a.voice;""==e?t.showModal({title:"提示",content:"该员工还没有语音简介"}):(a.autovoice=1,a.st=2,a.sy="music-on",a.status=1,o.src=a.voice,o.play(),o.onPlay(function(t){o.onTimeUpdate(function(t){var e=o.duration,i=parseInt(e/60);i<10&&(i="0"+i);var n=parseInt(e-60*i);n<10&&(n="0"+n);var s=o.currentTime,r=parseInt(s/60);r<10&&(r="0"+r);var c=parseInt(s-60*r);c<10&&(c="0"+c),a.duration=100*o.duration.toFixed(2),a.curTimeVal=100*o.currentTime.toFixed(2),a.durationDay=i+":"+n,a.curTimeValDay=r+":"+c}),o.onEnded(function(){a.setStopState(a),a.autovoice=0,a.st=10,a.sy="",a.status=0})}))},audioPause:function(){this.autovoice=0,this.st=10,this.sy="",this.status=0,o.pause()},slideBar:function(t){var a=this,e=t.detail.value;a.curTimeVal=e/100,o.seek(a.curTimeVal)},updateTime:function(t){o.onTimeUpdate(function(a){var e=o.duration,i=parseInt(e/60);i<10&&(i="0"+i);var n=parseInt(e-60*i);n<10&&(n="0"+n);var s=o.currentTime,r=parseInt(s/60);r<10&&(r="0"+r);var c=parseInt(s-60*r);c<10&&(c="0"+c),t.duration=100*o.duration.toFixed(2),t.curTimeVal=100*o.currentTime.toFixed(2),t.durationDay=i+":"+n,t.curTimeValDay=r+":"+c}),o.duration.toFixed(2)-o.currentTime.toFixed(2)<=0&&t.setStopState(t),o.onEnded(function(){t.setStopState(t)})},setStopState:function(t){t.curTimeVal=0,o.stop()},hide_info_block:function(){var t=this.hide_info;t=0==t?1:0,this.hide_info=t},closeShare:function(){this.shareimg=0},saveImg:function(){var a=this;t.getImageInfo({src:a.shareimg_url,success:function(e){t.saveImageToPhotosAlbum({filePath:e.path,success:function(){t.showToast({title:"保存成功！",icon:"none"}),a.shareimg=0,a.share=0}})}})}}};a.default=r}).call(this,e("5486")["default"])},"521d":function(t,a,e){"use strict";e.r(a);var i=e("3bf4"),n=e.n(i);for(var s in i)"default"!==s&&function(t){e.d(a,t,function(){return i[t]})}(s);a["default"]=n.a},9420:function(t,a,e){"use strict";(function(t){e("d28f");i(e("66fd"));var a=i(e("e2d4"));function i(t){return t&&t.__esModule?t:{default:t}}t(a.default)}).call(this,e("5486")["createPage"])},"9b76":function(t,a,e){"use strict";var i=e("d59a"),n=e.n(i);n.a},bf6f:function(t,a,e){"use strict";var i={auth:()=>Promise.all([e.e("common/vendor"),e.e("components/auth/auth")]).then(e.bind(null,"a32a")),bindPhone:()=>Promise.all([e.e("common/vendor"),e.e("components/bindPhone/bindPhone")]).then(e.bind(null,"9bb9")),myfooter:()=>e.e("components/myfooter/myfooter").then(e.bind(null,"6bab"))},n=function(){var t=this,a=t.$createElement;t._self._c},s=[];e.d(a,"b",function(){return n}),e.d(a,"c",function(){return s}),e.d(a,"a",function(){return i})},d59a:function(t,a,e){},e2d4:function(t,a,e){"use strict";e.r(a);var i=e("bf6f"),n=e("521d");for(var s in n)"default"!==s&&function(t){e.d(a,t,function(){return n[t]})}(s);e("9b76");var o,r=e("f0c5"),c=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);a["default"]=c.exports}},[["9420","common/runtime","common/vendor"]]]);