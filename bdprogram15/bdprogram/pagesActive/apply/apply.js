(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesActive/apply/apply"],{"0f80":function(t,e,a){"use strict";(function(t){a("d28f");n(a("66fd"));var e=n(a("17e5"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("5486")["createPage"])},"17e5":function(t,e,a){"use strict";a.r(e);var n=a("9d9f"),i=a("2c39");for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);a("33a8");var r,o=a("f0c5"),u=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],r);e["default"]=u.exports},"2c39":function(t,e,a){"use strict";a.r(e);var n=a("95bd"),i=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);e["default"]=i.a},"33a8":function(t,e,a){"use strict";var n=a("83eb"),i=a.n(n);i.a},"83eb":function(t,e,a){},"95bd":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a("88e4"),i={data:function(){return{$imgurl:this.$imgurl,aid:0,forminfo:[],disabled:!1,username:"",tel:"",pd_val:[],ttcxs:"",arrs:[],pagedata:[],formset:0,xuanz:0,isover:0,formdescs:"",wxmobile:"",baseinfo:"",pro_tel:"",myname:"",mymobile:"",myaddress:"",scan_res:"",thumb:"",source:""}},onPullDownRefresh:function(){var e=this;e.getForms(),t.stopPullDownRefresh()},onLoad:function(e){var a=this;this.source=t.getStorageSync("source"),t.setNavigationBarTitle({title:"活动报名"}),this._baseMin(this);var i=0;e&&(i=e.aid,this.aid=i);e.thumb&&(e.thumb,this.thumb=e.thumb);var s=0;e.fxsid&&(s=e.fxsid,this.fxsid=e.fxsid),n.bdLogin(s,function(){a.getForms()})},methods:{getForms:function(){var e=this,a=this.aid;0==a&&t.showModal({title:"提示",content:"请先选择报名活动",showCancel:!1,success:function(e){t.request({url:"/pagesActive/index/index"})}}),t.request({url:this.$baseurl+"doPageGetForms",data:{uniacid:this.$uniacid,aid:a},success:function(t){null!=t.data.data&&(e.pagedata=t.data.data.cons,e.formset=t.data.data.id)}})},userNameInput:function(t){this.username=t.detail.value},userTelInput:function(t){this.tel=t.detail.value},bindInputChange:function(t){var e=this,a=t.detail.value,n=t.currentTarget.dataset.index,i=e.pagedata;i[n].val=a,e.pagedata=i},bindPickerChange:function(t){var e=this,a=t.detail.value,n=t.currentTarget.dataset.index,i=e.pagedata,s=i[n].tp_text,r=s[a];i[n].val=r,e.pagedata=i},bindDateChange:function(t){var e=this,a=t.detail.value,n=t.currentTarget.dataset.index,i=e.pagedata;i[n].val=a,e.pagedata=i},bindTimeChange:function(t){var e=this,a=t.detail.value,n=t.currentTarget.dataset.index,i=e.pagedata;i[n].val=a,e.pagedata=i},checkboxChange:function(t){var e=this,a=t.detail.value,n=t.currentTarget.dataset.index,i=e.pagedata;i[n].val=a,e.pagedata=i},radioChange:function(t){var e=this,a=t.detail.value,n=t.currentTarget.dataset.index,i=e.pagedata;i[n].val=a,e.pagedata=i},weixinadd:function(){var e=this;t.chooseAddress({success:function(t){for(var a=t.provinceName+" "+t.cityName+" "+t.countyName+" "+t.detailInfo,n=t.userName,i=t.telNumber,s=e.pagedata,r=0;r<s.length;r++)0==s[r].type&&2==s[r].tp_text[0].yval&&(s[r].val=n),0==s[r].type&&3==s[r].tp_text[0].yval&&(s[r].val=i),0==s[r].type&&4==s[r].tp_text[0].yval&&(s[r].val=a);e.myname=n,e.mymobile=i,e.myaddress=a,e.pagedata=s},fail:function(e){t.getSetting({success:function(e){e.authSetting["scope.address"]||t.openSetting({success:function(t){}})}})}})},choiceimg1111:function(e){var a=this,n=0,i=a.zhixin,s=e.currentTarget.dataset.index,r=a.pagedata,o=r[s].val,u=r[s].tp_text[0];o?n=o.length:(n=0,o=[]);var c=u-n,d=a.$baseurl+"wxupimg";a.pd_val;t.chooseImage({count:c,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){i=!0,a.zhixin=i,t.showLoading({title:"图片上传中"});var n=e.tempFilePaths;o=o.concat(n),r[s].val=o,a.pagedata=r;var u=0,c=n.length,l=function e(){t.uploadFile({url:d,filePath:n[u],name:"file",success:function(n){r[s].z_val.push(n.data),a.pagedata=r,u++,u<c?e():(i=!1,a.zhixin=i,t.hideLoading())}})};l()}})},delimg:function(t){var e=this,a=t.currentTarget.dataset.index,n=t.currentTarget.dataset.id,i=e.pagedata,s=i[a].val;s.splice(n,1);var r=s.length;0==r&&(s=""),i[a].val=s,e.pagedata=i},onPreviewImage:function(t){app.util.showImage(t)},namexz:function(t){for(var e=this,a=t.currentTarget.dataset.index,n=e.pagedata,i=n[a],s=[],r=0;r<i.tp_text.length;r++){var o={};o["keys"]=i.tp_text[r],o["val"]=1,s.push(o)}e.ttcxs=1,e.formindex=a,e.xx=s,e.xuanz=0,e.lixuanz=-1,e.riqi()},riqi:function(){for(var t=this,e=new Date,a=new Date(e.getTime()),n=a.getFullYear(),i=a.getMonth()+1,s=a.getDate(),r=n+"-"+i+"-"+s,o=t.xx,u=0;u<o.length;u++)o[u].val=1;t.xx=o,t.gettoday(r);var c=[],d=[],l=new Date;for(u=0;u<5;u++){var f=new Date(l.getTime()+24*u*3600*1e3),g=f.getFullYear(),h=f.getMonth()+1,v=f.getDate(),p=h+"月"+v+"日",m=g+"-"+h+"-"+v;c.push(p),d.push(m)}t.arrs=c,t.fallarrs=d,t.today=r},xuanzd:function(t){for(var e=this,a=t.currentTarget.dataset.index,n=e.fallarrs,i=n[a],s=e.xx,r=0;r<s.length;r++)s[r].val=1;e.xuanz=a,e.today=i,e.lixuanz=-1,e.xx=s,e.gettoday(i)},goux:function(t){var e=this,a=t.currentTarget.dataset.index;e.lixuanz=a},gettoday:function(e){var a=this,n=a.id,i="showArt",s=a.formindex,r=a.xx;t.request({url:a.$baseurl+"doPageDuzhan",data:{id:n,types:i,days:e,pagedatekey:s,uniacid:a.$uniacid},header:{"content-type":"application/json"},success:function(t){for(var e=t.data.data,n=0;n<e.length;n++)r[e[n]].val=2;var i=0;e.length==r.length&&(i=1),a.xx=r,a.isover=i}})},save_nb:function(){var e=this,a=e.today,n=e.xx,i=e.lixuanz;if(-1==i)return t.showModal({title:"提现",content:"请选择预约的选项",showCancel:!1}),!1;var s=n[i].keys.yval,r="已选择"+a+"，"+s,o=e.pagedata,u=e.formindex;o[u].val=r,o[u].days=a,o[u].indexkey=u,o[u].xuanx=i,e.ttcxs=0,e.pagedata=o},quxiao:function(){var t=this;t.ttcxs=0},scans:function(){var e=this,a=e.pagedata;t.scanCode({success:function(t){for(var n=t.result,i=0;i<a.length;i++)0==a[i].type&&6==a[i].tp_text[0].yval&&(a[i].val=n);e.scan_res=n,e.pagedata=a}})},scan_input:function(t){for(var e=this,a=e.pagedata,n=t.detail.value,i=0;i<a.length;i++)0==a[i].type&&6==a[i].tp_text[0].yval&&(a[i].val=n);e.scan_res=n,e.pagedata=a},formSubmit:function(e){var a=this,n=a.aid,i=a.username;if(""==i)return t.showModal({title:"提示",content:"姓名为必填项！",showCancel:!1}),!1;var s=a.tel;if(""==s)return t.showModal({title:"提示",content:"手机号为必填项！",showCancel:!1}),!1;var r=/^1[3456789]{1}\d{9}$/;if(!r.test(s))return t.showModal({title:"提醒",content:"请您输入正确的手机号码",showCancel:!1}),!1;for(var o=!0,u=a.pagedata,c=0;c<u.length;c++)if(1==u[c].ismust)if(5==u[c].type){if(""==u[c].z_val)return o=!1,t.showModal({title:"提醒",content:u[c].name+"为必填项！",showCancel:!1}),!1}else if(""==u[c].val)return o=!1,t.showModal({title:"提醒",content:u[c].name+"为必填项！",showCancel:!1}),!1;o&&t.request({url:a.$baseurl+"doPageActiveApplySub",data:{id:n,pagedata:JSON.stringify(u),uniacid:a.$uniacid,aid:a.aid,suid:t.getStorageSync("suid"),source:a.source,formset:a.formset,username:a.username,tel:a.tel},cachetime:"30",success:function(e){1==e.data?t.showModal({title:"提示",content:"已提交成功",showCancel:!1,success:function(e){t.redirectTo({url:"/pagesActive/apply_collect/apply_collect"})}}):t.showModal({title:"提示",content:"提交失败，请重新提交",showCancel:!1,success:function(t){}})}})},refreshSessionkey:function(){var e=this;t.login({success:function(a){t.request({url:e.$baseurl+"doPagegetNewSessionkey",data:{uniacid:e.$uniacid,code:a.code},success:function(t){e.newSessionKey=t.data.data}})}})},getPhoneNumber:function(e){var a=this,n=e.detail.iv,i=e.detail.encryptedData;"getPhoneNumber:ok"==e.detail.errMsg?t.checkSession({success:function(){t.request({url:a.$baseurl+"doPagejiemiNew",data:{uniacid:a.$uniacid,newSessionKey:a.newSessionKey,iv:n,encryptedData:i},success:function(e){if(e.data.data){for(var n=a.pagedata,i=0;i<n.length;i++)0==n[i].type&&5==n[i].tp_text[0].yval&&(n[i].val=e.data.data);a.wxmobile=e.data.data,a.pagedata=n}else t.showModal({title:"提示",content:"sessionKey已过期，请下拉刷新！"})},fail:function(t){}})},fail:function(){t.showModal({title:"提示",content:"sessionKey已过期，请下拉刷新！"})}}):t.showModal({title:"提示",content:"请先授权获取您的手机号！",showCancel:!1})}}};e.default=i}).call(this,a("5486")["default"])},"9d9f":function(t,e,a){"use strict";var n,i=function(){var t=this,e=t.$createElement;t._self._c},s=[];a.d(e,"b",function(){return i}),a.d(e,"c",function(){return s}),a.d(e,"a",function(){return n})}},[["0f80","common/runtime","common/vendor"]]]);