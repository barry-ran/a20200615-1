(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/catelist/catelist"],{"0740":function(t,e,i){},"3fb5":function(t,e,i){"use strict";i.r(e);var a=i("cdb4"),o=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=o.a},"8d09":function(t,e,i){"use strict";var a=i("0740"),o=i.n(a);o.a},bb7e:function(t,e,i){"use strict";var a={auth:()=>Promise.all([i.e("common/vendor"),i.e("components/auth/auth")]).then(i.bind(null,"a32a")),bindPhone:()=>Promise.all([i.e("common/vendor"),i.e("components/bindPhone/bindPhone")]).then(i.bind(null,"9bb9")),myfooter:()=>i.e("components/myfooter/myfooter").then(i.bind(null,"6bab"))},o=function(){var t=this,e=t.$createElement;t._self._c},s=[];i.d(e,"b",function(){return o}),i.d(e,"c",function(){return s}),i.d(e,"a",function(){return a})},c14e:function(t,e,i){"use strict";i.r(e);var a=i("bb7e"),o=i("3fb5");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);i("8d09");var n,r=i("f0c5"),d=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],n);e["default"]=d.exports},cdb4:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i("88e4"),o=function(){return i.e("components/plugins/list_pro_td").then(i.bind(null,"63f4"))},s=function(){return i.e("components/plugins/list_pro").then(i.bind(null,"4fa2"))},n={components:{list_pro_td:o,list_pro:s},data:function(){return{$host:this.$host,$imgurl:this.$imgurl,page:1,minHeight:180,morePro:!0,ProductsList:[],baseinfo:{},orderOrBusiness:"order",block:!1,logs:[],goodsH:0,scrollToGoodsView:0,toView:"",toViewType:"",GOODVIEWID:"catGood_",animation:!0,goodsNumArr:[0],shoppingCart:{},shoppingCartGoodsId:[],goodMap:{},chooseGoodArr:[],totalNum:0,totalPay:0,showShopCart:!1,fromClickScroll:!1,timeStart:"",timeEnd:"",hideCount:!0,count:0,needAni:!1,hide_good_box:!0,url:"",protype:1,heighthave:0,from_top:0,cid:0,cateslide:[],cate_list:"",chessRoomDetail:{},catHighLightIndex:0,catList:{},towlist:[],page_signs:"/pages/catelist/catelist?type=showProMore",type:"showProMore",searchtitle:"",slide_is:0,slides:"",swiperCurrent:0,catestyle:0,prolists:"",prolists_length:0,prodataid:0,sub_cate_name:"",catfour:0,fourlist:[],guige:0,pid:0,proinfo:"",gzjson:"",grouparr:"",num:1,newstr:"",use_more:0,discounts:0,gwc:"",gm:"",products:"",needAuth:!1,needBind:!1,tobuy:1,baseproinfo:"",top_cid:0,sub_cid:0,sub_cate:[],sub_cate_length:0,vip_show:1,top_stop:1,is_vipBox:0,vip_name:"",to_login:0}},onLoad:function(e){var i=this;this.cid=e.cid,this.cid>0&&(this.top_cid=this.cid,this.page_signs="/pages/catelist/catelist?cid="+this.cid),this._baseMin(this);var o=0;e.fxsid&&(o=e.fxsid),this.fxsid=o,e.type&&(this.type=e.type);var s=t.getStorageSync("suid");s?a.bdLogin(o,function(){i.getList(),i._getSuperUserInfo(i)}):this.getList()},onPullDownRefresh:function(){this.page=1,this.sub_cid=0,this.top_cid=this.cid,this.getList(),t.stopPullDownRefresh()},methods:{scrollHandler:function(){this.onReachBottoms()},onReachBottoms:function(){var e=this;if(this.morePro){var i=e.page+1;e.top_cid;t.request({url:e.$host+"/api/mainwxapp/doPagelistAllPic",data:{page:i,type:e.type,uniacid:e.$uniacid,top_cid:e.top_cid,sub_cid:e.sub_cid,suid:t.getStorageSync("suid")},success:function(a){if(""!=a.data.data.prolists){if(e.prolists=e.prolists.concat(a.data.data.prolists),e.page=i,e.top_stop=a.data.data.top_stop,2==a.data.data.vip_show){e.vip_show=2,e.is_vipBox=1,e.vip_name=a.data.data.vip_name;var o=t.getStorageSync("suid");return o||(e.to_login=1),!1}e.vip_show=1}else e.morePro=!1}})}},toprodetail:function(e){var i=e.currentTarget.dataset.id;if("showProMore"==this.type)var a="/pages/showProMore/showProMore?id="+i;else if("flashSale"==this.type)a="/pagesFlashSale/showPro/showPro?id="+i;else a="/pagesReserve/proDetail/proDetail?id="+i;t.navigateTo({url:a})},cell:function(){this.needAuth=!1},closeAuth:function(){this.needAuth=!1,this.needBind=!0},closeBind:function(){console.log("closeBind"),this.needBind=!1,this.checkApply()},getSuid:function(){var e=t.getStorageSync("suid");if(e)return!0;var i="";return i=t.getStorageSync("baidu_userinfo"),i?this.needBind=!0:this.needAuth=!0,!1},checkvip:function(e){var i=this,a=(t.getStorageSync("openid"),t.getStorageSync("suid"));t.request({url:i.$host+"/api/MainWxapp/doPagecheckvip",data:{uniacid:i.$uniacid,kwd:"duo",suid:a,id:i.pid,gz:1},success:function(a){if(!1===a.data.data)return i.needvip=!0,t.showModal({title:"进入失败",content:"使用本功能需先开通vip!",showCancel:!1,success:function(e){e.confirm&&t.redirectTo({url:"/pages/register/register"})}}),!1;if(a.data.data.needgrade>0)if(i.needvip=!0,a.data.data.grade>0)if(a.data.data.grade<a.data.data.needgrade)t.showModal({title:"进入失败",content:"使用本功能需成为"+a.data.data.vipname+"等级会员,请先开通会员等级!",showCancel:!1,success:function(e){e.confirm&&t.redirectTo({url:"/pages/open1/open1"})}});else{var o=e.currentTarget.dataset.type;"gwc"==o?i.gwcget():"gm"==o&&i.gmget()}else if(a.data.data.grade<a.data.data.needgrade)t.showModal({title:"进入失败",content:"使用本功能需成为"+a.data.data.vipname+"("+a.data.data.needgrade+"级)以上等级会员,请先开通会员后再升级会员等级!",showCancel:!1,success:function(e){e.confirm&&t.redirectTo({url:"/pages/register/register"})}});else{if(1==i.use_more)o=e.currentTarget.dataset.type;else o=i.buy_type;"gwc"==o?i.gwcget():"gm"==o&&i.gmget()}else{o=e.currentTarget.dataset.type;"gwc"==o?i.gwcget():"gm"==o&&i.gmget()}},fail:function(t){}})},swiperChange:function(t){this.swiperCurrent=t.target.current,this.swiperCurrent=t.detail.current},handleTap:function(t){var e=this,i=t.currentTarget.id.slice(1);i&&(e.cid=i,e.page=1,e.from_top=1,e.getList(i))},getList:function(){var e=this;e.page;t.request({url:e.$host+"/api/MainWxapp/doPagelistAllPic",data:{uniacid:e.$uniacid,type:e.type,top_cid:e.top_cid,sub_cid:e.sub_cid,suid:t.getStorageSync("suid")},success:function(i){var a=t.getStorageSync("systemInfo");if(e.goodsH=a.windowHeight-55,e.slide_is=i.data.data.slide_is,e.slides=i.data.data.slides,e.catestyle=i.data.data.catestyle,e.catList=i.data.data.top_cate,e.top_cid=i.data.data.top_cid,e.sub_cate=i.data.data.sub_cate,e.sub_cate_length=i.data.data.sub_cate.length,e.sub_cid=i.data.data.sub_cid,e.prolists=i.data.data.prolists,e.prolists_length=e.prolists.length,e.sub_cate_name=i.data.data.sub_cate_name,e.prodataid=0,e.top_stop=i.data.data.top_stop,2==i.data.data.vip_show){e.vip_show=2,e.is_vipBox=1,e.vip_name=i.data.data.vip_name;var o=t.getStorageSync("suid");return o||(e.to_login=1),!1}e.vip_show=1},fail:function(t){console.log(t)}})},getList1:function(){var e=this;e.page;t.request({url:e.$host+"/api/MainWxapp/doPagelistAllPic",data:{uniacid:e.$uniacid,type:e.type,top_cid:e.top_cid,sub_cid:e.sub_cid,suid:t.getStorageSync("suid")},success:function(i){var a=t.getStorageSync("systemInfo");if(e.goodsH=a.windowHeight-55,e.slide_is=i.data.data.slide_is,e.slides=i.data.data.slides,e.catestyle=i.data.data.catestyle,e.catList=i.data.data.top_cate,e.top_cid=i.data.data.top_cid,e.sub_cate=i.data.data.sub_cate,e.sub_cate_length=i.data.data.sub_cate.length,e.sub_cid=i.data.data.sub_cid,e.prolists=i.data.data.prolists,e.prolists_length=e.prolists.length,e.sub_cate_name=i.data.data.sub_cate_name,e.top_stop=i.data.data.top_stop,2==i.data.data.vip_show){e.vip_show=2,e.is_vipBox=1,e.vip_name=i.data.data.vip_name;var o=t.getStorageSync("suid");return o||(e.to_login=1),!1}e.vip_show=1},fail:function(t){console.log(t)}})},swiperLoad:function(e){var i=this;t.getSystemInfo({success:function(t){var a=e.detail.width,o=e.detail.height,s=a/o,n=t.windowWidth/s;i.heighthave||(i.minHeight=n,i.heighthave=1)}})},goodsViewScrollFn:function(t){this.getIndexFromHArr(t.detail.scrollTop)},getIndexFromHArr:function(t){for(var e=0;e<this.goodsNumArr.length;e++){var i=t-40*e;i>=this.goodsNumArr[e]&&i<this.goodsNumArr[e+1]&&(this.fromClickScroll||(this.catHighLightIndex=e))}this.fromClickScroll=!1},catClickFn:function(t){var e=t.currentTarget.dataset.id,i=this.catestyle;1==i||2==i?e!=this.top_cid&&(this.top_cid=e,this.sub_cid=0):this.sub_cid=e,this.page=1,this.morePro=!0,this.getList()},catClickright:function(t){var e=t.currentTarget.dataset.id,i=this.sub_cate[e]["id"];i!=this.sub_cid&&(this.prodataid=e,this.sub_cid=i,this.page=1,this.morePro=!0,this.getList1())},getProModel:function(){var e=this;t.request({url:e.$host+"/api/MainWxapp/doPagegetProModel",data:{uniacid:e.$uniacid,suid:t.getStorageSync("suid"),pid:e.pid},success:function(t){e.num=1,e.proinfo=t.data.data,e.use_more=t.data.data.use_more,e.newstr=t.data.data.arr_selected,e.discounts=t.data.data.discount,e.gzjson=t.data.data.grouparr_val,e.grouparr=t.data.data.grouparr;var i=e.grouparr;if(i)for(var a=0;a<i.length;a++)i[a]+"、";else e.newstr="";e.guige=1},fail:function(t){console.log(t)}})},guige_block:function(t){this.pid=t.currentTarget.dataset.id,this.getProModel()},guige_hidden:function(){this.guige=0},getproinfo:function(){for(var e=this,i=e.gzjson,a=e.grouparr,o="",s="",n=e.pid,r=0;r<a.length;r++){var d=i[a[r]]["val"],c=i[a[r]]["ck"];o+=d[c]+"######",s+=d[c]+";"}var u=o.substring(0,o.length-6);s=s.substring(0,s.length-1);t.request({url:e.$host+"/api/MainWxapp/doPageGuigeInfo",data:{uniacid:e.$uniacid,id:n,str:u},success:function(i){var a=i.data.data;a["proinfo"]["discount_price"]=0,e.discounts>0&&(a["proinfo"]["discount_price"]=(a["proinfo"]["price"]*e.discounts*.1).toFixed(2)<.01?.01:(a["proinfo"]["price"]*e.discounts*.1).toFixed(2)),e.proinfo=a["proinfo"],e.baseproinfo=a["baseinfo"],e.newstr=s,1==a["baseinfo"]["is_sale"]&&t.showModal({title:"提示",content:"该商品已下架,请选择其他商品",showCancel:!1,success:function(){t.redirectTo({url:"/pages/index/index"})}})},fail:function(t){console.log(t)}})},changepro:function(t){var e=this,i=t.target.dataset.id,a=(e.grouparr,t.target.dataset.index),o=e.gzjson;o[i]["ck"]=a,e.gzjson=o,e.tobuy=0,e.getproinfo()},num_add:function(){var e=this.proinfo,i=e.kc,a=this.num;a+=1,a>i&&(t.showModal({title:"提醒",content:"您的购买数量超过了库存！",showCancel:!1}),a--),this.num=a},num_jian:function(){var t=this.num;1==t?this.num=1:(t-=1,this.num=t)},gmget:function(){if(this.getSuid()){var e=this,i=e.tobuy,a=e.num;if(1==i){var o=e.proinfo;console.log(111)}else{console.log(111);o=e.proinfo;var s=e.baseproinfo;s["id"]=o["id"],s["kc"]=o["kc"],o=s}if(1==o.is_sale&&t.showModal({title:"提示",content:"该商品已下架,请选择其他商品",showCancel:!1,success:function(){t.redirectTo({url:"/pages/index/index"})}}),0==o["kc"])return t.showModal({title:"提醒",content:"您来晚了，已经卖完了！",showCancel:!1}),!1;if(1==o.use_more)var n=e.pid+"|"+o.id+"|"+a;else n=e.pid+"|-1|"+a;var r=[];r.push(n),t.setStorage({key:"buydata",data:r}),t.navigateTo({url:"/pages/order_down/order_down?discounts="+e.discounts+"&stores="+e.stores})}},gwcget:function(){if(this.getSuid()){var e=this,i=e.proinfo,a=e.num,o=(t.getStorageSync("openid"),t.getStorageSync("suid"),e.baseproinfo);if(1==o.is_sale&&t.showModal({title:"提示",content:"该商品已下架,请选择其他商品",showCancel:!1,success:function(){t.redirectTo({url:"/pages/index/index"})}}),0==i["kc"])return t.showModal({title:"提醒",content:"您来晚了，已经卖完了！",showCancel:!1}),!1;t.request({url:e.$host+"/api/MainWxapp/dopagegwcadd",data:{uniacid:this.$uniacid,suid:t.getStorageSync("suid"),id:i.id,pid:e.pid,prokc:a},success:function(i){t.showToast({title:"加入成功",icon:"success",duration:2e3,success:function(){e.guige_hidden()}})}})}},tabChange:function(t){this.orderOrBusiness=t.currentTarget.dataset.id},tiaozhuang:function(e){var i=e.currentTarget.dataset.id,a=(e.currentTarget.dataset.types,e.currentTarget.dataset.ismore,"");a="/pages/checkPro/checkPro?cid="+i+"&type="+this.type+"&from_top=1",t.navigateTo({url:a})},serachInput:function(t){this.searchtitle=t.detail.value},search:function(){var e=this.searchtitle;e?"showProMore"==this.type?t.navigateTo({url:"/pages/checkPro/checkPro?title="+e+"&type="+this.type}):t.navigateTo({url:"/pages/search/search?title="+e+"&type="+this.type}):t.showModal({title:"提示",content:"请输入搜索内容！",showCancel:!1})},closeVipTip:function(){var t=this;t.is_vipBox=0},toBeVip:function(){var e="/pages/equity_show/equity_show";t.navigateTo({url:e})},toBeVipUp:function(){var e="/pages/open1/open1";t.navigateTo({url:e})},toLogin:function(){var e="/pages/usercenter/usercenter";t.navigateTo({url:e})}}};e.default=n}).call(this,i("5486")["default"])},ed82:function(t,e,i){"use strict";(function(t){i("d28f");a(i("66fd"));var e=a(i("c14e"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("5486")["createPage"])}},[["ed82","common/runtime","common/vendor"]]]);