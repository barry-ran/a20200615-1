(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/orderDetails/orderDetails"],{"0f22":function(t,e,s){"use strict";(function(t){s("d28f");i(s("66fd"));var e=i(s("ca96"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,s("5486")["createPage"])},"22be":function(t,e,s){"use strict";s.r(e);var i=s("573c"),a=s.n(i);for(var o in i)"default"!==o&&function(t){s.d(e,t,function(){return i[t]})}(o);e["default"]=a.a},"573c":function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s("88e4"),a={data:function(){return{$imgurl:this.$imgurl,baseinfo:"",orderdetails:"",orderadmin:"",orderstore:"",hxmm_list:[{val:"",fs:!0},{val:"",fs:!1},{val:"",fs:!1},{val:"",fs:!1},{val:"",fs:!1},{val:"",fs:!1}],is_focus:!1,hx_choose:0,hx_ewm:"",showhx:0,hxmm:"",showPay:0,choosepayf:0,mymoney:0,mymoney_pay:1,pay_type:1,pay_money:0,is_submit:1,h5_wxpay:0,h5_alipay:0,suid:0,source:"",order_id:"",can_apply:!1}},onLoad:function(e){var s=this;this._baseMin(this);var a=0;e.fxsid&&(a=e.fxsid),this.fxsid=a;var o=0;e.order_id&&(o=e.order_id),this.order_id=o;var r=t.getStorageSync("suid");r&&(this.suid=r);var n=t.getStorageSync("source");n&&(this.source=n),i.bdLogin(a,function(){s.getorderdetails()})},onPullDownRefresh:function(){this.showhx=0,this.hxmm="",this.getorderdetails(),t.stopPullDownRefresh()},methods:{orderSale:function(e){var s=e.currentTarget.dataset.order_service_id;console.log(s),t.navigateTo({url:"/pages/orderAftersale/orderAftersale?order_service_id="+s})},makephone:function(e){var s=e.currentTarget.dataset.tel;t.makePhoneCall({phoneNumber:s})},getorderdetails:function(){var e=this;t.request({url:this.$host+"/api/mainwxapp/mainShopOrderDetails",data:{uniacid:this.$uniacid,suid:this.suid,order_id:this.order_id},success:function(t){console.log(t.data.data),e.orderdetails=t.data.data.order,e.orderadmin=t.data.data.order.address_info,e.orderstore=t.data.data.order.self_taking_info,e.mymoney=t.data.data.money,e.can_apply=e.orderdetails.can_apply},fail:function(t){console.log(t)}})},copy:function(e){var s=e.currentTarget.dataset.text;console.log(s),t.setClipboardData({data:s,success:function(e){t.getClipboardData({success:function(t){}}),t.showToast({title:"复制成功",duration:2e3})}})},paybox:function(){var t=this.mymoney,e=this.orderdetails,s=this.orderdetails.is_change_price,i=0;i=1==s?e["change_price"]:e["pay_money"],this.pay_money=i,i>t&&(this.mymoney_pay=2,this.pay_type=2,this.choosepayf=4),0==this.showPay&&(this.showPay=1)},payboxclose:function(){1==this.showPay&&(this.showPay=0)},choosepay:function(t){this.pay_type=t.currentTarget.dataset.pay_type,this.choosepayf=t.currentTarget.dataset.type},pay:function(){var e=this.is_submit;if(2==e)return!1;this.is_submit=2;this.$uniacid;var s=this.suid,i=this.source,a=this.pay_type,o=this.pay_money,r=this.order_id;1==a?t.request({url:this.$baseurl+"payCallBackNotify",data:{uniacid:this.$uniacid,order_id:r,suid:s,payprice:o,types:"mainShop",flag:0,fxsid:this.fxsid,source:i,pay_to:0},success:function(e){0!=e.data.data.error?t.showToast({title:e.data.data.msg,icon:"none",mask:!0,success:function(){setTimeout(function(){t.redirectTo({url:"/pages/main_shop_order/main_shop_order"})},1e3)}}):t.showToast({title:"购买成功！",icon:"success",mask:!0,success:function(){setTimeout(function(){t.redirectTo({url:"/pages/main_shop_order/main_shop_order"})},1e3)}})}}):this._baidupay(this,o,"mainShop",r,"/pages/main_shop_order/main_shop_order")},cancelOrderNoPay:function(){var e=this;t.showModal({title:"提示",content:"该操作不可逆，是否确认取消",success:function(s){if(s.confirm){var i=e.order_id;t.request({url:e.$host+"/api/mainwxapp/doPageCancelOrderNoPay",data:{uniacid:e.$uniacid,suid:e.suid,order_id:i},success:function(s){0==s.data.data.error&&t.showModal({title:"提示",content:"取消成功",showCancel:!1,success:function(t){e.getorderdetails()}})}})}}})},deleteOrder:function(){var e=this,s=this.order_id;t.showModal({title:"提示",content:"该操作不可逆，是否删除",success:function(i){i.confirm&&t.request({url:e.$host+"/api/mainwxapp/deleteOrder",data:{uniacid:e.$uniacid,suid:e.suid,order_id:s},success:function(e){0==e.data.data.error?t.showModal({title:"提示",content:"删除成功",showCancel:!1,success:function(e){t.redirectTo({url:"/pages/main_shop_order/main_shop_order"})}}):t.showModal({title:"提示",content:e.data.data.msg,showCancel:!1})}})}})},toapplyall:function(e){var s=e.currentTarget.dataset.type,i="/pages/applyAfterSales/applyAfterSales?";if(1==s){var a=this.order_id;i=i+"order_id="+a+"&from_to=1"}else if(2==s){var o=e.currentTarget.dataset.order_item_id;i=i+"order_item_id="+o+"&from_to=2"}t.navigateTo({url:i})},qrshouh:function(e){var s=this,i=this.order_id,a=this.suid,o=this.$host,r=this.$uniacid;t.showModal({title:"提示",content:"确认收货吗？",success:function(e){e.confirm&&t.request({url:o+"/api/mainwxapp/dopageqrshouh",data:{uniacid:r,suid:a,order_id:i},success:function(e){t.showToast({title:"收货成功！",success:function(e){t.startPullDownRefresh(),s.showhx=0,s.hxmm="",s.getorderdetails(),t.stopPullDownRefresh()}})}})}})},wlinfo:function(){var e=this.orderdetails,s=e.express,i=e.express_no,a=this.order_id;null!=s&&null!=i?t.navigateTo({url:"/pagesOther/logistics_state/logistics_state?kuaidi="+s+"&kuaidihao="+i+"&order_id="+a}):t.navigateTo({url:"/pagesOther/logistics_information/logistics_information?order_id="+a})},hxshow:function(t){this.showhx=1},hxhide:function(){this.showhx=0,this.hxmm=""},onFocus:function(t){var e=this;e.isFocus=!0},hxmmInput:function(t){for(var e=t.target.value.length,s=0;s<this.hxmm_list.length;s++)this.hxmm_list[s].fs=!1,this.hxmm_list[s].val=t.target.value[s];e&&(this.hxmm_list[e-1].fs=!0),this.hxmm=t.target.value},gethxmima:function(){this.hx_choose=1},gethxImg:function(){var e=this;t.request({url:this.$baseurl+"doPageHxEwm",data:{uniacid:this.$uniacid,suid:this.suid,pageUrl:"mainShop",orderid:this.order_id},success:function(t){console.log(t.data),e.hx_ewm=t.data.data,e.hx_choose=2}})},hxhide1:function(){this.hx_choose=0,this.hxmm="";for(var t=0;t<this.hxmm_list.length;t++)this.hxmm_list[t].fs=!1,this.hxmm_list[t].val=""},hxmmpass:function(){var e=this;this.hxmm?t.request({url:this.$baseurl+"hxmm",data:{uniacid:this.$uniacid,suid:this.suid,order_id:this.order_id,is_more:5,hxmm:this.hxmm},success:function(s){var i=s.data.data;if(0==i){t.showModal({title:"提示",content:"核销密码不正确！",showCancel:!1}),e.hxmm="";for(var a=0;a<e.hxmm_list.length;a++)e.hxmm_list[a].fs=!1,e.hxmm_list[a].val="";console.log(e.hxmm)}else 1==i?t.showToast({title:"消费成功",icon:"success",duration:2e3,success:function(s){t.startPullDownRefresh(),e.showhx=0,e.getorderdetails(),t.stopPullDownRefresh()}}):2==i&&t.showModal({title:"提示",content:"已核销!",showCancel:!1,success:function(s){t.startPullDownRefresh(),e.showhx=0,e.getorderdetails(),t.stopPullDownRefresh()}})}}):t.showModal({title:"提示",content:"请输入核销密码！",showCancel:!1})}}};e.default=a}).call(this,s("5486")["default"])},6146:function(t,e,s){},"632a":function(t,e,s){"use strict";var i=s("6146"),a=s.n(i);a.a},"8d62":function(t,e,s){"use strict";var i,a=function(){var t=this,e=t.$createElement;t._self._c},o=[];s.d(e,"b",function(){return a}),s.d(e,"c",function(){return o}),s.d(e,"a",function(){return i})},ca96:function(t,e,s){"use strict";s.r(e);var i=s("8d62"),a=s("22be");for(var o in a)"default"!==o&&function(t){s.d(e,t,function(){return a[t]})}(o);s("632a");var r,n=s("f0c5"),d=Object(n["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);e["default"]=d.exports}},[["0f22","common/runtime","common/vendor"]]]);