(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/showProMore/showProMore"],{"0893":function(t,e,i){"use strict";(function(t){i("d28f");o(i("66fd"));var e=o(i("6d77"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("5486")["createPage"])},"49a7":function(t,e,i){},"6d77":function(t,e,i){"use strict";i.r(e);var o=i("f715"),s=i("ef61");for(var a in s)"default"!==a&&function(t){i.d(e,t,function(){return s[t]})}(a);i("b29a");var n,r=i("f0c5"),u=Object(r["a"])(s["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],n);e["default"]=u.exports},8505:function(t,e,i){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i("37b1"));function a(t){return t&&t.__esModule?t:{default:t}}var n=i("88e4"),r={data:function(){return{$imgurl:this.$imgurl,$host:this.$host,gid:"",imgUrls:[],num:1,indicatorDots:!0,autoplay:!0,interval:3e3,duration:1e3,circular:!0,sc:0,guige:0,protab:1,nowcon:"con",is_comment:0,comments:2,share:0,xzarr:[],gwccount:0,products:{price:0,kc:0,hits:0,xsl:0},fxsid:0,heighthave:0,minHeight:220,shareHome:0,vip_config:0,base_color2:"",proinfo:"",gzjson:"",datas:"",baseinfo:[],gwc:"",gm:"",baseproinfo:"",superuser:"",userid:"",pic_video:"",isplay:!1,currentSwiper:0,discounts:0,shareimg:0,shareimg_url:"",system_w:0,system_h:0,img_w:0,img_h:0,dlength:0,strgrouparr:"",buy_type:"",stores:"",needAuth:!1,needBind:!1,newstr:"",showCouponBox:0,toscrollTop:0,fiexdBoxs:0,buyuser_length:0,coupon_length:0,buy_person:[{avatar:""},{avatar:""},{avatar:""},{avatar:""},{avatar:""},{avatar:""}],vipid:""}},onLoad:function(e){var i=this;e.id&&(this.gid=e.id),this._baseMin(this);var o=0;e.fxsid&&(o=e.fxsid,t.setStorageSync("fxsid",o)),this.fxsid=o,e.userid&&(this.userid=e.userid);var s=t.getStorageSync("suid");s?n.bdLogin(o,function(){i.getPro(),i._getSuperUserInfo(i)}):this.getPro();var a=t.getStorageSync("systemInfo");this.img_w=parseInt((.65*a.windowWidth).toFixed(0)),this.img_h=parseInt((1.875*this.img_w).toFixed(0)),this.system_w=parseInt(a.windowWidth),this.system_h=parseInt(a.windowHeight)},onPageScroll:function(t){t.scrollTop>200?this.fiexdBoxs=1:this.fiexdBoxs=0},onPullDownRefresh:function(){this.getPro(),t.stopPullDownRefresh()},onShareAppMessage:function(){var e=this,i=t.getStorageSync("suid"),o=e.products,s=e.gid,a="";return a=1==e.superuser.fxs?"/pages/showProMore/showProMore?id="+s+"&userid="+i:"/pages/showProMore/showProMore?id="+s+"&userid="+i+"&fxsid="+i,console.log(a),{title:o.title,path:a,imageUrl:o.shareimg}},methods:{toTop:function(){t.pageScrollTo({scrollTop:0})},navback:function(){t.navigateBack()},toBeVip:function(){var e="/pages/equity_show/equity_show";t.navigateTo({url:e})},checkvip:function(e){var i=this,o=(t.getStorageSync("openid"),t.getStorageSync("suid"));t.request({url:i.$baseurl+"doPagecheckvip",data:{uniacid:i.$uniacid,kwd:"duo",suid:o,id:i.gid,gz:1},success:function(o){if(!1===o.data.data)return i.needvip=!0,t.showModal({title:"进入失败",content:"使用本功能需先开通vip!",showCancel:!1,success:function(e){e.confirm&&t.redirectTo({url:"/pages/register/register"})}}),!1;if(o.data.data.needgrade>0)if(i.needvip=!0,o.data.data.grade>0)if(o.data.data.grade<o.data.data.needgrade)t.showModal({title:"进入失败",content:"使用本功能需成为"+o.data.data.vipname+"("+o.data.data.needgrade+"级)以上等级会员,请先升级!",showCancel:!1,success:function(e){e.confirm&&t.redirectTo({url:"/pages/open1/open1"})}});else{var s=e.currentTarget.dataset.type;"gwc"==s?i.gwcget():"gm"==s&&i.gmget()}else if(o.data.data.grade<o.data.data.needgrade)t.showModal({title:"进入失败",content:"使用本功能需成为"+o.data.data.vipname+"("+o.data.data.needgrade+"级)以上等级会员,请先开通会员后再升级会员等级!",showCancel:!1,success:function(e){e.confirm&&t.redirectTo({url:"/pages/register/register"})}});else{s=e.currentTarget.dataset.type;"gwc"==s?i.gwcget():"gm"==s&&i.gmget()}else{s=e.currentTarget.dataset.type;"gwc"==s?i.gwcget():"gm"==s&&i.gmget()}},fail:function(t){}})},goevaluate:function(){var e=this,i=e.gid;t.navigateTo({url:"/pagesOther/evaluate_list/evaluate_list?id="+i+"&protype=mainshop"})},getPro:function(){var e=this,i=this,o=t.getStorageSync("suid"),a=t.getStorageSync("openid");t.request({url:this.$host+"/api/MainWxapp/dopageduoproducts",data:{uniacid:i.$uniacid,fxsid:i.fxsid,openid:a,suid:o,id:i.gid,source:t.getStorageSync("source")},success:function(a){var n=a.data.data,r=a.data.data.products.grade;e.vipid=a.data.data.products.vipid;var u=a.data.data.products.discount_status,c=a.data.data.products.stores,d=0;if(r>0&&u>0){var g=a.data.data.products.discount;if(2==u){if(g.length>0)for(var h=0;h<g.length;h++)if(r==g[h]["grade"]){d=g[h]["discount"];break}}else d=g;n.products["discount_price"]=(n.products["price"]*d*.1).toFixed(2)}var l=n.products;i.buy_person=a.data.data.products.detail_buyuser,t.setNavigationBarTitle({title:l.title}),1==l.is_sale&&t.showModal({title:"提示",content:"该商品已下架,请选择其他商品",showCancel:!1,success:function(){t.redirectTo({url:"/pages/index/index"})}}),l.texts&&(l.texts=l.texts.replace(/\<img/gi,'<img style="width:100%;height:auto;display:block" '),l.texts=(0,s.default)(l.texts)),e.vip_config=n.vip_config,e.products=l,e.discounts=d,e.stores=c,e.imgUrls=l["imgtext"],e.guiz=n.guiz,i.pic_video=e.products.video,i.dlength=e.imgUrls.length,i.buyuser_length=l.detail_buyuser.length,i.coupon_length=l.detail_coupon.length;var f=n.grouparr,p="";for(h=0;h<f.length;h++)p+=f[h]+"、";var v=p.substring(0,p.length-1);e.strgrouparr=v,e.grouparr=f;var w=n.grouparr_val;e.gzjson=w;var m=n.shouc;e.sc=1==m?0:1,1==l.use_more?e.getproinfo():e.proinfo=l,o&&e.gwcdata()}})},getproinfo:function(){for(var e=this,i=this,o=i.gzjson,s=i.grouparr,a="",n="",r=i.gid,u=0;u<s.length;u++){var c=o[s[u]]["val"],d=o[s[u]]["ck"];a+=c[d]+"######",n+=c[d]+";"}var g=a.substring(0,a.length-6);n=n.substring(0,n.length-1);t.request({url:i.$baseurl+"dopageduoproductsinfo",data:{uniacid:i.$uniacid,str:g,id:r},success:function(o){var s=o.data.data;s["proinfo"]["discount_price"]=0,e.discounts>0&&(s["proinfo"]["discount_price"]=(s["proinfo"]["price"]*e.discounts*.1).toFixed(2)<.01?.01:(s["proinfo"]["price"]*e.discounts*.1).toFixed(2)),i.proinfo=s["proinfo"],i.baseproinfo=s["baseinfo"],i.newstr=n,1==s["baseinfo"]["is_sale"]&&t.showModal({title:"提示",content:"该商品已下架,请选择其他商品",showCancel:!1,success:function(){t.redirectTo({url:"/pages/index/index"})}}),i._givepscore(i,r,"showProMore",i.userid,t.getStorageSync("suid"))}})},gwcdata:function(){var e=this;t.getStorageSync("openid");t.request({url:this.$baseurl+"doPagegwcdata",data:{uniacid:this.$uniacid,suid:t.getStorageSync("suid")},success:function(t){e.gwccount=t.data.data}})},guige_block:function(){this.guige=1,this.gwc=1,this.gm=0},guige_hidden:function(){this.guige=0,this.num=1,this.getPro()},changepro:function(t){var e=this,i=t.target.dataset.id,o=(e.grouparr,t.target.dataset.index),s=e.gzjson;s[i]["ck"]=o,e.gzjson=s,e.getproinfo()},num_add:function(){var e=this.proinfo,i=e.kc,o=this.num;o+=1,o>i&&(t.showModal({title:"提醒",content:"您的购买数量超过了库存！",showCancel:!1}),o--),this.num=o},num_jian:function(){var t=this.num;1==t?this.num=1:(t-=1,this.num=t)},gmget:function(){if(this.getSuid()){var e=this,i=e.proinfo,o=e.num,s=e.products,a=(e.baseproinfo,e.guiz,e.vip_config),n=e.baseinfo;if(1==n.is_sale&&t.showModal({title:"提示",content:"该商品已下架,请选择其他商品",showCancel:!1,success:function(){t.redirectTo({url:"/pages/index/index"})}}),1==a)return t.showModal({title:"提醒",content:"该商品必须开通会员卡购买！",showCancel:!1,success:function(){t.navigateTo({url:"/pages/register/register?type=duo"})}}),!1;if(0==i["kc"]||0==i["pro_kc"])return t.showModal({title:"提醒",content:"您来晚了，已经卖完了！",showCancel:!1}),!1;if(1==s.use_more)var r=e.gid+"|"+i.id+"|"+o;else r=e.gid+"|-1|"+o;var u=[];u.push(r),t.setStorage({key:"buydata",data:u}),t.navigateTo({url:"/pages/order_down/order_down"})}},gwcget:function(){if(this.getSuid()){var e=this,i=e.proinfo,o=e.num,s=(t.getStorageSync("openid"),t.getStorageSync("suid"),e.vip_config),a=e.baseinfo;if(1==a.is_sale&&t.showModal({title:"提示",content:"该商品已下架,请选择其他商品",showCancel:!1,success:function(){t.redirectTo({url:"/pages/index/index"})}}),1==s)return t.showModal({title:"提醒",content:"该商品必须开通会员卡购买！",showCancel:!1,success:function(){t.navigateTo({url:"/pages/register/register?type=duo"})}}),!1;if(0==i["kc"])return t.showModal({title:"提醒",content:"您来晚了，已经卖完了！",showCancel:!1}),!1;t.request({url:this.$host+"/api/MainWxapp/dopagegwcadd",data:{uniacid:this.$uniacid,suid:t.getStorageSync("suid"),id:i.id,pid:e.products.id,prokc:o},success:function(i){t.showToast({title:"加入成功",icon:"success",duration:2e3,success:function(){e.guige_hidden(),e.gwcdata()}})}})}},gwc_100:function(){var e=this,i=e.products;1==i.is_sale&&t.showModal({title:"提示",content:"该商品已下架,请选择其他商品",showCancel:!1,success:function(){t.redirectTo({url:"/pages/index/index"})}}),i.use_more,this.gwc=1,this.gm=0,this.guige=1},gm_100:function(){var e=this,i=e.products;1==i.is_sale&&t.showModal({title:"提示",content:"该商品已下架,请选择其他商品",showCancel:!1,success:function(){t.redirectTo({url:"/pages/index/index"})}}),i.use_more,this.gwc=0,this.gm=1,this.guige=1},collect:function(e){if(this.getSuid()){var i=this,o=i.sc,s=i.gid,a=t.getStorageSync("openid"),n=t.getStorageSync("suid"),r=i.baseinfo;1==r.is_sale&&t.showModal({title:"提示",content:"该商品已下架,请选择其他商品",showCancel:!1,success:function(){t.redirectTo({url:"/pages/index/index"})}}),0==o?(t.showLoading({title:"收藏中"}),t.request({url:i.$baseurl+"doPageCollect",data:{uniacid:i.$uniacid,suid:n,openid:a,types:"showProMore",id:s},success:function(e){var o=e.data.data;i.sc="收藏成功"==o?1:0,t.showToast({title:o,icon:"succes",duration:1e3,mask:!0})}})):1==o&&(t.showLoading({title:"取消收藏中"}),t.request({url:i.$baseurl+"doPageCollect",data:{uniacid:i.$uniacid,suid:n,openid:a,types:"showProMore",id:s},success:function(e){var o=e.data.data;i.sc="取消收藏成功"==o?0:1,t.showToast({title:o,icon:"succes",duration:1e3,mask:!0})}})),setTimeout(function(){t.hideLoading()},1e3)}},gogwc:function(){this.getSuid()&&t.navigateTo({url:"/pages/gwc/gwc"})},getSuid:function(){var e=t.getStorageSync("suid");if(e)return!0;var i="";return i=t.getStorageSync("baidu_userinfo"),i?this.needBind=!0:this.needAuth=!0,!1},swiperLoad:function(e){var i=this;t.getSystemInfo({success:function(t){var o=e.detail.width,s=e.detail.height,a=o/s,n=t.windowWidth/a;i.heighthave||(i.minHeight=n,i.heighthave=1)}})},swiperChange:function(t){this.autoplay=!0,this.currentSwiper=t.detail.current,this.isplay=!1,this.autoplay=this.autoplay,this.endvideo()},playvideo:function(){var t=this;t.autoplay=!1,t.isplay=!0,t.autoplay=t.autoplay},endvideo:function(){var t=this;t.autoplay=!0,t.isplay=!1,t.autoplay=t.autoplay},open_share:function(){this.share=1},share_close:function(){this.share=0,this.shareimg=0},h5ShareAppMessage:function(){var e=this,i=t.getStorageSync("suid");t.showModal({title:"长按复制链接后分享",content:this.$host+"/h5/index.html?id="+this.$uniacid+"#/pages/showProMore/showProMore?id="+this.gid+"&fxsid="+i+"&userid="+i,showCancel:!1,success:function(t){e.share=0}})},getShareImg:function(){t.showToast({title:"暂不支持生成分享海报",icon:"none"})},closeShare:function(){this.shareimg=0},saveImg:function(){var e=this;t.getImageInfo({src:e.shareimg_url,success:function(i){t.saveImageToPhotosAlbum({filePath:i.path,success:function(){t.showToast({title:"保存成功！",icon:"none"}),e.shareimg=0,e.share=0}})}})},aliSaveImg:function(){var e=this;t.getImageInfo({src:e.shareimg_url,success:function(t){my.saveImage({url:t.path,showActionSheet:!0,success:function(){my.alert({title:"保存成功"}),e.shareimg=0,e.share=0}})}})},cell:function(){this.needAuth=!1},closeAuth:function(){this.needAuth=!1,this.needBind=!0},closeBind:function(){this.needBind=!1,this.gwcdata()},getCouponBox:function(){var t=this;t.showCouponBox=1},closeCouponBox:function(){this.showCouponBox=0},getList:function(){var e=this;t.request({url:this.$baseurl+"doPageCoupon",data:{suid:t.getStorageSync("suid"),uniacid:this.$uniacid},success:function(i){e.couponlist=i.data.data,t.hideNavigationBarLoading(),t.stopPullDownRefresh()}})},getmoney:function(e){if(!this.getSuid())return!1;var i=this,s=e.currentTarget.dataset.id,a=e.currentTarget.dataset.cid;(i.products.detail_coupon[a].nowCount>0||"无限"==i.products.detail_coupon[a].nowCount)&&(i.products.detail_coupon[a].counts>0||-1==i.products.detail_coupon[a].counts)?t.getStorage({key:"suid",success:function(e){var a=e.data;a&&t.request({url:i.$baseurl+"doPagegetcoupon",data:{id:s,suid:a,uniacid:i.$uniacid},success:function(t){console.log(t),1==t.data.data&&o.showToast({title:"领取成功",icon:"success",duration:2e3,success:function(){setTimeout(function(){i.getList(),i.getPro()},500)}}),2==t.data.data&&o.showToast({title:"领取失败",icon:"loading",duration:2e3,success:function(){setTimeout(function(){i.getList(),i.getPro()},500)}})}})}}):t.showToast({title:"不能再领啦",icon:"none",duration:1500})},makephonecall:function(){t.makePhoneCall({phoneNumber:t.getStorageSync("base_tel")})}}};e.default=r}).call(this,i("5486")["default"],i("5486")["default"])},b29a:function(t,e,i){"use strict";var o=i("49a7"),s=i.n(o);s.a},ef61:function(t,e,i){"use strict";i.r(e);var o=i("8505"),s=i.n(o);for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);e["default"]=s.a},f715:function(t,e,i){"use strict";var o={auth:()=>Promise.all([i.e("common/vendor"),i.e("components/auth/auth")]).then(i.bind(null,"a32a")),bindPhone:()=>Promise.all([i.e("common/vendor"),i.e("components/bindPhone/bindPhone")]).then(i.bind(null,"9bb9"))},s=function(){var t=this,e=t.$createElement;t._self._c},a=[];i.d(e,"b",function(){return s}),i.d(e,"c",function(){return a}),i.d(e,"a",function(){return o})}},[["0893","common/runtime","common/vendor"]]]);