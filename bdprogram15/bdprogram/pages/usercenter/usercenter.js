(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/usercenter/usercenter"],{"0a00":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;a("2f62");var n=a("88e4"),i={data:function(){return{$imgurl:this.$imgurl,globaluser:"",vipinfodata:"",menuidata:"",isvip:"",needVip:"",money:0,score:0,coupon:0,vipset:1,viptext:"6688",baseinfo:{},vipflag:1,fxzzd:"",myorder:"",mysign:"",mycoupons:"",recharge:0,cardname:"",userbg:"",needAuth:!1,needBind:!1,ali_userinfo:"",baidu_userinfo:"",toutiao_userinfo:"",qq_userinfo:"",superuser:"",page_signs:"/pages/usercenter/usercenter",member_card:1,grade:0,vipname:"",isview:0,equity_flag:1,is:{coupon_arr:[]},is_ios:0,re_money:"",re_score:0,re_give_money:0,coupon_arrs:[],recharge_receive_is:0,counts1:0,counts2:0,counts3:0,counts4:0,counts5:0,has_suid:0}},computed:{},onShow:function(){this.vipinfo()},onLoad:function(t){var a=this,i=this;this.getMainOrderNum(),this._baseMin(this);var o=e.getStorageSync("systemInfo")["system"];o.indexOf("iOS")>=0&&(this.is_ios=1);var s=0;t.fxsid&&(s=t.fxsid),this.fxsid=s;var u=e.getStorageSync("suid");if(this.has_suid=u,u)n.bdLogin(s,function(){setTimeout(function(){i.getBaiduUserInfo()},1e3),a.menuinfo()});else{setTimeout(function(){i.getBaiduUserInfo()},1e3),this.menuinfo();var r=e.getStorageSync("baidu_userinfo");r&&(this.needBind=!0)}},onPullDownRefresh:function(){this.vipinfo(),this.menuinfo(),this.getMainOrderNum(),e.stopPullDownRefresh()},onShareAppMessage:function(){},methods:{getMainOrderNum:function(){var t=this;e.request({url:this.$host+"/api/MainWxapp/getMainOrderStatus",data:{uniacid:this.$uniacid,suid:e.getStorageSync("suid")},success:function(e){t.counts1=e.data.data.order_types.not_payment,t.counts2=e.data.data.order_types.not_delivery,t.counts3=e.data.data.order_types.not_receiver,t.counts4=e.data.data.order_types.not_evaluate,t.counts5=e.data.data.order_types.not_after_sale}})},getSuid:function(){var t=e.getStorageSync("suid");if(!t){var a="";a=e.getStorageSync("baidu_userinfo"),a?this.needBind=!0:this.needAuth=!0}},h5DoLogin:function(){this.needBind=!0},cell:function(){this.needAuth=!1,this.vipinfo(),this.getBaiduUserInfo()},closeAuth:function(){this.needAuth=!1,console.log("closeAuth"),this.baidu_userinfo=e.getStorageSync("baidu_userinfo"),this.baidu_userinfo&&(this.needBind=!0),this.menuinfo()},closeBind:function(){console.log("closeBind"),this.needBind=!1,this.vipflag=1,this.vipinfo(),this.has_suid=e.getStorageSync("suid"),this.menuinfo()},globaluserinfo:function(){var t=this,a=e.getStorageSync("openid");e.request({url:this.$baseurl+"dopageglobaluserinfo",data:{uniacid:this.$uniacid,openid:a,source:e.getStorageSync("source")},header:{"custom-header":"hello"},success:function(e){t.globaluser=e.data.data}})},aliUserinfo:function(){this.ali_userinfo=e.getStorageSync("ali_userinfo")},qqUserinfo:function(){this.qq_userinfo=e.getStorageSync("qq_userinfo")},toutiaoUserinfo:function(){this.toutiao_userinfo=e.getStorageSync("toutiao_userinfo")},getBaiduUserInfo:function(){this.baidu_userinfo=e.getStorageSync("baidu_userinfo"),this.vipinfo()},vipinfo:function(){var t=this;e.request({url:this.$baseurl+"doPageMymoneyD",data:{uniacid:this.$uniacid,suid:e.getStorageSync("suid")},success:function(e){t.vipinfodata=e.data.data,"2"!=e.data.data.vipset||e.data.data.vipid||e.data.data.vipflag?e.data.data.vipid?(t.viptext=e.data.data.vipid.substr(12,4),t.isvip=!0):(3==e.data.data.vipflag?t.vipflag=3:2==e.data.data.vipflag?t.vipflag=2:4==e.data.data.vipflag&&(t.vipflag=4),t.isvip=!1):t.needVip=!0,t.userbg=e.data.data.userbg,t.money=e.data.data.money,t.score=e.data.data.score,t.coupon=e.data.data.couponNum,t.vipset=e.data.data.vipset,t.cardname=e.data.data.cardname,t.grade=e.data.data.grade,t.vipname=e.data.data.vipname,t.is=e.data.data.is,t.equity_flag=e.data.data.is.flag,t.recharge_receive_is=e.data.data.recharge_receive_is,e.data.data.recharge_receive_is&&(t.moneydata=e.data.data.recharge_receive,t.re_money=t.moneydata.money,t.re_score=t.moneydata.score,t.re_give_money=t.moneydata.give_money,t.coupon_arrs=t.moneydata.coupon_con)}})},menuinfo:function(){var t=this;e.request({url:this.$baseurl+"doPageupdatausersetnew",data:{uniacid:this.$uniacid,source:e.getStorageSync("source"),suid:e.getStorageSync("suid")},header:{"custom-header":"hello"},success:function(a){t.menuidata=a.data.data,t.fxzzd=a.data.data.arrs,t.myorder=a.data.data.myorder,t.mysign=a.data.data.mysign,t.mycoupons=a.data.data.mycoupons,e.setStorageSync("manager_rule",a.data.data.manager_rule)}})},dianPhoneCall:function(t){console.log(2222);var a=t.currentTarget.dataset.index;e.makePhoneCall({phoneNumber:a})},toSign:function(){e.navigateTo({url:"/pagesSign/index/index"})},cancel:function(){var t=this;e.request({url:t.$baseurl+"doPagechangeReceive",data:{uniacid:t.$uniacid,id:t.is.id},success:function(e){t.equity_flag=1}})},con_cancel:function(){var t=this;e.request({url:t.$baseurl+"doPagechangeRechargeReceive",data:{uniacid:t.$uniacid,id:t.moneydata.id},success:function(e){t.recharge_receive_is=0}})},scancode:function(){var t=this;e.scanCode({success:function(a){var n=a.result.split("&"),i=n[0].split("=")[1],o=n[1].split("=")[1];i>-1&&o?e.showModal({title:"提示",content:"确认核销",success:function(a){a.confirm&&e.request({url:t.$baseurl+"hxmm",data:{uniacid:t.$uniacid,order_id:o,suid:e.getStorageSync("suid"),hxuser_is:1,is_more:i},success:function(t){var a=t.data.data;3==a?e.showModal({title:"提示",content:"不是核销员，无权限核销！",showCancel:!1,success:function(t){e.redirectTo({url:"/pages/usercenter/usercenter"})}}):1==a?e.showToast({title:"核销成功",icon:"success",duration:2e3}):2==a?e.showModal({title:"提示",content:"核销失败，该订单是已核销订单!",showCancel:!1}):4==a&&e.showModal({title:"提示",content:"该订单是多商户订单，请进入店铺管理用管理员核销!",showCancel:!1})}})}}):e.showModal({title:"提示",content:"二维码错误",showCancel:!1})}})}}};t.default=i}).call(this,a("5486")["default"])},"0a5c":function(e,t,a){"use strict";(function(e){a("d28f");n(a("66fd"));var t=n(a("f71c"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("5486")["createPage"])},3607:function(e,t,a){"use strict";a.r(t);var n=a("0a00"),i=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,function(){return n[e]})}(o);t["default"]=i.a},"582b":function(e,t,a){"use strict";var n={auth:()=>Promise.all([a.e("common/vendor"),a.e("components/auth/auth")]).then(a.bind(null,"a32a")),bindPhone:()=>Promise.all([a.e("common/vendor"),a.e("components/bindPhone/bindPhone")]).then(a.bind(null,"9bb9")),copyright:()=>a.e("components/copyright/copyright").then(a.bind(null,"cb0f")),myfooter:()=>a.e("components/myfooter/myfooter").then(a.bind(null,"6bab"))},i=function(){var e=this,t=e.$createElement;e._self._c},o=[];a.d(t,"b",function(){return i}),a.d(t,"c",function(){return o}),a.d(t,"a",function(){return n})},b7f0:function(e,t,a){"use strict";var n=a("bf5d"),i=a.n(n);i.a},bf5d:function(e,t,a){},f71c:function(e,t,a){"use strict";a.r(t);var n=a("582b"),i=a("3607");for(var o in i)"default"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);a("b7f0");var s,u=a("f0c5"),r=Object(u["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);t["default"]=r.exports}},[["0a5c","common/runtime","common/vendor"]]]);