(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/main_shop_order/main_shop_order"],{"16b7":function(t,e,a){"use strict";(function(t){a("d28f");s(a("66fd"));var e=s(a("3bba"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("5486")["createPage"])},"3bba":function(t,e,a){"use strict";a.r(e);var s=a("4caf"),i=a("6ae2");for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);a("718c");var r,n=a("f0c5"),d=Object(n["a"])(i["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],r);e["default"]=d.exports},"4caf":function(t,e,a){"use strict";var s={myfooter:()=>a.e("components/myfooter/myfooter").then(a.bind(null,"6bab"))},i=function(){var t=this,e=t.$createElement;t._self._c},o=[];a.d(e,"b",function(){return i}),a.d(e,"c",function(){return o}),a.d(e,"a",function(){return s})},6514:function(t,e,a){},"6ae2":function(t,e,a){"use strict";a.r(e);var s=a("d79d"),i=a.n(s);for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);e["default"]=i.a},"718c":function(t,e,a){"use strict";var s=a("6514"),i=a.n(s);i.a},d79d:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a("88e4"),i={data:function(){return{$imgurl:this.$imgurl,$host:this.$host,page_signs:"/pages/main_shop_order/main_shop_order",page:1,morePro:!1,baseinfo:{},orderinfo:[],orderinfo_length:0,type:9,flag:0,status:0,showmask:!1,kuaidi:["选择快递","圆通","中通","申通","顺丰","韵达","天天","百世","EMS","本人到店","其他"],index:0,showhx:0,hxmm:"",hxmm_list:[{val:"",fs:!0},{val:"",fs:!1},{val:"",fs:!1},{val:"",fs:!1},{val:"",fs:!1},{val:"",fs:!1}],is_focus:!1,hx_choose:0,hx_ewm:"",showPay:0,choosepayf:0,mymoney:0,mymoney_pay:1,is_submit:1,order_id:0,h5_wxpay:0,h5_alipay:0,pay_type:1,pay_money:0,searchkeyword:"",suid:0}},onLoad:function(e){this._baseMin(this);var a=0;e.fxsid&&(a=e.fxsid),this.fxsid=a,e.flag&&(this.flag=e.flag);var i=t.getStorageSync("source");this.source=i;var o=t.getStorageSync("suid");o&&(this.suid=o),s.bdLogin(a,function(){})},onShow:function(){this.page=1,this.getLists()},onPullDownRefresh:function(){this.getLists(),t.stopPullDownRefresh()},onReachBottom:function(){var e=this,a=1*e.page+1;t.request({url:this.$host+"/api/MainWxapp/doPageGetMyOrders",data:{page:a,uniacid:this.$uniacid,flag:this.flag,suid:this.suid},success:function(t){e.orderinfo=e.orderinfo.concat(t.data.data.orders),e.page=a}})},methods:{toapplyall:function(e){var a=e.currentTarget.dataset.order_id;console.log(e.currentTarget.dataset.order_id);var s="/pages/applyAfterSales/applyAfterSales?order_id="+a+"&from_to=1";t.navigateTo({url:s})},changflag:function(t){var e=this;e.searchkeyword="",e.flag=t.currentTarget.dataset.status,e.getLists()},getLists:function(){var e=this;t.request({url:this.$host+"/api/MainWxapp/doPageGetMyOrders",data:{page:1,uniacid:this.$uniacid,flag:this.flag,suid:this.suid},header:{"custom-header":"hello"},success:function(t){e.orderinfo=t.data.data.orders,e.orderinfo_length=e.orderinfo.length,e.mymoney=t.data.data.money},fail:function(t){console.log(t)}})},goevaluate:function(e){var a=e.currentTarget.dataset.order_id,s=e.currentTarget.dataset.type;t.navigateTo({url:"/pagesOther/evaluate_pro/evaluate_pro?order_id="+a+"&type="+s})},hxshow:function(t){this.showhx=1,this.order_id=t.target.id},hxhide:function(){this.showhx=0,this.hxmm=""},onFocus:function(t){var e=this;e.isFocus=!0},hxmmInput:function(t){for(var e=t.target.value.length,a=0;a<this.hxmm_list.length;a++)this.hxmm_list[a].fs=!1,this.hxmm_list[a].val=t.target.value[a];e&&(this.hxmm_list[e-1].fs=!0),this.hxmm=t.target.value},hxhide1:function(){this.hx_choose=0,this.hxmm="";for(var t=0;t<this.hxmm_list.length;t++)this.hxmm_list[t].fs=!1,this.hxmm_list[t].val=""},gethxmima:function(){this.hx_choose=1},gethxImg:function(){var e=this;t.request({url:this.$baseurl+"doPageHxEwm",data:{uniacid:this.$uniacid,suid:this.suid,pageUrl:"mainShop",orderid:this.order_id},success:function(t){console.log(t.data),e.hx_ewm=t.data.data,e.hx_choose=2}})},hxmmpass:function(){var e=this;this.hxmm?t.request({url:this.$baseurl+"hxmm",data:{uniacid:this.$uniacid,suid:this.suid,order_id:this.order_id,is_more:5,hxmm:this.hxmm},success:function(a){var s=a.data.data;if(0==s){t.showModal({title:"提示",content:"核销密码不正确！",showCancel:!1}),e.hxmm="";for(var i=0;i<e.hxmm_list.length;i++)e.hxmm_list[i].fs=!1,e.hxmm_list[i].val=""}else 1==s?(e.showhx=0,t.showModal({title:"提示",content:"核销成功！",showCancel:!1,success:function(e){t.redirectTo({url:"/pages/main_shop_order/main_shop_order"})}})):2==s&&t.showModal({title:"提示",content:"已核销!",showCancel:!1,success:function(){t.startPullDownRefresh(),this.showhx=0,this.page=1,this.getList(),t.stopPullDownRefresh()}})}}):t.showModal({title:"提示",content:"请输入核销密码！",showCancel:!1})},qrshouh:function(e){var a=e.target.id,s=this.suid,i=this.$host,o=this.$uniacid;t.showModal({title:"提示",content:"确认收货吗？",success:function(e){e.confirm&&t.request({url:i+"/api/mainwxapp/dopageqrshouh",data:{uniacid:o,suid:s,order_id:a},success:function(e){t.showToast({title:"收货成功！",success:function(e){setTimeout(function(){t.redirectTo({url:"/pages/main_shop_order/main_shop_order"})},1500)}})}})}})},makeCall:function(e){var a=this,s=e.currentTarget.dataset.sid;if(console.log(s),0==s){var i=t.getStorageSync("base_tel");t.makePhoneCall({phoneNumber:i})}else t.request({url:a.$baseurl+"doPageShowstore_W",data:{uniacid:a.$uniacid,id:s},success:function(e){var a=e.data.data.tel;t.makePhoneCall({phoneNumber:a})}})},wlinfo:function(e){var a=e.currentTarget.dataset.kuaidi,s=e.currentTarget.dataset.kuaidihao,i=e.currentTarget.dataset.order_id;null!=a&&null!=s?t.navigateTo({url:"/pagesOther/logistics_state/logistics_state?kuaidi="+a+"&kuaidihao="+s+"&order_id="+i}):t.navigateTo({url:"/pagesOther/logistics_information/logistics_information?order_id="+i})},serachInput:function(t){this.searchkeyword=t.detail.value},search:function(){var e=this,a=this.searchkeyword,s=this.flag;a?t.request({url:this.$host+"/api/mainwxapp/doPageOrderSearch",data:{uniacid:this.$uniacid,suid:this.suid,key:a,flag:s},success:function(t){e.orderinfo=t.data.data.orders}}):t.showModal({title:"提示",content:"请输入搜索内容！",showCancel:!1})},paybox:function(t){var e=0,a=this.orderinfo,s=t.currentTarget.dataset.order_id;this.order_id=s;for(var i=0;i<a.length;i++)a[i]["order_id"]==s&&(e=1==a[i]["is_change_price"]?a[i]["change_price"]:a[i]["pay_money"]);console.log("pay_money="+e),this.pay_money=e;var o=this.mymoney;e>o&&(this.mymoney_pay=2,this.pay_type=2,this.choosepayf=4),0==this.showPay&&(this.showPay=1)},payboxclose:function(){1==this.showPay&&(this.showPay=0,this.order_id=0)},choosepay:function(t){this.pay_type=t.currentTarget.dataset.pay_type,this.choosepayf=t.currentTarget.dataset.type},pay:function(){var e=this.is_submit;if(2==e)return!1;this.is_submit=2;this.$uniacid;var a=this.suid,s=this.source,i=this.pay_type,o=this.pay_money,r=this.order_id;1==i?t.request({url:this.$baseurl+"payCallBackNotify",data:{uniacid:this.$uniacid,order_id:r,suid:a,payprice:o,types:"mainShop",flag:0,fxsid:this.fxsid,source:s,pay_to:0},success:function(e){0!=e.data.data.error?t.showToast({title:e.data.data.msg,icon:"none",mask:!0,success:function(){setTimeout(function(){t.redirectTo({url:"/pages/main_shop_order/main_shop_order"})},1e3)}}):t.showToast({title:"购买成功！",icon:"success",mask:!0,success:function(){setTimeout(function(){t.redirectTo({url:"/pages/main_shop_order/main_shop_order"})},1e3)}})}}):this._baidupay(this,o,"mainShop",r,"/pages/main_shop_order/main_shop_order")},cancelOrderNoPay:function(e){var a=this;t.showModal({title:"提示",content:"该操作不可逆，是否确认取消",success:function(s){if(s.confirm){var i=e.currentTarget.dataset.order_id;t.request({url:a.$host+"/api/mainwxapp/doPageCancelOrderNoPay",data:{uniacid:a.$uniacid,suid:a.suid,order_id:i},success:function(e){0==e.data.data.error&&t.showModal({title:"提示",content:"取消成功",showCancel:!1,success:function(t){a.page=1,a.searchkeyword="",a.getLists()}})}})}}})},deleteOrder:function(e){var a=this,s=e.currentTarget.dataset.order_id;t.showModal({title:"提示",content:"该操作不可逆，是否删除",success:function(e){e.confirm&&t.request({url:a.$host+"/api/mainwxapp/deleteOrder",data:{uniacid:a.$uniacid,suid:a.suid,order_id:s},success:function(e){0==e.data.data.error?t.showModal({title:"提示",content:"删除成功",showCancel:!1,success:function(t){a.page=1,a.searchkeyword="",a.getLists()}}):t.showModal({title:"提示",content:e.data.data.msg,showCancel:!1})}})}})}}};e.default=i}).call(this,a("5486")["default"])}},[["16b7","common/runtime","common/vendor"]]]);