(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/checkPro/checkPro"],{"3c21":function(t,e,i){"use strict";var a=i("5750"),n=i.n(a);n.a},"3c45":function(t,e,i){"use strict";i.r(e);var a=i("bc66"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=n.a},"49ae":function(t,e,i){"use strict";(function(t){i("d28f");a(i("66fd"));var e=a(i("dcc7"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("5486")["createPage"])},5750:function(t,e,i){},bc66:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;i("2f62");var a=i("88e4"),n={data:function(){return{$imgurl:this.$imgurl,$host:this.$host,page_signs:"/pages/checkPro/checkPro",baseinfo:{},cid:0,goodsH:0,shaixuanBox:0,listStyle:0,search_keys:"",sort_type:1,sort_type_attr:1,is_vip_price:0,price_min:"",price_max:"",page:1,nextPage:2,searchtitle:"",checkprolist:"",checkprolist_length:0,guige:0,pid:0,proinfo:"",gzjson:"",grouparr:"",num:1,newstr:"",use_more:0,discounts:0,gwc:"",gm:"",needAuth:!1,needBind:!1,baseproinfo:"",tobuy:1,vip_show:1,is_vipBox:0,vip_name:"",to_login:0}},onLoad:function(t){var e=this;this.cid=t.cid,this.page_signs="/pages/checkPro/checkPro?cid="+this.cid,this._baseMin(this);var i=0;t.fxsid&&(i=t.fxsid),this.fxsid=i,t.title&&(this.search_keys=t.title),a.bdLogin(i,function(){e.getLists()})},onPullDownRefresh:function(){this.getLists(),t.stopPullDownRefresh()},methods:{onReachBottoms:function(){var e=this,i=1,a=e.nextPage;if(a<=i)return!1;t.request({url:e.$host+"/api/MainWxapp/doPageCheckPro",data:{page:a,uniacid:e.$uniacid,cate_id:e.cid,suid:t.getStorageSync("suid"),search_keys:e.search_keys,sort_type:e.sort_type,sort_type_attr:e.sort_type_attr,is_vip_price:e.is_vip_price,price_min:e.price_min,price_max:e.price_max},success:function(i){if(2==i.data.data.vip_show){e.vip_show=2,e.is_vipBox=1,e.vip_name=i.data.data.vip_name;var n=t.getStorageSync("suid");return n||(e.to_login=1),!1}e.vip_show=1,i.data.data.list&&(e.checkprolist=e.checkprolist.concat(i.data.data.list),e.page=a,e.nextPage=a+1)}})},toprodetail:function(e){var i=e.currentTarget.dataset.id,a="/pages/showProMore/showProMore?id="+i;t.navigateTo({url:a})},getLists:function(){var e=this;t.request({url:e.$host+"/api/MainWxapp/doPageCheckPro",data:{uniacid:e.$uniacid,cate_id:e.cid,suid:t.getStorageSync("suid"),search_keys:e.search_keys,sort_type:e.sort_type,sort_type_attr:e.sort_type_attr,is_vip_price:e.is_vip_price,price_min:e.price_min,price_max:e.price_max,page:e.page},success:function(i){if(2==i.data.data.vip_show){e.vip_show=2,e.is_vipBox=1,e.vip_name=i.data.data.vip_name;var a=t.getStorageSync("suid");return a||(e.to_login=1),!1}e.vip_show=1,e.nextPage=2;var n=t.getStorageSync("systemInfo");e.goodsH=n.windowHeight-55,e.checkprolist=i.data.data.list,e.checkprolist_length=i.data.data.list.length},fail:function(t){console.log(t)}})},showShaixuan:function(){0==this.shaixuanBox?this.shaixuanBox=1:this.shaixuanBox=0},closeShaixuan:function(){0==this.shaixuanBox?this.shaixuanBox=1:this.shaixuanBox=0},changeListstyle:function(){var t=this;0==t.listStyle?t.listStyle=1:t.listStyle=0},sortType1:function(){this.sort_type=1,2==this.sort_type_attr?this.sort_type_attr=1:this.sort_type_attr=2,this.getLists()},sortType2:function(){this.sort_type=2,2==this.sort_type_attr?this.sort_type_attr=1:this.sort_type_attr=2,this.getLists()},sortType3:function(){this.sort_type=3,2==this.sort_type_attr?this.sort_type_attr=1:this.sort_type_attr=2,this.getLists()},vipPrice1:function(){this.is_vip_price=1},vipPrice2:function(){this.is_vip_price=2},getminPrice:function(t){this.price_min=t.detail.value},getmaxPrice:function(t){this.price_max=t.detail.value},resetData:function(){this.is_vip_price=0,this.price_min="",this.price_max=""},saveData:function(){this.shaixuanBox=0,this.getLists()},serachInput:function(t){this.search_keys=t.detail.value},search:function(){this.page=1;var e=this.search_keys;e?this.getLists():t.showModal({title:"提示",content:"请输入搜索内容！",showCancel:!1})},getSuid:function(){var e=t.getStorageSync("suid");if(e)return!0;var i="";return i=t.getStorageSync("baidu_userinfo"),i?this.needBind=!0:this.needAuth=!0,!1},checkvip:function(e){var i=this,a=(t.getStorageSync("openid"),t.getStorageSync("suid"));t.request({url:i.$host+"/api/MainWxapp/doPagecheckvip",data:{uniacid:i.$uniacid,kwd:"duo",suid:a,id:i.pid,gz:1},success:function(a){if(!1===a.data.data)return i.needvip=!0,t.showModal({title:"进入失败",content:"使用本功能需先开通vip!",showCancel:!1,success:function(e){e.confirm&&t.redirectTo({url:"/pages/register/register"})}}),!1;if(a.data.data.needgrade>0)if(i.needvip=!0,a.data.data.grade>0)if(a.data.data.grade<a.data.data.needgrade)t.showModal({title:"进入失败",content:"使用本功能需成为"+a.data.data.vipname+"("+a.data.data.needgrade+"级)以上等级会员,请先升级!",showCancel:!1,success:function(e){e.confirm&&t.redirectTo({url:"/pages/open1/open1"})}});else{var n=e.currentTarget.dataset.type;"gwc"==n?i.gwcget():"gm"==n&&i.gmget()}else if(a.data.data.grade<a.data.data.needgrade)t.showModal({title:"进入失败",content:"使用本功能需成为"+a.data.data.vipname+"("+a.data.data.needgrade+"级)以上等级会员,请先开通会员后再升级会员等级!",showCancel:!1,success:function(e){e.confirm&&t.redirectTo({url:"/pages/register/register"})}});else{if(1==i.use_more)n=e.currentTarget.dataset.type;else n=i.buy_type;"gwc"==n?i.gwcget():"gm"==n&&i.gmget()}else{n=e.currentTarget.dataset.type;"gwc"==n?i.gwcget():"gm"==n&&i.gmget()}},fail:function(t){}})},getProModel:function(){var e=this;t.request({url:e.$host+"/api/MainWxapp/doPagegetProModel",data:{uniacid:e.$uniacid,suid:t.getStorageSync("suid"),pid:e.pid},success:function(t){e.num=1,e.proinfo=t.data.data,e.use_more=t.data.data.use_more,e.newstr=t.data.data.arr_selected,e.discounts=t.data.data.discount,e.gzjson=t.data.data.grouparr_val,e.grouparr=t.data.data.grouparr;var i=e.grouparr;if(i)for(var a=0;a<i.length;a++)i[a]+"、";else e.newstr="";e.guige=1},fail:function(t){console.log(t)}})},guige_block:function(t){this.pid=t.currentTarget.dataset.id,this.getProModel()},guige_hidden:function(){this.guige=0},getproinfo:function(){for(var e=this,i=e.gzjson,a=e.grouparr,n="",s="",o=e.pid,r=0;r<a.length;r++){var c=i[a[r]]["val"],u=i[a[r]]["ck"];n+=c[u]+"######",s+=c[u]+";"}var d=n.substring(0,n.length-6);s=s.substring(0,s.length-1);t.request({url:e.$host+"/api/MainWxapp/doPageGuigeInfo",data:{uniacid:e.$uniacid,id:o,str:d},success:function(i){var a=i.data.data;a["proinfo"]["discount_price"]=0,e.discounts>0&&(a["proinfo"]["discount_price"]=(a["proinfo"]["price"]*e.discounts*.1).toFixed(2)<.01?.01:(a["proinfo"]["price"]*e.discounts*.1).toFixed(2)),e.proinfo=a["proinfo"],e.baseproinfo=a["baseinfo"],e.newstr=s,1==a["baseinfo"]["is_sale"]&&t.showModal({title:"提示",content:"该商品已下架,请选择其他商品",showCancel:!1,success:function(){t.redirectTo({url:"/pages/index/index"})}})},fail:function(t){console.log(t)}})},changepro:function(t){var e=this,i=t.target.dataset.id,a=(e.grouparr,t.target.dataset.index),n=e.gzjson;n[i]["ck"]=a,e.gzjson=n,e.tobuy=0,e.getproinfo()},num_add:function(){var e=this.proinfo,i=e.kc,a=this.num;a+=1,a>i&&(t.showModal({title:"提醒",content:"您的购买数量超过了库存！",showCancel:!1}),a--),this.num=a},num_jian:function(){var t=this.num;1==t?this.num=1:(t-=1,this.num=t)},gmget:function(){if(this.getSuid()){var e=this,i=e.tobuy,a=e.num;if(1==i)var n=e.proinfo;else{n=e.proinfo;var s=e.baseproinfo;s["id"]=n["id"],s["kc"]=n["kc"],n=s}if(1==n.is_sale&&t.showModal({title:"提示",content:"该商品已下架,请选择其他商品",showCancel:!1,success:function(){t.redirectTo({url:"/pages/index/index"})}}),0==n["kc"])return t.showModal({title:"提醒",content:"您来晚了，已经卖完了！",showCancel:!1}),!1;if(1==n.use_more)var o=e.pid+"|"+n.id+"|"+a;else o=e.pid+"|-1|"+a;var r=[];r.push(o),t.setStorage({key:"buydata",data:r}),t.navigateTo({url:"/pages/order_down/order_down?discounts="+e.discounts+"&stores="+e.stores})}},gwcget:function(){if(this.getSuid()){var e=this,i=e.proinfo,a=e.num,n=(t.getStorageSync("openid"),t.getStorageSync("suid"),e.baseproinfo);if(1==n.is_sale&&t.showModal({title:"提示",content:"该商品已下架,请选择其他商品",showCancel:!1,success:function(){t.redirectTo({url:"/pages/index/index"})}}),0==i["kc"])return t.showModal({title:"提醒",content:"您来晚了，已经卖完了！",showCancel:!1}),!1;t.request({url:e.$host+"/api/MainWxapp/dopagegwcadd",data:{uniacid:this.$uniacid,suid:t.getStorageSync("suid"),id:i.id,pid:e.pid,prokc:a},success:function(i){t.showToast({title:"加入成功",icon:"success",duration:2e3,success:function(){e.guige_hidden()}})}})}},closeVipTip:function(){var t=this;t.is_vipBox=0},toBeVip:function(){var e="/pages/equity_show/equity_show";t.navigateTo({url:e})},toBeVipUp:function(){var e="/pages/open1/open1";t.navigateTo({url:e})},toLogin:function(){var e="/pages/usercenter/usercenter";t.navigateTo({url:e})}}};e.default=n}).call(this,i("5486")["default"])},c563:function(t,e,i){"use strict";var a={auth:()=>Promise.all([i.e("common/vendor"),i.e("components/auth/auth")]).then(i.bind(null,"a32a")),bindPhone:()=>Promise.all([i.e("common/vendor"),i.e("components/bindPhone/bindPhone")]).then(i.bind(null,"9bb9")),myfooter:()=>i.e("components/myfooter/myfooter").then(i.bind(null,"6bab"))},n=function(){var t=this,e=t.$createElement;t._self._c},s=[];i.d(e,"b",function(){return n}),i.d(e,"c",function(){return s}),i.d(e,"a",function(){return a})},dcc7:function(t,e,i){"use strict";i.r(e);var a=i("c563"),n=i("3c45");for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i("3c21");var o,r=i("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],o);e["default"]=c.exports}},[["49ae","common/runtime","common/vendor"]]]);