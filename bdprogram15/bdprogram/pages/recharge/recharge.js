(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/recharge/recharge"],{"228e":function(e,t,n){},"5b74":function(e,t,n){"use strict";n.r(t);var i=n("67f5"),a=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);t["default"]=a.a},"67f5":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("88e4"),a={data:function(){return{baseinfo:"",$imgurl:this.$imgurl,guiz:{conf:{},user:{money:0}},needAuth:!1,needBind:!1,pay_type:1,show_pay_type:0,alipay:1,wxpay:1,money:"",is_ios:0,coupon_num:0,coupon_con:[]}},onLoad:function(t){var n=this,a=e.getStorageSync("suid");this.checkvip(),this._baseMin(this);var s=0;if(t.fxsid&&(s=t.fxsid),this.fxsid=s,a)i.bdLogin(s,function(){n.getGuiz()});else{var o=e.getStorageSync("baidu_userinfo");o?this.needBind=!0:this.needAuth=!0}var u=e.getStorageSync("systemInfo")["system"];u.indexOf("iOS")>=0&&(this.is_ios=1)},methods:{ChargeMoney:function(e){var t=e.currentTarget.dataset.money;this.money=t},cell:function(){this.needAuth=!1},closeAuth:function(){this.needAuth=!1,this.needBind=!0},closeBind:function(){this.needBind=!1,this.getGuiz()},checkvip:function(t){var n=this,i=(e.getStorageSync("openid"),e.getStorageSync("suid"));e.request({url:n.$baseurl+"doPagecheckvip",data:{uniacid:n.$uniacid,kwd:"recharge",suid:i},success:function(t){if(!1===t.data.data)return n.needvip=!0,e.showModal({title:"进入失败",content:"使用本功能需先开通vip!",showCancel:!1,success:function(t){t.confirm&&e.redirectTo({url:"/pages/register/register"})}}),!1},fail:function(e){}})},getGuiz:function(){var t=this;e.request({url:this.$baseurl+"doPageGuiz",data:{suid:e.getStorageSync("suid"),uniacid:this.$uniacid},success:function(e){console.log(e),t.guiz=e.data.data}})},setmoney:function(e){this.money=e.detail.value},getSuid:function(){var t=e.getStorageSync("suid");if(t)return!0;var n="";return n=e.getStorageSync("baidu_userinfo"),n?this.needBind=!0:this.needAuth=!0,!1},setsubmit:function(){if(!this.getSuid())return!1;var t=this,n=(e.getStorageSync("suid"),t.baseinfo.ios);if(0==n&&1==this.is_ios)e.showModal({title:"提示",content:"iOS系统不支持虚拟支付",showCancel:!1,success:function(t){e.redirectTo({url:"/pages/index/index"})}});else{var i=t.money,a=(e.getStorageSync("openid"),!0);if(i<=0)return e.showModal({title:"提醒",content:"请输入正确的充值金额！",showCancel:!1}),a=!1,!1;a&&e.request({url:t.$baseurl+"doPageRechargeOrder",data:{suid:e.getStorageSync("suid"),money:i,uniacid:t.$uniacid,source:e.getStorageSync("source")},success:function(e){t._baidupay(t,i,"recharge",e.data.data.order_id,"/pages/usercenter/usercenter")}})}},showpay:function(){var t=this,n=t.money;n&&0!=n?e.request({url:this.$baseurl+"doPageGetH5payshow",data:{uniacid:this.$uniacid,suid:e.getStorageSync("suid")},success:function(n){0==n.data.data.ali&&0==n.data.data.wx?e.showModal({title:"提示",content:"请联系管理员设置支付参数",showCancel:!1,success:function(e){return!1}}):(0==n.data.data.ali?(t.alipay=0,t.pay_type=2):(t.alipay=1,t.pay_type=1),0==n.data.data.wx?t.wxpay=0:t.wxpay=1,t.show_pay_type=1)}}):e.showModal({title:"提示",content:"请输入有效充值金额",showCancel:!1,success:function(e){return!1}})},changealipay:function(){this.pay_type=1},changewxpay:function(){this.pay_type=2},close_pay_type:function(){this.show_pay_type=0},h5topay:function(){var t=this.pay_type,n=this.baseinfo.ios;0==n&&1==this.is_ios?e.showModal({title:"提示",content:"iOS系统不支持虚拟支付",showCancel:!1,success:function(t){e.redirectTo({url:"/pages/index/index"})}}):(1==t?this._alih5pay(this,this.money,15,this.orderid):2==t&&this._wxh5pay(this,this.money,"recharge",this.orderid),this.show_pay_type=0)}}};t.default=a}).call(this,n("5486")["default"])},"7dac":function(e,t,n){"use strict";(function(e){n("d28f");i(n("66fd"));var t=i(n("b18a"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("5486")["createPage"])},8463:function(e,t,n){"use strict";var i={auth:()=>Promise.all([n.e("common/vendor"),n.e("components/auth/auth")]).then(n.bind(null,"a32a")),bindPhone:()=>Promise.all([n.e("common/vendor"),n.e("components/bindPhone/bindPhone")]).then(n.bind(null,"9bb9"))},a=function(){var e=this,t=e.$createElement;e._self._c},s=[];n.d(t,"b",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return i})},b18a:function(e,t,n){"use strict";n.r(t);var i=n("8463"),a=n("5b74");for(var s in a)"default"!==s&&function(e){n.d(t,e,function(){return a[e]})}(s);n("faa9");var o,u=n("f0c5"),c=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);t["default"]=c.exports},faa9:function(e,t,n){"use strict";var i=n("228e"),a=n.n(i);a.a}},[["7dac","common/runtime","common/vendor"]]]);