(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesGiftCard/my_giftcard/my_giftcard"],{"159d":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o("88e4"),i={data:function(){return{$imgurl:this.$imgurl,baseinfo:"",needAuth:!1,needBind:!1,type:1,showbottom:0,cardsbox:0,page:1,not_use_count:0,use_count:0,list:[],order_id:"",order_type:0,increase:2,shareimg_url:"",giftcard_type:0}},onLoad:function(e){var o=this,i=t.getStorageSync("suid");this._baseMin(this);var a=0;e.fxsid&&(a=e.fxsid),this.fxsid=a;var s="";if(console.log(1111111),console.log(e),console.log(1111111),e.order_id)return s=e.order_id,this.order_id=s,this.order_type=e.type,this.useed(),!1;if(i)n.bdLogin(a,function(){o.getList()});else{var r=t.getStorageSync("baidu_userinfo");r?this.needBind=!0:this.needAuth=!0}},onPullDownRefresh:function(){this.getList(),this.page=1,t.stopPullDownRefresh()},onReachBottom:function(){var e=this,o=e.page+1;t.request({url:this.$host+"/api/mainwxapp/mygiftcards",data:{uniacid:e.$uniacid,type:e.type,page:o,suid:t.getStorageSync("suid")},success:function(t){""!=t.data.data.list&&(e.list=e.list.concat(t.data.data.list),e.not_use_count=t.data.data.not_use_count,e.use_count=t.data.data.use_count,e.page=o)}})},methods:{cell:function(){this.needAuth=!1},closeAuth:function(){this.needAuth=!1,this.needBind=!0},closeBind:function(){this.needBind=!1,this.getList()},useed:function(){console.log(this.order_type),1==this.order_type?this.useCard():t.navigateTo({url:"/pagesGiftCard/card_getPro/card_getPro?order_id="+this.order_id})},getList:function(){var e=this;t.request({url:this.$host+"/api/mainwxapp/mygiftcards",data:{uniacid:e.$uniacid,type:e.type,page:e.page,suid:t.getStorageSync("suid")},success:function(t){e.list=t.data.data.list,e.not_use_count=t.data.data.not_use_count,e.use_count=t.data.data.use_count}})},changeTab:function(t){var e=t.currentTarget.dataset.id,o=this.type;e!=o&&(this.page=1,this.type=e,this.getList())},saoma:function(){t.scanCode({success:function(e){var o=e.path.indexOf("/pagesGiftCard/my_giftcard/my_giftcard?order_id=");console.log(o),-1!=o&&t.navigateTo({url:e.path})}})},showCardsBottom:function(t){for(var e=this,o=t.currentTarget.dataset.index,n=e.list,i=0;i<n.length;i++)o==i&&(e.increase=n[i]["increase"],e.order_id=n[i]["order_id"],e.giftcard_type=n[i]["type"]);e.showbottom=1},closeBottom:function(){var t=this;1==t.showbottom&&(t.showbottom=0)},useCard:function(e){var o=this,n=this,i=(n.order_id,this.giftcard_type);1==i||1==this.order_type?t.request({url:this.$host+"/api/mainwxapp/useGiftcards",data:{uniacid:n.$uniacid,order_id:n.order_id,suid:t.getStorageSync("suid"),source:t.getStorageSync("source")},success:function(e){1==e.data.data.err?t.showModal({title:"提示",content:e.data.data.errmsg,showCancel:!1,success:function(t){t.confirm&&n.getList()}}):(o.showbottom=2,t.showToast({title:"使用成功",icon:"success",duration:2e3}),t.startPullDownRefresh(),n.page=1,n.getList(),t.stopPullDownRefresh())}}):t.navigateTo({url:"/pagesGiftCard/card_getPro/card_getPro?order_id="+this.order_id})},getShareCard:function(){t.showModal({title:"提示",content:"该端不支持转赠他人！",showCancel:!1})},saveImg:function(){var e=this;t.getImageInfo({src:e.shareimg_url,success:function(o){t.saveImageToPhotosAlbum({filePath:o.path,success:function(){t.showToast({title:"保存成功！",icon:"none"}),1==e.cardsbox&&(e.cardsbox=0)}})}})},closeCardBox:function(){var t=this;1==t.cardsbox&&(t.cardsbox=0)},goorderlist:function(){t.navigateTo({url:"/pagesGiftCard/order_list/order_list"})}}};e.default=i}).call(this,o("5486")["default"])},"261f":function(t,e,o){"use strict";var n={auth:()=>Promise.all([o.e("common/vendor"),o.e("components/auth/auth")]).then(o.bind(null,"a32a")),bindPhone:()=>Promise.all([o.e("common/vendor"),o.e("components/bindPhone/bindPhone")]).then(o.bind(null,"9bb9")),myfooter:()=>o.e("components/myfooter/myfooter").then(o.bind(null,"6bab"))},i=function(){var t=this,e=t.$createElement;t._self._c},a=[];o.d(e,"b",function(){return i}),o.d(e,"c",function(){return a}),o.d(e,"a",function(){return n})},"2c67":function(t,e,o){"use strict";o.r(e);var n=o("261f"),i=o("bb2a");for(var a in i)"default"!==a&&function(t){o.d(e,t,function(){return i[t]})}(a);o("5fff");var s,r=o("f0c5"),d=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);e["default"]=d.exports},"5fff":function(t,e,o){"use strict";var n=o("d0b3"),i=o.n(n);i.a},bb2a:function(t,e,o){"use strict";o.r(e);var n=o("159d"),i=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);e["default"]=i.a},d0b3:function(t,e,o){},fc2b:function(t,e,o){"use strict";(function(t){o("d28f");n(o("66fd"));var e=n(o("2c67"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("5486")["createPage"])}},[["fc2b","common/runtime","common/vendor"]]]);