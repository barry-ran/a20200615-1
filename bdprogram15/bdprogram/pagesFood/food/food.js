(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesFood/food/food"],{4936:function(t,o,e){"use strict";e.r(o);var a=e("4d03"),i=e.n(a);for(var s in a)"default"!==s&&function(t){e.d(o,t,function(){return a[t]})}(s);o["default"]=i.a},"49ba":function(t,o,e){"use strict";var a=e("85aa"),i=e.n(a);i.a},"4d03":function(t,o,e){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=e("88e4"),i={data:function(){return{orderOrBusiness:"order",block:!1,logs:[],goodsH:0,scrollToGoodsView:0,toView:"",toViewType:"",GOODVIEWID:"catGood_",animation:!0,goodsNumArr:[0],shoppingCart:{},shoppingCartGoodsId:[],goodMap:{},totalNum:0,totalPay:0,showShopCart:!1,fromClickScroll:!1,timeStart:"",timeEnd:"",hideCount:!0,count:0,needAni:!1,hide_good_box:!0,url:"",protype:1,baseinfo:[],shangjbs:[],zhm:"",tnum:0,chessRoomDetail:{catList:{goodsList:[]}},gwcdata:[],$imgurl:this.$imgurl,bus_x:0,bus_y:0,type_arr:{val:[]},type_title:"",catHighLightIndex:0,guige_show:0,guige_chooseed:"",foodInfo:[],realPay:0,gwcHidden:2,guige_arr:[],foodid:0,chooseGoodArr:[],needAuth:!1,needBind:!1}},onShow:function(){this.chooseGoodArr=t.getStorageSync("foodGwc")?t.getStorageSync("foodGwc"):[],this.totalPay=t.getStorageSync("foodTotalPay")?t.getStorageSync("foodTotalPay"):0,this.totalNum=t.getStorageSync("foodTotalNum")?t.getStorageSync("foodTotalNum"):0},onPullDownRefresh:function(){t.stopPullDownRefresh()},onLoad:function(o){var e=this;this.options=o;var i=o.id;if(!i){i=0;t.setStorage({key:"zid",data:i})}i>0&&(this.mid=i,this.getzh(i)),this._baseMin(this);var s=t.getStorageSync("suid");s&&a.bdLogin(0,function(){}),e.getSjbase(o)},methods:{redirectto:function(t){var o=t.currentTarget.dataset.link,e=t.currentTarget.dataset.linktype;this._redirectto(o,e)},getzh:function(o){var e=this;t.request({url:e.$baseurl+"doPageGetzh",data:{uniacid:e.$uniacid,zid:o},success:function(o){e.tnum=o.data.data.zh.tnum,e.zhm=o.data.data.zh.title+o.data.data.zh.tnum;var a=o.data.data.keys;t.setStorageSync("arrkey",a),t.setStorageSync("zid",o.data.data.zh.tnum)},fail:function(t){}})},goodsViewScrollFn:function(t){this.getIndexFromHArr(t.detail.scrollTop)},getIndexFromHArr:function(t){for(var o=0;o<this.goodsNumArr.length;o++){var e=t-40*o;e>=this.goodsNumArr[o]&&e<this.goodsNumArr[o+1]&&(this.fromClickScroll||(this.catHighLightIndex=o))}this.fromClickScroll=!1},catClickFn:function(t){var o=this,e=t.target.id.split("_")[1],a=t.target.id.split("_")[2];this.fromClickScroll=!0,this.catHighLightIndex=e,this.toView=o.GOODVIEWID+a},touchOnGoods:function(t){clearInterval(this.timer),this.finger={};var o={};this.finger["x"]=t.touches["0"].clientX,this.finger["y"]=t.touches["0"].clientY,this.finger["y"]<this.busPos["y"]?o["y"]=this.finger["y"]-150:o["y"]=this.busPos["y"]-150,o["x"]=Math.abs(this.finger["x"]-this.busPos["x"])/2,this.finger["x"]>this.busPos["x"]?o["x"]=(this.finger["x"]-this.busPos["x"])/2+this.busPos["x"]:o["x"]=(this.busPos["x"]-this.finger["x"])/2+this.finger["x"],this.linePos=a.bezier([this.busPos,o,this.finger],30),this.startAnimation(t)},startAnimation:function(t){var o=0,e=this,a=e.linePos["bezier_points"];this.hide_good_box=!1,this.bus_x=e.finger["x"],this.bus_y=e.finger["y"];var i=a.length;o=i,this.timer=setInterval(function(){o--,e.bus_x=a[o]["x"],e.bus_y=a[o]["y"],o<1&&(clearInterval(e.timer),e.addGoodToCartFn(t),e.hide_good_box=!0)},22)},tabChange:function(t){var o=t.currentTarget.dataset.id;this.orderOrBusiness=o},getSjbase:function(o){var e=this;t.request({url:e.$baseurl+"doPageShangjbs",data:{uniacid:e.$uniacid},success:function(o){e.shangjbs=o.data.data,t.setNavigationBarTitle({title:o.data.data.names})},fail:function(t){}}),t.request({url:e.$baseurl+"doPageDingcai",data:{uniacid:e.$uniacid},success:function(a){var i=t.getStorageSync("systemInfo"),s=o,n=0;e.busPos={},e.busPos["x"]=45,t.getSystemInfo({success:function(t){t.windowHeight}}),e.busPos["y"]=n-56,e.mechine=s,e.systemInfo=i,e.goodsH=i.windowHeight-153-48,console.log(e.systemInfo);var r={};r["catList"]=a.data.data;for(var d=[],u=0;u<a.data.data.length;u++)for(var c=0;c<a.data.data[u].goodsList.length;c++)d.push(a.data.data[u].goodsList[c]);e.chessRoomDetail=r,e.allpro=d,e.toView=e.GOODVIEWID+e.chessRoomDetail.catList[0].id,e.catHighLightIndex=0;for(var h=0;h<e.chessRoomDetail.catList.length;h++){e.goodsNumArr.push(e.chessRoomDetail.catList[h].goodsList.length);var l=e.chessRoomDetail.catList[h].goodsList;if(l.length>0)for(var g=0;g<l.length;g++)e.goodMap[l[g].id]=l[g]}for(var f=[],m=0;m<e.goodsNumArr.length;m++)0==m?f.push(0):f.push(98*e.goodsNumArr[m]+f[m-1]);e.goodsNumArr=f},fail:function(t){}})},makephone:function(o){t.makePhoneCall({phoneNumber:o.currentTarget.dataset.tel})},showShopCartFn:function(t){this.totalPay>0&&(this.showShopCart=!this.showShopCart)},showGuige:function(o){var e=this;this.foodid=o.currentTarget.id,t.request({url:this.$baseurl+"doPageGetFoodInfo",data:{uniacid:this.$uniacid,id:o.currentTarget.id},success:function(t){e.foodInfo=t.data.data.foodInfo,e.realPay=t.data.data.foodInfo.guige_price;var o="",a=[];a=t.data.data.guige_arr;new Array(1,2,3);for(var i in a)o+=a[i]["val"][0]+",";e.guige_chooseed=o.substring(0,o.length-1),e.guige_arr=a,console.log("guige_arr"),console.log(e.guige_arr),e.guige_show=1}})},closeGuige:function(){this.guige_arr=[],this.guige_show=0},chooseed:function(o){var e=this;this.gwcHidden=1;var a=o.currentTarget.dataset.topindex,i=o.currentTarget.dataset.sindex,s=this.guige_arr,n="";for(var r in s)if(r==a)n+=s[r]["val"][i]+",";else{var d=s[r]["ck"];n+=s[r]["val"][d]+","}n=n.substring(0,n.length-1),t.request({url:this.$baseurl+"doPageGetFoodKcPrice",data:{id:this.foodid,guige_chooseed:n},success:function(o){var a=o.data.data;1==a.flag?a.kc<=0?t.showModal({title:"提示",content:"该规格库存不足，请重新选择规格",showCancel:!1,success:function(t){}}):(e.realPay=a.price,e.gwcHidden=2):t.showModal({title:"提示",content:"该规格商品已不存在，点击刷新",showCancel:!1,success:function(t){e.gwcHidden=2,e.getFoodInfo()}})}}),this.guige_chooseed=n,s[a]["ck"]=i,this.guige_arr=s},addGwc:function(){for(var t=this.chooseGoodArr,o=this.realPay,e=this.guige_chooseed,a=this.foodInfo.title,i=this.foodInfo.id,s=this.foodInfo.val_id,n=this.totalPay,r=this.totalNum,d=0,u=0;u<t.length;u++)if(i==t[u][0]&&t[u][2]==a){t[u][3]+=1,d=1;break}var c=new Array;c[0]=i,c[1]=o,c[2]=a,c[3]=1,c[4]=s,c[5]=e,n=1*o+1*n,r=1*r+1,0==d&&t.push(c),this.chooseGoodArr=t,this.totalPay=n.toFixed(2),this.totalNum=r,this.setStorage()},addGoodToCartFn:function(t){var o=t.currentTarget.dataset.index,e=this.chooseGoodArr,a=this.totalPay,i=this.totalNum;e[o][3]++,a=1*a+1*e[o][1],this.totalPay=a.toFixed(2),this.totalNum=1*i+1,this.chooseGoodArr=e,this.setStorage()},decreaseGoodToCartFn:function(t){var o=t.currentTarget.dataset.index,e=this.chooseGoodArr,a=this.totalPay,i=this.totalNum;i=1*i-1,a=0==i?0:1*a-1*e[o][1],e[o][3]--,0==e[o][3]&&e.splice(o,1),this.totalPay=a.toFixed(2),this.totalNum=i,this.chooseGoodArr=e,this.setStorage()},clearGwc:function(){var o=this;t.showModal({title:"提示",content:"确定要清空购物车",success:function(t){t.confirm?(o.totalPay=0,o.totalNum=0,o.chooseGoodArr=[],o.showShopCart=!1,o.setStorage()):t.cancel}})},setStorage:function(){t.setStorage({key:"foodGwc",data:this.chooseGoodArr}),t.setStorage({key:"foodTotalPay",data:this.totalPay}),t.setStorage({key:"foodTotalNum",data:this.totalNum})},goPayFn:function(o){if(!this.getSuid())return!1;t.navigateTo({url:"/pagesFood/food_order/food_order"})},cell:function(){this.needAuth=!1},closeAuth:function(){this.needAuth=!1,this.needBind=!0},closeBind:function(){this.needBind=!1},getSuid:function(){var o=t.getStorageSync("suid");if(o)return!0;var e="";return e=t.getStorageSync("baidu_userinfo"),e?this.needBind=!0:this.needAuth=!0,!1},goDetail:function(o){var e=o.currentTarget.id;t.navigateTo({url:"/pagesFood/food_detail/food_detail?id="+e})}}};o.default=i}).call(this,e("5486")["default"])},7196:function(t,o,e){"use strict";(function(t){e("d28f");a(e("66fd"));var o=a(e("88a9"));function a(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,e("5486")["createPage"])},"85aa":function(t,o,e){},"88a9":function(t,o,e){"use strict";e.r(o);var a=e("bf99"),i=e("4936");for(var s in i)"default"!==s&&function(t){e.d(o,t,function(){return i[t]})}(s);e("49ba");var n,r=e("f0c5"),d=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],n);o["default"]=d.exports},bf99:function(t,o,e){"use strict";var a={auth:()=>Promise.all([e.e("common/vendor"),e.e("components/auth/auth")]).then(e.bind(null,"a32a")),bindPhone:()=>Promise.all([e.e("common/vendor"),e.e("components/bindPhone/bindPhone")]).then(e.bind(null,"9bb9"))},i=function(){var t=this,o=t.$createElement;t._self._c},s=[];e.d(o,"b",function(){return i}),e.d(o,"c",function(){return s}),e.d(o,"a",function(){return a})}},[["7196","common/runtime","common/vendor"]]]);