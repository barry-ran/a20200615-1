(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesBargain/orderlist/orderlist"],{"24fe":function(t,e,a){"use strict";var i=a("627f"),n=a.n(i);n.a},"627f":function(t,e,a){},ab0d:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a("88e4"),n={data:function(){return{$imgurl:this.$imgurl,page:1,morePro:!1,baseinfo:[],orderinfo:[],orderinfo_length:0,type:10,nav:[{id:10,text:"全部"},{id:0,text:"待付款"},{id:1,text:"待核销",nav:2},{id:11,text:"待发货",nav:1},{id:4,text:"已发货"},{id:2,text:"已完成"},{id:-1,text:"已关闭"},{id:3,text:"已过期"},{id:5,text:"商家已取消"},{id:6,text:"售后"}],page_signs:"/pagesBargain/orderlist/orderlist",showhx:0,hxmm:"",hxmm_list:[{val:"",fs:!0},{val:"",fs:!1},{val:"",fs:!1},{val:"",fs:!1},{val:"",fs:!1},{val:"",fs:!1}],hx_choose:0,hx_ewm:"",showPay:0,choosepayf:0,mymoney:0,mymoney_pay:1,is_submit:1,order_id:0,h5_wxpay:0,h5_alipay:0,pay_type:1,pay_money:0}},onLoad:function(e){var a=this;t.setNavigationBarTitle({title:"砍价订单"}),e.type&&(a.type=e.type);var n=0;e.fxsid&&(a.fxsid=e.fxsid),this._baseMin(this),i.bdLogin(n,function(){})},onShow:function(){var t=this;this.page=1,t.getList()},onPullDownRefresh:function(){var e=this;e.page=1,e.getList(),t.stopPullDownRefresh()},onReachBottom:function(){var e=this,a=e.type,i=e.page+1,n=t.getStorageSync("openid");t.request({url:e.$baseurl+"doPageMyBargainorder",data:{uniacid:e.$uniacid,openid:n,suid:t.getStorageSync("suid"),page:i,type:a,is_more:0},success:function(t){""!=t.data.data.list&&(e.orderinfo=e.orderinfo.concat(t.data.data.list),e.page=i,e.mymoney=t.data.data.mymoney)}})},methods:{paybox:function(t){var e=0,a=this.orderinfo,i=t.currentTarget.dataset.order;this.order_id=i;for(var n=0;n<a.length;n++)a[n]["order_id"]==i&&(e=a[n]["true_price"]);this.pay_money=e;var o=this.mymoney;e>o&&(this.mymoney_pay=2,this.pay_type=2,this.choosepayf=4),0==this.showPay&&(this.showPay=1)},payboxclose:function(){1==this.showPay&&(this.showPay=0)},choosepay:function(t){this.pay_type=t.currentTarget.dataset.pay_type,this.choosepayf=t.currentTarget.dataset.type},pay:function(t){var e=this.is_submit;if(2==e)return!1;this.is_submit=2;this.$uniacid,this.suid,this.source;var a=this.pay_type,i=this.pay_money,n=this.order_id;t.detail.formId;1==a?this.pay1(n):this._baidupay(this,i,"bargain",n,"/pagesBargain/orderlist/orderlist")},pay1:function(e){var a=this;t.showModal({title:"请注意",content:"您将使用余额支付"+a.pay_money+"元",success:function(i){i.confirm?(a.payover_do(e),t.showLoading({title:"下单中...",mask:!0})):t.redirectTo({url:"/pagesBargain/orderlist/orderlist"})}})},payover_do:function(e){var a=this,i=a.pay_money,n=(a.mymoney,t.getStorageSync("suid")),o=t.getStorageSync("openid");t.request({url:a.$baseurl+"doPagepaynotify",data:{out_trade_no:e,suid:n,payprice:i,types:"bargain",flag:0,formId:a.formId,uniacid:a.$uniacid,openid:o,source:t.getStorageSync("source")},success:function(e){"失败"==e.data.data.message?t.showToast({title:"付款失败, 请刷新后重新付款！",icon:"none",mask:!0,success:function(){t.navigateTo({url:"/pagesBargain/orderlist/orderlist"}),t.hideLoading()}}):t.showToast({title:"购买成功！",icon:"success",mask:!0,success:function(){t.navigateTo({url:"/pagesBargain/orderlist/orderlist"}),t.hideLoading()}})}})},wlinfo:function(e){var a=e.currentTarget.dataset.kuaidi,i=e.currentTarget.dataset.kuaidihao;t.navigateTo({url:"/pagesOther/logistics_state/logistics_state?kuaidi="+a+"&kuaidihao="+i})},getList:function(e){var a=this,i=t.getStorageSync("openid");t.request({url:a.$baseurl+"doPageMyBargainorder",data:{uniacid:a.$uniacid,openid:i,suid:t.getStorageSync("suid"),nav:a.navs,type:a.type},success:function(t){a.orderinfo=t.data.data.list,a.orderinfo_length=t.data.data.list.length,a.mymoney=t.data.data.mymoney},fail:function(t){}})},chonxhq:function(e){var a=this,i=e.currentTarget.dataset.id,n=e.currentTarget.dataset.nav||"";a.type=i,a.page=1,a.navs=n;var o=t.getStorageSync("openid");t.request({url:a.$baseurl+"doPageMyBargainorder",data:{uniacid:a.$uniacid,openid:o,suid:t.getStorageSync("suid"),type:i,nav:n},success:function(t){a.orderinfo=t.data.data.list,a.orderinfo_length=t.data.data.list.length,a.mymoney=t.data.data.mymoney},fail:function(t){}})},choose_nav:function(t){var e=t.currentTarget.dataset.id,a=this;a.a=e},makePhoneCallB:function(e){var a=this,i=a.baseinfo.tel_b;t.makePhoneCall({phoneNumber:i})},hxshow:function(t){this.showhx=1,this.order=t.currentTarget.dataset.order},hxhide:function(){this.showhx=0,this.hxmm=""},hxmmInput:function(t){for(var e=t.target.value.length,a=0;a<this.hxmm_list.length;a++)this.hxmm_list[a].fs=!1,this.hxmm_list[a].val=t.target.value[a];e&&(this.hxmm_list[e-1].fs=!0),this.hxmm=t.target.value},hxmmpass:function(){var e=this,a=e.hxmm,i=e.order,n=t.getStorageSync("openid");a?t.request({url:e.$baseurl+"hxmm",data:{uniacid:e.$uniacid,hxmm:a,order_id:i,is_more:4,openid:n,suid:t.getStorageSync("suid")},header:{"content-type":"application/json"},success:function(a){var i=a.data.data;if(0==i){t.showModal({title:"提示",content:"核销密码不正确！",showCancel:!1}),e.hxmm="";for(var n=0;n<e.hxmm_list.length;n++)e.hxmm_list[n].fs=!1,e.hxmm_list[n].val=""}else t.showToast({title:"核销成功",icon:"success",duration:2e3,success:function(a){e.showhx=0,e.hxmm="",t.startPullDownRefresh(),e.page=1,e.getList(),t.stopPullDownRefresh()}})}}):t.showModal({title:"提示",content:"请输入核销密码！",showCancel:!1})},orderagain:function(e){var a=e.currentTarget.dataset.pid;t.navigateTo({url:"/pagesBargain/bargain_pro/bargain_pro?id="+a})},qrshouh:function(e){var a=this,i=e.currentTarget.dataset.order,n=t.getStorageSync("openid");t.showModal({title:"提示",content:"确认收货吗？",success:function(e){e.confirm&&t.request({url:a.$baseurl+"doPageshouhuo",data:{uniacid:a.$uniacid,openid:n,suid:t.getStorageSync("suid"),orderid:i},success:function(e){t.showToast({title:"收货成功！",success:function(t){setTimeout(function(){a.page=1,a.getList()},1500)}})}})}})},redirectto:function(t){var e=t.currentTarget.dataset.link,a=t.currentTarget.dataset.linktype;this._redirectto(e,a)},gethxmima:function(){this.hx_choose=1},gethxImg:function(){var e=this;t.request({url:this.$baseurl+"doPageHxEwm",data:{uniacid:this.$uniacid,suid:t.getStorageSync("suid"),pageUrl:"bargain_pro",orderid:this.order},success:function(t){e.hx_ewm=t.data.data,e.hx_choose=2}})},hxhide1:function(){this.hx_choose=0,this.hxmm="";for(var t=0;t<this.hxmm_list.length;t++)this.hxmm_list[t].fs=!1,this.hxmm_list[t].val=""}}};e.default=n}).call(this,a("5486")["default"])},b416:function(t,e,a){"use strict";a.r(e);var i=a("ab0d"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},daf7:function(t,e,a){"use strict";var i={copyright:()=>a.e("components/copyright/copyright").then(a.bind(null,"cb0f")),myfooter:()=>a.e("components/myfooter/myfooter").then(a.bind(null,"6bab"))},n=function(){var t=this,e=t.$createElement;t._self._c},o=[];a.d(e,"b",function(){return n}),a.d(e,"c",function(){return o}),a.d(e,"a",function(){return i})},dc91:function(t,e,a){"use strict";(function(t){a("d28f");i(a("66fd"));var e=i(a("dfbe"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("5486")["createPage"])},dfbe:function(t,e,a){"use strict";a.r(e);var i=a("daf7"),n=a("b416");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("24fe");var s,r=a("f0c5"),d=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);e["default"]=d.exports}},[["dc91","common/runtime","common/vendor"]]]);