(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesBargain/bargain_order/bargain_order"],{"105c":function(a,e,t){"use strict";t.r(e);var i=t("c1d0"),n=t("ecdc");for(var d in n)"default"!==d&&function(a){t.d(e,a,function(){return n[a]})}(d);t("69ac");var s,o=t("f0c5"),r=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);e["default"]=r.exports},2651:function(a,e,t){},"5e4e":function(a,e,t){"use strict";(function(a){t("d28f");i(t("66fd"));var e=i(t("105c"));function i(a){return a&&a.__esModule?a:{default:a}}a(e.default)}).call(this,t("5486")["createPage"])},"69ac":function(a,e,t){"use strict";var i=t("2651"),n=t.n(i);n.a},c1d0:function(a,e,t){"use strict";var i={auth:()=>Promise.all([t.e("common/vendor"),t.e("components/auth/auth")]).then(t.bind(null,"a32a")),bindPhone:()=>Promise.all([t.e("common/vendor"),t.e("components/bindPhone/bindPhone")]).then(t.bind(null,"9bb9")),datetime:()=>t.e("components/datetime/datetime").then(t.bind(null,"c598"))},n=function(){var a=this,e=a.$createElement;a._self._c},d=[];t.d(e,"b",function(){return n}),t.d(e,"c",function(){return d}),t.d(e,"a",function(){return i})},ecdc:function(a,e,t){"use strict";t.r(e);var i=t("f2a8"),n=t.n(i);for(var d in i)"default"!==d&&function(a){t.d(e,a,function(){return i[a]})}(d);e["default"]=n.a},f2a8:function(a,e,t){"use strict";(function(a){function i(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t("88e4"),d=function(){return t.e("components/datetime/datetime").then(t.bind(null,"c598"))},s={data:function(){return{$imgurl:this.$imgurl,again:0,nav:1,addressid:0,pro_city:"",yunfei_price:0,buyerMsg:"",orderid:"",yfjian:0,bargain_id:0,pd_val:[],address:[],m_address:[],m_address_l:0,baseinfo:[],proInfo:[],pagedata:{tp_text:[],val:[]},sfje:0,zf_money:0,xx:[],myname:"",mymobile:"",myaddress:"",wxmobile:"",mymoney:0,yue_order:0,formdescs:"",ttcxs:0,arrs:[],xuanz:0,lixuanz:0,isover:0,zf_type:0,disabled:!1,pay_type:1,show_pay_type:0,alipay:1,wxpay:1,needAuth:!1,needBind:!1,kuaidi:"",stores:"",current:0,storeall:[],storeid:"",is_submit:1,start_year:2019,end_year:2060,showPay:0,choosepayf:0,shop_id:0,shop_info:"",self_taking_time:"",default_concat:"",mymoney_pay:1,h5_wxpay:0,h5_alipay:0}},components:{datetime:d},onLoad:function(a){var e=this;a.id&&(e.id=a.id),a.bargain_id&&(e.bargain_id=a.bargain_id),a.nav&&(e.nav=a.nav,e.addressid=0),a.shop_id&&(e.shop_id=a.shop_id),a.addressid&&(e.addressid=a.addressid),""!=a.orderid&&"undefined"!=a.orderid&&(e.orderid=a.orderid);var t=0;a.fxsid&&(e.fxsid=a.fxsid),this._baseMin(this),n.bdLogin(t,function(){e.bargainProInfo()})},methods:{chooseStore:function(){a.navigateTo({url:"/pages/chooseStore/chooseStore?gid="+this.id+"&addressid="+this.addressid+"&orderid="+this.orderid+"&shop_id="+this.shop_id+"&type=bargain"})},concat_input:function(a){this.default_concat=a.detail.value},openDatetimePicker:function(a){this.$refs.myPicker.show()},closeDatetimePicker:function(){this.$refs.myPicker.hide()},handleSubmit:function(a){this.self_taking_time="".concat(a.year,"-").concat(a.month,"-").concat(a.day," ").concat(a.hour,":").concat(a.minute)},paybox:function(){var e=this.nav;if(console.log("nav="+e),2==e){var t=this.shop_info;if(!t)return a.showModal({title:"提示",content:"请先选择门店",showCancel:!1}),!1;var i=this.self_taking_time;if(!i)return a.showModal({title:"提示",content:"请先选择预约取件时间",showCancel:!1}),!1;var n=this.default_concat;if(!n)return a.showModal({title:"提示",content:"请先输入预留电话",showCancel:!1}),!1;var d=/^1[3456789]{1}\d{9}$/;if(!d.test(n))return a.showModal({title:"提醒",content:"请您输入正确的手机号码",showCancel:!1}),!1}else{var s=this.addressid;if(!s)return a.showModal({title:"提示",content:"请先选择收件地址",showCancel:!1}),!1}var o=this.mymoney,r=this.zf_money;r>o&&(this.mymoney_pay=2,this.pay_type=2,this.zf_type=1,this.choosepayf=4),0==this.showPay&&(this.showPay=1)},payboxclose:function(){1==this.showPay&&(this.showPay=0)},choosepay:function(a){this.zf_type=1==a.currentTarget.dataset.pay_type?0:1,this.choosepayf=a.currentTarget.dataset.type},checkFreePackage:function(){var e=this,t=e.again;0==t&&a.request({url:e.$baseurl+"doPagecheckFreePackage",data:{uniacid:e.$uniacid,suid:a.getStorageSync("suid")},success:function(a){e.free_package=a.data.data}}),e.bargainProInfo()},closeAuth:function(){console.log("closeAuth"),this.needAuth=!1,this._checkBindPhone(this),this.globaluserinfo()},closeBind:function(){console.log("closeBind"),this.needBind=!1,this.checkFreePackage()},bargainProInfo:function(){var e=this;a.request({url:e.$baseurl+"doPageBargainOrder",data:{uniacid:e.$uniacid,id:e.id,openid:e.openid,suid:a.getStorageSync("suid")},success:function(t){if(console.log(t.data.data.is_bargained),t.data.data.is_bargained>0)return a.showModal({title:"提示",content:"该商品还有下单未支付订单，请前往支付",showCancel:!1,success:function(e){a.redirectTo({url:"/pagesBargain/orderlist/orderlist"})}}),!1;if(a.setNavigationBarTitle({title:t.data.data.title}),t.data.data.form_id>0&&e.getFormInfo(t.data.data.form_id),console.log(t.data.data),e.proInfo=t.data.data,e.mymoney=parseFloat(t.data.data.mymoney),e.kuaidi=t.data.data.kuaidi,2!=e.nav&&(1==e.kuaidi?e.nav=1:2==e.kuaidi?e.nav=2:3==e.kuaidi&&(e.nav=1)),1==e.nav){var i=e.addressid;i?e.getmraddresszd(i):e.getmraddress()}else e.myContactInfo()}})},myContactInfo:function(){var e=this;a.request({url:e.$host+"/api/MainWxapp/getMyContactInfo",data:{uniacid:e.$uniacid,suid:e.suid,shop_id:e.shop_id,type:"bargain"},success:function(a){e.shop_info=a.data.data.shop_info,e.getmyinfo()}})},navs:function(a){var e=this,t=parseInt(a.currentTarget.dataset.value),i=parseInt(a.currentTarget.dataset.value),n=0,d=e.yunfei_price;1==i?n-=d:n=d;var s=Math.round(100*(e.sfje-n))/100;e.nav=i,e.yfjian=1==i?0:d,e.sfje=s,e.zf_type=e.mymoney>=s?0:1,e.zf_money=e.mymoney>=s?s:Math.round(100*(s-e.mymoney))/100,e.nav=t,console.log(a),console.log(e.nav)},getFormInfo:function(e){var t=this;a.request({url:t.$baseurl+"doPagegetFormInfo",data:{uniacid:t.$uniacid,form_id:e},success:function(a){t.pagedata=a.data.data.forms}})},add_address:function(){var e=this,t=e.again;0==t&&a.navigateTo({url:"/pages/address/address?pid="+this.id+"&addressid="+e.addressid+"&orderid="+e.orderid})},getmraddress:function(){var e=this,t=a.getStorageSync("openid"),n=a.getStorageSync("suid");a.request({url:e.$baseurl+"doPagegetmraddress",data:i({uniacid:e.$uniacid,openid:t,suid:a.getStorageSync("suid")},"suid",n),success:function(t){var i=t.data.data;if(""!=i&&null!=i)e.address=i,e.addressid=i.id,e.pro_city=i.pro_city;else{var n=e.again;0==n?e.address="":1==n&&a.showModal({title:"提示",content:"该订单数据错误，请重新下单",showCancel:!1,success:function(){a.redirectTo({url:"/pages/index/index"})}})}e.getmyinfo()}})},getmraddresszd:function(e){var t=this,n=a.getStorageSync("openid"),d=a.getStorageSync("suid");a.request({url:t.$baseurl+"doPagegetmraddresszd",data:i({uniacid:t.$uniacid,openid:n,suid:a.getStorageSync("suid"),id:e},"suid",d),success:function(e){var i=e.data.data;if(""!=i&&null!=i)t.address=i,t.pro_city=i.pro_city;else{var n=t.again;0==n?t.address="":1==n&&0==t.m_address_l?t.address="":1==n&&a.showModal({title:"提示",content:"该订单数据错误，请重新下单",showCancel:!1,success:function(){a.redirectTo({url:"/pages/index/index"})}})}t.getmyinfo()}})},getmyinfo:function(){var e=this,t=(a.getStorageSync("openid"),e.nav),i=e.again;if(0==i){var n=e.pro_city,d=e.free_package,s=e.proInfo["nowPrice"];""!=n&&2!=e.nav&&0==d?a.request({url:e.$baseurl+"doPageyunfeigetnew",data:{uniacid:e.$uniacid,id:e.id,type:"bargain",hjjg:s,num:1,pro_city:n},success:function(a){var i=a.data.data,n=0;n=parseFloat(s)>=parseFloat(i["byou"])&&""!=i["byou"]?0:i["yfei"],s=2==t?Math.round(1*s*100)/100:Math.round(100*(1*s+1*n))/100,e.yunfei_price=n,e.sfje=s,e.zf_type=e.mymoney>=s?0:1,e.zf_money=e.mymoney>=s?s:Math.round(100*(s-e.mymoney))/100,e.get_yf=i["yfei"],e.baoyou=i["byou"]}}):(e.sfje=s,e.zf_type=e.mymoney>=s?0:1,e.zf_money=e.mymoney>=s?s:Math.round(100*(s-e.mymoney))/100)}else 1==i&&(s=e.true_price_order,e.sfje=s,e.zf_type=e.mymoney>=s?0:1,e.zf_money=e.mymoney>=s?s:Math.round(100*(s-e.mymoney))/100)},buyerMsgs:function(a){var e=a.detail.value;this.buyerMsg=e},submit:n.throttle(function(e){var t=this.is_submit;if(2==t)return!1;var i=this;console.log(e);var n=e.detail.formId,d=i.again;i.formId=n;var s=i.proInfo,o=i.address;if(s["form_id"]>0){if(2!=i.nav&&(null==o||!o)&&0==d)return a.showModal({title:"提示",content:"请先选择/设置收货地址！",showCancel:!0,success:function(e){if(!e.confirm)return i.disabled=!1,!1;a.navigateTo({url:"/pages/address/address?shareid="+i.shareid+"&pid="+i.id+"&orderid="+i.orderid})}}),!1;i.formSubmit()}else{if(2!=i.nav&&(null==o||!o)&&0==d)return a.showModal({title:"提示",content:"请先选择/设置收货地址！",showCancel:!0,success:function(e){if(e.confirm)a.navigateTo({url:"/pages/address/address?shareid="+i.shareid+"&pid="+i.id+"&orderid="+i.orderid});else if(e.cancel)return i.disabled=!1,!1}}),!1;i.doshend(0)}},2e3),doshend:function(e){var t=this,i=a.getStorageSync("openid"),n=t.zf_money,d=t.zf_type;if(0==d)var s=n,o=0;else s=0,o=n;var r=t.nav,c=t.yunfei_price,u=t.yfjian;c-=u;var l=t.address,f=t.buyerMsg,g=t.orderid,h=t.again;if(c=1==r?c:0,!(2==r||null!=l&&l||0!=h))return a.showModal({title:"提示",content:"请先选择/设置收货地址！",showCancel:!0,success:function(e){if(!e.confirm)return t.disabled=!1,!1;a.navigateTo({url:"/pages/address/address?shareid="+t.shareid+"&pid="+t.id+"&orderid="+t.orderid})}}),!1;var p=l["id"];if(0==t.again){var y="",m="",v="",_="";if(2==t.nav)if(""==t.storeall)y=t.baseinfo.name,m=t.baseinfo.tel,v=t.baseinfo.address;else for(var b=t.storeid,w=t.storeall,x=0;x<w.length;x++)if(b==w[x]["id"]){y=w[x]["title"],m=w[x]["tel"],v=w[x]["province"]+w[x]["city"]+w[x]["country"],_=w[x]["times"];break}}this.is_submit=2,a.request({url:t.$baseurl+"doPagecreateorder",header:{"content-type":"application/json"},data:{uniacid:t.$uniacid,pid:t.id,num:1,types:"bargain",openid:i,suid:a.getStorageSync("suid"),wx_price:o,yue_price:s,true_price:n,addressId:p,buyerMsg:f,nav:r,form_id:e,formId:t.formId,yunfei:c,orderid:g||"",again:t.again,bargain_id:t.bargain_id,source:a.getStorageSync("source"),store_hours:_,store_name:y,store_address:v,store_tel:m,shop_id:t.shop_id,self_taking_time:t.self_taking_time,default_concat:t.default_concat},success:function(e){if("1"==e.data.data.errcode)return a.showModal({title:e.data.data.err,content:"请重新下单",showCancel:!1}),t.disabled=!1,!1;if("2"==e.data.data.errcode)return a.showModal({title:e.data.data.err,content:e.data.data.can_buy<=0?"去逛逛其他商品吧~":"您还可购买"+e.data.data.can_buy+"件",showCancel:!1}),t.disabled=!1,!1;if("3"==e.data.data.errcode)return a.showModal({title:e.data.data.err,content:"当前库存为"+e.data.data.kc+"件",showCancel:!1}),t.disabled=!1,!1;if("4"==e.data.data.errcode)return a.showModal({title:e.data.data.err,content:"商品已经下架或库存不足",showCancel:!1,success:function(){a.redirectTo({url:"/pages/index/index"})}}),!1;var i=e.data.data;t.orderid=i,n<=t.mymoney&&0==t.zf_type?t.pay1(i):t._baidupay(t,o,"bargain",i,t.formId,"/pagesBargain/orderlist/orderlist")}})},showpay:function(){var e=this;a.request({url:this.$baseurl+"doPageGetH5payshow",data:{uniacid:this.$uniacid,suid:a.getStorageSync("suid")},success:function(t){0==t.data.data.ali&&0==t.data.data.wx?a.showModal({title:"提示",content:"请联系管理员设置支付参数",success:function(e){a.redirectTo({url:"/pages/index/index"})}}):(0==t.data.data.ali?(e.alipay=0,e.pay_type=2):(e.alipay=1,e.pay_type=1),0==t.data.data.wx?e.wxpay=0:e.wxpay=1,e.show_pay_type=1)}})},changealipay:function(){this.pay_type=1},changewxpay:function(){this.pay_type=2},close_pay_type:function(){this.show_pay_type=0},h5topay:function(){var a=this.pay_type;1==a?this._alih5pay(this,this.zf_money,14,this.orderid):2==a&&this._wxh5pay(this,this.zf_money,"bargain",this.orderid),this.show_pay_type=0},pay1:function(e){var t=this;a.showModal({title:"请注意",content:"您将使用余额支付"+t.sfje+"元",success:function(i){i.confirm?(t.payover_do(e),a.showLoading({title:"下单中...",mask:!0})):a.redirectTo({url:"/pagesBargain/orderlist/orderlist"})}})},pay2:function(e){var t=this,i=a.getStorageSync("openid");a.request({url:t.$baseurl+"doPagebeforepay",data:{uniacid:t.$uniacid,openid:i,suid:a.getStorageSync("suid"),order_id:e,types:"bargain",formId:t.formId},header:{"content-type":"application/json"},success:function(i){1==i.data.data.errs&&(a.showModal({title:"支付失败",content:i.data.data.return_msg,showCancel:!1}),t.disabled=!1);var n=[1,2,3,4];-1!=n.indexOf(i.data.data.err)&&(a.showModal({title:"支付失败",content:i.data.data.message,showCancel:!1}),t.disabled=!1),0==i.data.data.err&&(a.request({url:t.$baseurl+"doPagesavePrepayid",data:{uniacid:t.$uniacid,types:"bargain",order_id:e,prepayid:i.data.data.package},success:function(a){},fail:function(a){}}),a.requestPayment({timeStamp:i.data.data.timeStamp,nonceStr:i.data.data.nonceStr,package:i.data.data.package,signType:"MD5",paySign:i.data.data.paySign,success:function(e){a.showToast({title:"支付成功",icon:"success",mask:!0,duration:3e3,success:function(e){a.showToast({title:"购买成功！",icon:"success",mask:!0,success:function(){a.navigateTo({url:"/pagesBargain/orderlist/orderlist?type=9"})}})}})},fail:function(e){a.navigateTo({url:"/pagesBargain/orderlist/orderlist?type=9"})},complete:function(a){}}))}})},payover_do:function(e){var t=this,i="",n=(i=a.getStorageSync("openid"),t.sfje);a.request({url:t.$baseurl+"doPagepaynotify",data:{uniacid:t.$uniacid,out_trade_no:e,openid:i,suid:a.getStorageSync("suid"),source:a.getStorageSync("source"),payprice:n,types:"bargain",flag:0,formId:t.formId},success:function(e){"失败"==e.data.data.message?a.showToast({title:"付款失败, 请刷新后重新付款！",icon:"none",mask:!0,success:function(){a.navigateTo({url:"/pagesBargain/orderlist/orderlist?type=9"})}}):a.showToast({title:"购买成功！",icon:"success",mask:!0,success:function(){a.navigateTo({url:"/pagesBargain/orderlist/orderlist?type=9"}),a.hideLoading()}})}})},makePhoneCallC:function(e){var t=e.currentTarget.dataset.tel;a.makePhoneCall({phoneNumber:t})},bindInputChange:function(a){var e=this,t=a.detail.value,i=a.currentTarget.dataset.index,n=e.pagedata;n[i].val=t,e.pagedata=n},bindPickerChange:function(a){var e=this,t=a.detail.value,i=a.currentTarget.dataset.index,n=e.pagedata,d=n[i].tp_text,s=d[t];n[i].val=s,e.pagedata=n},bindDateChange:function(a){var e=this,t=a.detail.value,i=a.currentTarget.dataset.index,n=e.pagedata;n[i].val=t,e.pagedata=n},bindTimeChange:function(a){var e=this,t=a.detail.value,i=a.currentTarget.dataset.index,n=e.pagedata;n[i].val=t,e.pagedata=n},checkboxChange:function(a){var e=this,t=a.detail.value,i=a.currentTarget.dataset.index,n=e.pagedata;n[i].val=t,e.pagedata=n},radioChange:function(a){var e=this,t=a.detail.value,i=a.currentTarget.dataset.index,n=e.pagedata;n[i].val=t,e.pagedata=n},choiceimg1111:function(e){var t=this,i=0,n=t.zhixin,d=e.currentTarget.dataset.index,s=t.pagedata,o=s[d].val,r=s[d].tp_text[0];o?i=o.length:(i=0,o=[]);var c=r-i,u=t.$baseurl+"wxupimg";t.pd_val;a.chooseImage({count:c,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){n=!0,t.zhixin=n,a.showLoading({title:"图片上传中"});var i=e.tempFilePaths;o=o.concat(i),s[d].val=o,t.pagedata=s;var r=0,c=i.length,l=function e(){a.uploadFile({url:u,formData:{uniacid:t.$uniacid},filePath:i[r],name:"file",success:function(i){s[d].z_val.push(i.data),t.pagedata=s,r++,r<c?e():(n=!1,t.zhixin=n,a.hideLoading())}})};l()}})},delimg:function(a){var e=this,t=a.currentTarget.dataset.index,i=a.currentTarget.dataset.id,n=e.pagedata,d=n[t].val;d.splice(i,1);var s=d.length;0==s&&(d=""),n[t].val=d,e.pagedata=n},namexz:function(a){for(var e=this,t=a.currentTarget.dataset.index,i=e.pagedata,n=i[t],d=[],s=0;s<n.tp_text.length;s++){var o={};o["keys"]=n.tp_text[s],o["val"]=1,d.push(o)}e.ttcxs=1,e.formindex=t,e.xx=d,e.xuanz=0,e.lixuanz=-1,e.riqi()},riqi:function(){for(var a=this,e=new Date,t=new Date(e.getTime()),i=t.getFullYear(),n=t.getMonth()+1,d=t.getDate(),s=i+"-"+n+"-"+d,o=a.xx,r=0;r<o.length;r++)o[r].val=1;a.xx=o,a.gettoday(s);var c=[],u=[],l=new Date;for(r=0;r<5;r++){var f=new Date(l.getTime()+24*r*3600*1e3),g=f.getFullYear(),h=f.getMonth()+1,p=f.getDate(),y=h+"月"+p+"日",m=g+"-"+h+"-"+p;c.push(y),u.push(m)}a.arrs=c,a.fallarrs=u,a.today=s},xuanzd:function(a){for(var e=this,t=a.currentTarget.dataset.index,i=e.fallarrs,n=i[t],d=e.xx,s=0;s<d.length;s++)d[s].val=1;e.xuanz=t,e.today=n,e.lixuanz=-1,e.xx=d,e.gettoday(n)},goux:function(a){var e=this,t=a.currentTarget.dataset.index;e.lixuanz=t},gettoday:function(e){var t=this,i=t.id,n="showArt",d=t.formindex,s=t.xx;a.request({url:t.$baseurl+"doPageDuzhan",data:{uniacid:t.$uniacid,id:i,types:n,days:e,pagedatekey:d},header:{"content-type":"application/json"},success:function(a){for(var e=a.data.data,i=0;i<e.length;i++)s[e[i]].val=2;var n=0;e.length==s.length&&(n=1),t.xx=s,t.isover=n}})},save_nb:function(){var e=this,t=e.today,i=e.xx,n=e.lixuanz;if(-1==n)return a.showModal({title:"提现",content:"请选择预约的选项",showCancel:!1}),!1;var d=i[n].keys.yval,s="已选择"+t+"，"+d,o=e.pagedata,r=e.formindex;o[r].val=s,o[r].days=t,o[r].indexkey=r,o[r].xuanx=n,e.ttcxs=0,e.pagedata=o},refreshSessionkey:function(){var e=this;a.login({success:function(t){a.request({url:e.$baseurl+"doPagegetNewSessionkey",data:{uniacid:e.$uniacid,code:t.code},success:function(a){e.newSessionKey=a.data.data}})}})},getPhoneNumber1:function(e){var t=this,i=e.detail.iv,n=e.detail.encryptedData;"getPhoneNumber:ok"==e.detail.errMsg?a.checkSession({success:function(){a.request({url:t.$baseurl+"doPagejiemiNew",data:{uniacid:t.$uniacid,newSessionKey:t.newSessionKey,iv:i,encryptedData:n},success:function(e){if(e.data.data){for(var i=t.pagedata,n=0;n<i.length;n++)0==i[n].type&&5==i[n].tp_text[0].yval&&(i[n].val=e.data.data);t.wxmobile=e.data.data,t.pagedata=i}else a.showModal({title:"提示",content:"sessionKey已过期，请下拉刷新！"})},fail:function(a){}})},fail:function(){a.showModal({title:"提示",content:"sessionKey已过期，请下拉刷新！"})}}):a.showModal({title:"提示",content:"请先授权获取您的手机号！",showCancel:!1})},quxiao:function(){var a=this;a.ttcxs=0},weixinadd:function(){var e=this;a.chooseAddress({success:function(a){for(var t=a.provinceName+" "+a.cityName+" "+a.countyName+" "+a.detailInfo,i=a.userName,n=a.telNumber,d=e.pagedata,s=0;s<d.length;s++)0==d[s].type&&2==d[s].tp_text[0].yval&&(d[s].val=i),0==d[s].type&&3==d[s].tp_text[0].yval&&(d[s].val=n),0==d[s].type&&4==d[s].tp_text[0].yval&&(d[s].val=t);e.myname=i,e.mymobile=n,e.myaddress=t,e.pagedata=d},fail:function(e){a.getSetting({success:function(e){e.authSetting["scope.address"]||a.openSetting({success:function(a){}})}})}})},formSubmit:function(e){for(var t=this,i=t.id,n=!0,d=t.pagedata,s=0;s<d.length;s++)if(1==d[s].ismust)if(5==d[s].type){if(""==d[s].z_val)return n=!1,a.showModal({title:"提醒",content:d[s].name+"为必填项！",showCancel:!1}),t.disabled=!1,!1}else{if(""==d[s].val)return n=!1,a.showModal({title:"提醒",content:d[s].name+"为必填项！",showCancel:!1}),t.disabled=!1,!1;if(0==d[s].type&&1==d[s]["tp_text"][0]["yval"]){var o=/^1[3456789]{1}\d{9}$/;if(!o.test(d[s].val))return a.showModal({title:"提醒",content:"请您输入正确的手机号码",showCancel:!1}),!1}else if(0==d[s].type&&7==d[s]["tp_text"][0]["yval"]){var r=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/;if(!r.test(d[s].val))return a.showModal({title:"提醒",content:"请您输入正确的身份证号",showCancel:!1}),!1}}this.is_submit=2,n&&a.request({url:t.$baseurl+"doPageFormval",data:{uniacid:t.$uniacid,id:i,form_id:t.formId,pagedata:JSON.stringify(d),fid:t.proInfo["form_id"],openid:openid,suid:a.getStorageSync("suid"),types:"bargain",source:a.getStorageSync("source")},success:function(a){var e=a.data.data.id;t.doshend(e)}})}}};e.default=s}).call(this,t("5486")["default"])}},[["5e4e","common/runtime","common/vendor"]]]);