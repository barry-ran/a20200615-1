(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesBargain/bargain_pro/bargain_pro"],{"1d64":function(t,e,i){"use strict";var a=i("cac9"),n=i.n(a);n.a},"4fb9":function(t,e,i){"use strict";i.r(e);var a=i("a3e9"),n=i("b9a3");for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i("1d64");var o,s=i("f0c5"),d=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],o);e["default"]=d.exports},"646f":function(t,e,i){"use strict";(function(t){i("d28f");a(i("66fd"));var e=a(i("4fb9"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("5486")["createPage"])},"92bd":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i("88e4"),n={data:function(){return{$imgurl:this.$imgurl,swiperCurrent:0,indicatorDots:!0,autoplay:!0,interval:3e3,duration:800,circular:!0,countDownList:[],id:0,fxsid:0,proInfo:{masterThumb:[],labels:[]},bargain_id:0,isplay:!1,currentSwiper:0,minHeight:0,baseinfo:[],pic_video:"",state:0,texts:"",bargainCt:[],shareimg:0,share:0,shareimg_url:"",system_w:0,system_h:0,img_w:0,img_h:0,dlength:0,needAuth:!1,needBind:!1,alreadyPrice:0,restPrice:0,fiexdBoxs:0,joinCount:0}},onPullDownRefresh:function(){var e=this;e.id;e.bargainProInfo(),t.stopPullDownRefresh()},onLoad:function(e){var i=this,n=this;e.id&&(n.id=e.id);var r=0;e.fxsid&&(r=e.fxsid,t.setStorageSync("fxsid",r),n.fxsid=e.fxsid),n.checkvip(),this._baseMin(this);var o=t.getStorageSync("suid");o?a.bdLogin(r,function(){i.bargainProInfo()}):this.bargainProInfo(),n.checkvip();var s=t.getStorageSync("systemInfo");this.img_w=parseInt((.65*s.windowWidth).toFixed(0)),this.img_h=parseInt((1.875*this.img_w).toFixed(0)),this.system_w=parseInt(s.windowWidth),this.system_h=parseInt(s.windowHeight)},onShareAppMessage:function(){var e=this,i=t.getStorageSync("suid"),a=e.proInfo,n=e.id,r="";return r="/pagesBargain/bargain_pro/bargain_pro?id="+n+"&userid="+i,{title:a.title,path:r,imageUrl:a.shareThumb}},methods:{navback:function(){t.navigateBack()},toTop:function(){t.pageScrollTo({scrollTop:0})},onPageScroll:function(t){t.scrollTop>200?this.fiexdBoxs=1:this.fiexdBoxs=0},makePhoneCall:function(e){var i=this.baseinfo.tel;t.makePhoneCall({phoneNumber:i})},checkvip:function(e){var i=this,a=t.getStorageSync("suid");t.request({url:i.$baseurl+"doPageCheckvip",data:{uniacid:i.$uniacid,kwd:"bargain",suid:a,id:i.id,gz:1},success:function(e){if(!1===e.data.data)return i.needvip=!0,t.showModal({title:"进入失败",content:"使用本功能需先开通vip!",showCancel:!1,success:function(e){e.confirm&&t.redirectTo({url:"/pages/register/register"})}}),!1;e.data.data.needgrade>0&&(i.needvip=!0,e.data.data.grade>0?e.data.data.grade<e.data.data.needgrade&&t.showModal({title:"进入失败",content:"使用本功能需成为"+e.data.data.vipname+"("+e.data.data.needgrade+"级)以上等级会员,请先升级!",showCancel:!1,success:function(e){e.confirm&&t.redirectTo({url:"/pages/open1/open1"})}}):e.data.data.grade<e.data.data.needgrade&&t.showModal({title:"进入失败",content:"使用本功能需成为"+e.data.data.vipname+"("+e.data.data.needgrade+"级)以上等级会员,请先开通会员后再升级会员等级!",showCancel:!1,success:function(e){e.confirm&&t.redirectTo({url:"/pages/register/register"})}}))},fail:function(t){}})},bargainProInfo:function(){var e=this;t.request({url:e.$baseurl+"doPageBargainProInfo",data:{uniacid:e.$uniacid,id:e.id,openid:e.openid,suid:t.getStorageSync("suid"),source:t.getStorageSync("source")},success:function(i){1==i.data.data.active_flag&&0==i.data.data.overtime&&t.showModal({title:"提示",content:"该商品已下架，请选择其他商品进行砍价",showCancel:!1,success:function(){t.navigateBack({deltal:9}),t.navigateTo({url:"/pagesBargain/bargain/bargain"})}});var a=i.data.data.activeEndTime,n=i.data.data.overtime;e.pic_video=i.data.data.video,e.proInfo=i.data.data,e.texts=i.data.data.texts,e.texts&&(e.texts=e.texts.replace(/\<img/gi,'<img style="width:100%;height:auto;display:block" ')),e.activeEndTime=a,e.bargain_id=i.data.data.bargain_id,e.bargainEndTime=n,e.dlength=e.proInfo.masterThumb.length,e.alreadyPrice=(e.proInfo.price-e.proInfo.nowPrice).toFixed(2),e.joinCount=e.proInfo.is.joinCount,e.restPrice=(e.proInfo.price-e.proInfo.miniPrice-e.alreadyPrice).toFixed(2),e.countDown(),e.countDown1()}})},timeFormat:function(t){return t<10?"0"+t:t},countDown:function(){var t=(new Date).getTime(),e=1e3*this.activeEndTime,i=[],a=null;if(e-t>0){var n=(e-t)/1e3,r=parseInt(n/86400),o=parseInt(n%86400/3600),s=parseInt(n%86400%3600/60),d=parseInt(n%86400%3600%60);a={day:this.timeFormat(r),hou:this.timeFormat(o),min:this.timeFormat(s),sec:this.timeFormat(d)}}else a={day:"00",hou:"00",min:"00",sec:"00"};i.push(a),this.countDownList=i,setTimeout(this.countDown,1e3)},countDown1:function(){var t=(new Date).getTime(),e=1e3*this.bargainEndTime,i=[],a=null;if(e-t>0){var n=(e-t)/1e3,r=parseInt(n/86400),o=parseInt(n%86400/3600),s=parseInt(n%86400%3600/60),d=parseInt(n%86400%3600%60);a={day:this.timeFormat(r),hou:this.timeFormat(o),min:this.timeFormat(s),sec:this.timeFormat(d)}}else a={day:"00",hou:"00",min:"00",sec:"00"};i.push(a),this.bargainCt=i,setTimeout(this.countDown1,1e3)},goActivity:function(){if(!this.getSuid())return!1;var e=this;t.navigateTo({url:"/pagesBargain/bargain_activity/bargain_activity?bargain_id="+e.bargain_id+"&id="+e.id})},cell:function(){this.needAuth=!1},closeAuth:function(){this.needAuth=!1,this.needBind=!0},closeBind:function(){this.needBind=!1},getSuid:function(){var e=t.getStorageSync("suid");if(e)return!0;var i="";return i=t.getStorageSync("baidu_userinfo"),i?this.needBind=!0:this.needAuth=!0,!1},createOrder:function(e){if(!this.getSuid())return!1;t.redirectTo({url:"/pagesBargain/bargain_order/bargain_order?id="+this.id})},swiperLoad:function(e){var i=this;t.getSystemInfo({success:function(t){var a=e.detail.width,n=e.detail.height,r=a/n,o=t.windowWidth/r;i.heighthave||(i.minHeight=o,i.heighthave=1)}})},swiperChange:function(t){this.currentSwiper=t.detail.current,this.isplay=!1,this.autoplay=!0},playvideo:function(){var t=this;t.isplay=!0,t.autoplay=!1},endvideo:function(){var t=this;t.autoplay=!0,t.isplay=!1},open_share:function(){this.share=1},share_close:function(){this.share=0,this.shareimg=0},h5ShareAppMessage:function(){var e=this,i=t.getStorageSync("suid");t.showModal({title:"长按复制链接后分享",content:this.$host+"/h5/index.html?id="+this.$uniacid+"#/pagesBargain/bargain_pro/bargain_pro?id="+this.id+"&fxsid="+i+"&userid="+i,showCancel:!1,success:function(t){e.share=0}})},getShareImg:function(){t.showToast({title:"暂不支持生成分享海报",icon:"none"})},closeShare:function(){this.shareimg=0},saveImg:function(){var e=this;t.getImageInfo({src:e.shareimg_url,success:function(i){t.saveImageToPhotosAlbum({filePath:i.path,success:function(){t.showToast({title:"保存成功！",icon:"none"}),e.shareimg=0,e.share=0}})}})},aliSaveImg:function(){var e=this;t.getImageInfo({src:e.shareimg_url,success:function(t){my.saveImage({url:t.path,showActionSheet:!0,success:function(){my.alert({title:"保存成功"}),e.shareimg=0,e.share=0}})}})}}};e.default=n}).call(this,i("5486")["default"])},a3e9:function(t,e,i){"use strict";var a={auth:()=>Promise.all([i.e("common/vendor"),i.e("components/auth/auth")]).then(i.bind(null,"a32a")),bindPhone:()=>Promise.all([i.e("common/vendor"),i.e("components/bindPhone/bindPhone")]).then(i.bind(null,"9bb9"))},n=function(){var t=this,e=t.$createElement;t._self._c},r=[];i.d(e,"b",function(){return n}),i.d(e,"c",function(){return r}),i.d(e,"a",function(){return a})},b9a3:function(t,e,i){"use strict";i.r(e);var a=i("92bd"),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e["default"]=n.a},cac9:function(t,e,i){}},[["646f","common/runtime","common/vendor"]]]);