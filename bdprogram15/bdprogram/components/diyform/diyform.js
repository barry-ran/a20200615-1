(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/diyform/diyform"],{"0c96":function(t,e,n){"use strict";n.r(e);var a=n("b9c0"),i=n("9820");for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);n("dce4");var r,s=n("f0c5"),d=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);e["default"]=d.exports},"42b3":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"diyform",props:["diyform","siteroot","formdescs","newSessionKey","zhixin","pd_val","formid"],data:function(){return{$host:this.$host,diy_host:this.$diyHost,ttcxs:0,xuanz:-1,lixuanz:-1,xx:[],formindex:-1,arrs:[],isover:0,myname:"",mytel:"",myadd:"",wxmobile:"",needAuth:!1,needBind:!1,forminfo:[]}},created:function(t){this.getFormInfo()},methods:{getFormInfo:function(){var e=this,n=t.getStorageSync("form_source");t.request({url:e.$host+"/api/Plugin/feedback",data:{uniacid:e.$uniacid,sourceid:n||0},success:function(t){e.forminfo=t.data.data.forminfo.tp_text}})},bindInputChange:function(t){var e=t.detail.value,n=t.currentTarget.dataset.index,a=this.forminfo;a[n].val=e,this.forminfo=a},weixinadd:function(){var e=this;t.chooseAddress({success:function(t){for(var n=t.provinceName+" "+t.cityName+" "+t.countyName+" "+t.detailInfo,a=t.userName,i=t.telNumber,o=e.forminfo,r=0;r<o.length;r++)0==o[r].type&&2==o[r].tp_text[0].yval&&(o[r].val=a),0==o[r].type&&3==o[r].tp_text[0].yval&&(o[r].val=i),0==o[r].type&&4==o[r].tp_text[0].yval&&(o[r].val=n);e.myname=a,e.mytel=i,e.myadd=n,e.forminfo=o}})},getPhoneNumber:function(e){var n=this,a=e.detail.iv,i=e.detail.encryptedData;"getPhoneNumber:ok"==e.detail.errMsg?t.checkSession({success:function(){t.request({url:n.$baseurl+"doPagejiemiNew",data:{uniacid:n.$uniacid,newSessionKey:n.newSessionKey,iv:a,encryptedData:i},success:function(e){if(e.data.data){for(var a=n.forminfo,i=0;i<a.length;i++)0==a[i].type&&5==a[i].tp_text[0].yval&&(a[i].val=e.data.data);n.wxmobile=e.data.data,n.forminfo=a}else t.showModal({title:"提示",content:"sessionKey已过期，请下拉刷新！"})},fail:function(t){console.log(t)}})},fail:function(){t.showModal({title:"提示",content:"sessionKey已过期，请下拉刷新！"})}}):t.showModal({title:"提示",content:"请先授权获取您的手机号！",showCancel:!1})},checkboxChange:function(t){var e=t.detail.value,n=t.currentTarget.dataset.index,a=this.forminfo;a[n].val=e,this.forminfo=a},radioChange:function(t){var e=t.detail.value,n=t.currentTarget.dataset.index,a=this.forminfo;a[n].val=e,this.forminfo=a},delimg:function(t){var e=t.currentTarget.dataset.index,n=t.currentTarget.dataset.id,a=this.forminfo,i=a[e].z_val;i.splice(n,1),0==i.length&&(i=[]),a[e].z_val=i,this.forminfo=a,console.log(a[e].z_val)},choiceimg:function(e){var n=this,a=0,i=n.zhixin,o=e.currentTarget.dataset.index,r=n.forminfo,s=r[o].val,d=r[o].tp_text[0];s?a=s.length:(a=0,s=[]);var u=d-a;n.pd_val;t.chooseImage({count:u,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){i=!0,n.zhixin=i,t.showLoading({title:"图片上传中"});var a=e.tempFilePaths,s=0,d=a.length,u=function e(){t.uploadFile({url:n.$baseurl+"wxupimg",formData:{uniacid:n.$uniacid},filePath:a[s],name:"file",success:function(a){console.log(r[o].z_val),r[o].z_val.push(a.data),n.forminfo=r,s++,s<d?e():(i=!1,n.zhixin=i,t.hideLoading())}})};u()}})},bindPickerChange:function(t){console.log(t);var e=t.detail.value,n=t.currentTarget.dataset.index,a=this.forminfo,i=a[n].tp_text,o=i[e];a[n].val=o,this.forminfo=a},bindDateChange:function(t){var e=t.detail.value,n=t.currentTarget.dataset.index,a=this.forminfo;a[n].val=e,this.forminfo=a},bindTimeChange:function(t){var e=t.detail.value,n=t.currentTarget.dataset.index,a=this.forminfo;a[n].val=e,this.forminfo=a},namexz:function(t){for(var e=this,n=t.currentTarget.dataset.index,a=e.forminfo,i=a[n],o=[],r=0;r<i.tp_text.length;r++){var s={};s["keys"]=i.tp_text[r],s["val"]=1,o.push(s)}e.ttcxs=1,e.formindex=n,e.xx=o,e.xuanz=0,e.lixuanz=-1,e.riqi()},riqi:function(){for(var t=this,e=new Date,n=new Date(e.getTime()),a=n.getFullYear(),i=n.getMonth()+1,o=n.getDate(),r=a+"-"+i+"-"+o,s=t.xx,d=0;d<s.length;d++)s[d].val=1;t.xx=s,t.gettoday(r);for(var u=[],l=[],c=new Date,f=0;f<5;f++){var h=new Date(c.getTime()+24*f*3600*1e3),v=h.getFullYear(),m=h.getMonth()+1,g=h.getDate(),x=m+"月"+g+"日",y=v+"-"+m+"-"+g;u.push(x),l.push(y)}t.arrs=u,t.fallarrs=l,t.today=r},gettoday:function(e){var n=this,a=0,i="diy",o=n.formindex,r=n.xx;t.request({url:n.$baseurl+"dopageDuzhan",data:{uniacid:n.$uniacid,id:a,types:i,days:e,pagedatekey:o},success:function(t){for(var e=t.data.data,a=0;a<e.length;a++)r[e[a]].val=2;var i=0;e.length==r.length&&(i=1),n.xx=r,n.isover=i}})},goux:function(t){this.lixuanz=t.currentTarget.dataset.index},xuanzd:function(t){for(var e=t.currentTarget.dataset.index,n=this.fallarrs,a=n[e],i=this.xx,o=0;o<i.length;o++)i[o].val=1;this.xuanz=e,this.today=a,this.lixuanz=-1,this.xx=i,this.gettoday(a)},quxiao:function(){this.ttcxs=0},save_nb:function(){var e=this.today,n=this.xx,a=this.lixuanz;if(-1==a)return t.showModal({title:"提现",content:"请选择预约的选项",showCancel:!1}),!1;var i=n[a].keys.yval,o="已选择"+e+"，"+i,r=this.forminfo,s=this.formindex;r[s].val=o,r[s].days=e,r[s].indexkey=s,r[s].xuanx=a,this.ttcxs=0,this.forminfo=r},diyFormSubmit:function(e){var n=this;if(!this.getSuid())return!1;for(var a=n.forminfo,i=0;i<a.length;i++){if(1==a[i].ismust)if(5==a[i].type){if(!a[i].z_val)return t.showModal({title:"提醒",content:a[i].name+"为必填项！",showCancel:!1}),!1}else{if(""==a[i].val)return t.showModal({title:"提醒",content:a[i].name+"为必填项！",showCancel:!1}),!1;if(0==a[i].type&&1==a[i]["tp_text"][0]["yval"]){var o=/^1[3456789]{1}\d{9}$/;if(!o.test(a[i].val))return t.showModal({title:"提醒",content:"请您输入正确的手机号码",showCancel:!1}),!1}else if(0==a[i].type&&7==a[i]["tp_text"][0]["yval"]){var r=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/;if(!r.test(a[i].val))return t.showModal({title:"提醒",content:"请您输入正确的身份证号",showCancel:!1}),!1}}if(5==a[i].type&&a[i].z_val&&a[i].z_val.length>0)for(var s=0;s<a[i].z_val.length;s++)a[i].z_val[s]=a[i].z_val[s].substr(a[i].z_val[s].indexOf("/upimages"))}var d=t.getStorageSync("openid");t.request({url:n.$baseurl+"doPageDiyForms",data:{uniacid:n.$uniacid,suid:t.getStorageSync("suid"),forminfo:JSON.stringify(a),formid:n.formid,openid:d,source:t.getStorageSync("source"),form_id:e.detail.formId?e.detail.formId:""},success:function(e){1==e.data.data?t.showModal({title:"提醒",content:"表单提交成功",showCancel:!1,success:function(){t.reLaunch({url:"/pages/index/index"})}}):t.showModal({title:"提醒",content:"表单提交成功, 邮件发送失败",showCancel:!1,success:function(){}})}})},cell:function(){this.needAuth=!1},closeAuth:function(){this.needAuth=!1,this.needBind=!0},closeBind:function(){this.needBind=!1},getSuid:function(){var e=t.getStorageSync("suid");if(e)return!0;var n="";return n=t.getStorageSync("baidu_userinfo"),n?this.needBind=!0:this.needAuth=!0,!1}}};e.default=n}).call(this,n("5486")["default"])},9820:function(t,e,n){"use strict";n.r(e);var a=n("42b3"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);e["default"]=i.a},b9c0:function(t,e,n){"use strict";var a={auth:()=>Promise.all([n.e("common/vendor"),n.e("components/auth/auth")]).then(n.bind(null,"a32a")),bindPhone:()=>Promise.all([n.e("common/vendor"),n.e("components/bindPhone/bindPhone")]).then(n.bind(null,"9bb9"))},i=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return a})},dce4:function(t,e,n){"use strict";var a=n("ecd8"),i=n.n(a);i.a},ecd8:function(t,e,n){}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/diyform/diyform-create-component',
    {
        'components/diyform/diyform-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('5486')['createComponent'](__webpack_require__("0c96"))
        })
    },
    [['components/diyform/diyform-create-component']]
]);
