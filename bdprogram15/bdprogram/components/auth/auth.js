(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/auth/auth"],{"7bc7":function(e,t,a){},"9ad1":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;a("88e4");var o={props:["needAuth"],data:function(){return{$imgurl:this.$imgurl}},created:function(){console.log("wx_auth")},methods:{login_close:function(){this.needAuth=!1,this.$emit("cell")},aliDoLogin:function(){console.log("ali_login");var t=this.$uniacid,a=this.$baseurl,o=this;e.login({provider:"alipay",scopes:"auth_user",success:function(n){n.authCode&&e.request({url:a+"dopagealipaylogin",data:{authCode:n.authCode,uniacid:t},success:function(n){console.log("支付宝小程序初次登陆"),e.setStorageSync("source",2),e.setStorageSync("suid",n.data.suid);var i=n.data;n.data.nick_name&&n.data.avatar?(e.setStorageSync("ali_uid",i.id),e.setStorageSync("ali_user_id",i.user_id),e.setStorageSync("ali_userinfo",i),i.suid?(e.setStorageSync("suid",i.suid),o.$emit("cell")):o.$emit("closeAuth")):e.getUserInfo({success:function(n){i.nick_name=n.nickName,i.avatar=n.avatar,e.request({url:a+"dopagealiUpdateNickname",data:{avatar:n.avatar,nick_name:n.nickName,uniacid:t,id:i.id},success:function(t){e.setStorageSync("ali_uid",i.id),e.setStorageSync("ali_user_id",i.user_id),e.setStorageSync("ali_userinfo",i),o.$emit("closeAuth")}})}})}})},fail:function(e){console.log(e),console.log("拒绝授权"),o.$emit("cell")}})},bDDoLogin:function(){var t=this.$uniacid,a=this.$baseurl,o=this;e.login({provider:"baidu",success:function(n){e.request({url:a+"doPageBdAppbase",data:{code:n.code,uniacid:t},success:function(n){if(console.log("百度小程序初次登陆"),console.log(n),2==n.data.data.res)e.showModal({title:"提醒",content:"获取用户信息失败，请检查appid和appsecret是否正确！",showCancel:!1});else{e.setStorageSync("source",4);var i=n.data.data;e.setStorageSync("openid",i.openid),console.log(i),i["nickname"]&&i["avatar"]?(e.setStorageSync("baidu_userinfo",i),i.suid?(e.setStorageSync("suid",i.suid),o.$emit("cell")):o.$emit("closeAuth")):swan.authorize({scope:"scope.userInfo",success:function(n){swan.getUserInfo({success:function(n){console.log(n),n.is_anonymous||swan.request({url:a+"dopageBaiDuUpdate",data:{uniacid:t,openid:i.openid,avatar:n.userInfo.avatarUrl,nickName:n.userInfo.nickName,gender:n.userInfo.gender},success:function(t){i["avatar"]=n.userInfo.avatarUrl,i["nickname"]=n.userInfo.nickName,t.data&&e.setStorageSync("baidu_userinfo",i),o.$emit("closeAuth")}})}})},fail:function(e){swan.showModal({title:"提示",content:"必须授权后才能操作,是否重新授权？",showCancel:!0,success:function(e){e.confirm?swan.openSetting({success:function(e){o.$emit("closeAuth")}}):o.$emit("cell")}})}})}}})}})},h5DoLogin:function(){this.needAuth=!1,this.$emit("closeAuth")},getTUserInfo:function(){var t=this;e.getProvider({service:"oauth",success:function(t){console.log(t.provider[0]),e.setStorageSync("provider",t.provider[0])}}),e.login({provider:"toutiao",success:function(a){a.code&&(console.log(a),e.request({url:t.$baseurl+"dopagetoutiaologin",data:{code:a.code,anonymous_code:a.anonymousCode,uniacid:t.$uniacid},success:function(a){if(console.log(a),2==a.data.data.res)return e.showModal({title:"提示",content:"登录失败，请检查小程序设置是否正确",showCancel:!1}),!1;console.log("头条小程序初次登陆"),e.setStorageSync("source",5),e.setStorageSync("suid",a.data.data.suid);var o=a.data.data;a.data.data.nickname&&a.data.data.avatar?(e.setStorageSync("toutiao_uid",o.id),e.setStorageSync("toutiao_openid",o.openid),e.setStorageSync("toutiao_userinfo",o),o.suid?(e.setStorageSync("suid",o.suid),t.$emit("cell")):t.$emit("closeAuth")):e.getUserInfo({success:function(a){o.nickname=a.userInfo.nickName,o.avatar=a.userInfo.avatarUrl,e.request({url:t.$baseurl+"dopagetoutiaoUpdateNickname",data:{avatar:a.userInfo.avatarUrl,nickname:a.userInfo.nickName,uniacid:t.$uniacid,id:o.id},success:function(a){e.setStorageSync("toutiao_uid",o.id),e.setStorageSync("toutiao_openid",o.openid),e.setStorageSync("toutiao_userinfo",o),t.$emit("closeAuth")}})},fail:function(a){e.openSetting({success:function(e){console.log(e),1==e.authSetting.scope.userInfo?(console.log(e),t.$emit("closeAuth")):console.log(e)}})}})}}))},fail:function(e){console.log("拒绝授权"),"function"==typeof cb&&cb()}})},getUserInfo:function(){}}};t.default=o}).call(this,a("5486")["default"])},a32a:function(e,t,a){"use strict";a.r(t);var o=a("de4c"),n=a("b155");for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);a("e0a2");var s,c=a("f0c5"),u=Object(c["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=u.exports},b155:function(e,t,a){"use strict";a.r(t);var o=a("9ad1"),n=a.n(o);for(var i in o)"default"!==i&&function(e){a.d(t,e,function(){return o[e]})}(i);t["default"]=n.a},de4c:function(e,t,a){"use strict";var o,n=function(){var e=this,t=e.$createElement;e._self._c},i=[];a.d(t,"b",function(){return n}),a.d(t,"c",function(){return i}),a.d(t,"a",function(){return o})},e0a2:function(e,t,a){"use strict";var o=a("7bc7"),n=a.n(o);n.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/auth/auth-create-component',
    {
        'components/auth/auth-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('5486')['createComponent'](__webpack_require__("a32a"))
        })
    },
    [['components/auth/auth-create-component']]
]);
